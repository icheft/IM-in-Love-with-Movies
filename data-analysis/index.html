
<!doctype html>
<html lang="zh-Hant" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.9">
    
    
      
        <title>資料分析 - GenEdu 5010 Final Project | IM in Love with Movies</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../stylesheets/jupyter.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="pink">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳轉到
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="GenEdu 5010 Final Project | IM in Love with Movies" class="md-header__button md-logo" aria-label="GenEdu 5010 Final Project | IM in Love with Movies" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.25 6a.75.75 0 0 0-.75.75v7.5a.75.75 0 0 0 1.5 0v-7.5A.75.75 0 0 0 7.25 6zM12 6a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-4.5A.75.75 0 0 0 12 6zm4 .75a.75.75 0 0 1 1.5 0v9.5a.75.75 0 0 1-1.5 0v-9.5z"/><path fill-rule="evenodd" d="M3.75 2A1.75 1.75 0 0 0 2 3.75v16.5c0 .966.784 1.75 1.75 1.75h16.5A1.75 1.75 0 0 0 22 20.25V3.75A1.75 1.75 0 0 0 20.25 2H3.75zM3.5 3.75a.25.25 0 0 1 .25-.25h16.5a.25.25 0 0 1 .25.25v16.5a.25.25 0 0 1-.25.25H3.75a.25.25 0 0 1-.25-.25V3.75z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GenEdu 5010 Final Project | IM in Love with Movies
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              資料分析
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜尋" placeholder="搜尋" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜尋引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/icheft/IM-in-Love-with-Movies" title="前往倉庫" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    icheft/IM-in-Love-with-Movies
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="GenEdu 5010 Final Project | IM in Love with Movies" class="md-nav__button md-logo" aria-label="GenEdu 5010 Final Project | IM in Love with Movies" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.25 6a.75.75 0 0 0-.75.75v7.5a.75.75 0 0 0 1.5 0v-7.5A.75.75 0 0 0 7.25 6zM12 6a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-4.5A.75.75 0 0 0 12 6zm4 .75a.75.75 0 0 1 1.5 0v9.5a.75.75 0 0 1-1.5 0v-9.5z"/><path fill-rule="evenodd" d="M3.75 2A1.75 1.75 0 0 0 2 3.75v16.5c0 .966.784 1.75 1.75 1.75h16.5A1.75 1.75 0 0 0 22 20.25V3.75A1.75 1.75 0 0 0 20.25 2H3.75zM3.5 3.75a.25.25 0 0 1 .25-.25h16.5a.25.25 0 0 1 .25.25v16.5a.25.25 0 0 1-.25.25H3.75a.25.25 0 0 1-.25-.25V3.75z"/></svg>

    </a>
    GenEdu 5010 Final Project | IM in Love with Movies
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/icheft/IM-in-Love-with-Movies" title="前往倉庫" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    icheft/IM-in-Love-with-Movies
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        簡介
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../data-collection/" class="md-nav__link">
        資料收集
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../data-processing/" class="md-nav__link">
        資料處理
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          資料分析
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        資料分析
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="目錄">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目錄
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    票房分析
  </a>
  
    <nav class="md-nav" aria-label="票房分析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    一、疫情前後的票房差異
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    二、票房與投入成本的關係
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    三、票房與參演者的關係 - 男女演員的多寡會不會影響票房
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    四、評分網站的差異：
  </a>
  
    <nav class="md-nav" aria-label="四、評分網站的差異：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1. 影評人與大眾評分差異比較：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-tmdb-vs-rotten-tomato" class="md-nav__link">
    2.不同平台間觀眾評分比較: TMDb vs Rotten Tomato
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3. 觀眾評分與電影類別的關係
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    五、票房與原始語言的關係
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    六、票房與電影級數的關係
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    七、票房與上映時間的關係
  </a>
  
    <nav class="md-nav" aria-label="七、票房與上映時間的關係">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    1. 寒暑假比較多電影？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    2. 過年大片是不是真的比較夯？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    3. 夏天的電影比較熱門？
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    八、票房預測
  </a>
  
    <nav class="md-nav" aria-label="八、票房預測">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#outliers" class="md-nav__link">
    如果去掉 Outliers 的結果會如何？
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-roi" class="md-nav__link">
    電影的賺錢程度 - ROI 與票房的關係
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../conclusion/" class="md-nav__link">
        結論
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="_1">資料分析<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">票房分析<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<h3 id="_3">一、疫情前後的票房差異<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>2019年底，全球疫情爆發，隨著八大場所的關閉，電影院的生意也因此大受打擊。時至今日，疫苗逐漸普及，疫情稍為緩和，我們想要知道「電影營收是否依舊受到影響」。我們假設2020/10/01（第四季）後的電影依舊受到疫情影響，以此假設分析：「2019/10/01 - 2019/12/31」與「2020/10/01 - 2020/12/31」的電影票房是否有差異。</p>
<div class="highlight"><pre><span></span><code><span class="n">covid_df</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="p">[((</span><span class="n">u_movie_df</span><span class="o">.</span><span class="n">release_date</span> <span class="o">&gt;=</span> <span class="s1">&#39;2019-01-01&#39;</span><span class="p">))]</span>
<span class="n">covid_df_t1</span> <span class="o">=</span> <span class="n">covid_df</span><span class="p">[((</span><span class="n">covid_df</span><span class="o">.</span><span class="n">release_date</span> <span class="o">&gt;=</span> <span class="s1">&#39;2019-10-01&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_df</span><span class="o">.</span><span class="n">release_date</span> <span class="o">&lt;=</span> <span class="s1">&#39;2019-12-31&#39;</span><span class="p">))]</span>
<span class="n">covid_df_t2</span> <span class="o">=</span> <span class="n">covid_df</span><span class="p">[((</span><span class="n">covid_df</span><span class="o">.</span><span class="n">release_date</span> <span class="o">&gt;=</span> <span class="s1">&#39;2020-10-01&#39;</span><span class="p">))]</span>
<span class="n">covid_revenue</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;before_covid&#39;</span><span class="p">:</span> <span class="n">covid_df_t1</span><span class="o">.</span><span class="n">revenue</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">revenue</span><span class="p">,</span>
                 <span class="s1">&#39;after_covid&#39;</span> <span class="p">:</span> <span class="n">covid_df_t2</span><span class="o">.</span><span class="n">revenue</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">revenue</span><span class="p">}</span>
<span class="n">covid_df_revenue</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">covid_revenue</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">covid_df_revenue</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="n">covid_df_revenue</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>before_covid</th>
      <th>after_covid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1074251311</td>
      <td>1070714.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>173469516</td>
      <td>15104310.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>122801777</td>
      <td>168285000.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>203044905</td>
      <td>25814306.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>491570967</td>
      <td>12886100.0</td>
    </tr>
  </tbody>
</table>
</div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>before_covid</th>
      <th>after_covid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>30</th>
      <td>17133446</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>31</th>
      <td>73515024</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>32</th>
      <td>191540586</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>33</th>
      <td>50401502</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>34</th>
      <td>374733942</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">before</span> <span class="o">=</span> <span class="n">covid_df_revenue</span><span class="p">[</span><span class="s1">&#39;before_covid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>
<span class="n">after</span> <span class="o">=</span> <span class="n">covid_df_revenue</span><span class="p">[</span><span class="s1">&#39;after_covid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>
</code></pre></div>
<p><strong>檢查資料是否為常態分佈</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Revenue of Q4 in 2020&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">after</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Revenue of Q4 in 2019&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_27_0.png" /></p>
<p><img alt="png" src="../output_27_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># the histogram of the data</span>
<span class="n">bins_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2e8</span><span class="p">,</span> <span class="mf">0.4e8</span><span class="p">,</span> <span class="mf">0.6e8</span><span class="p">,</span> <span class="mf">0.8e8</span><span class="p">,</span> <span class="mf">1e8</span><span class="p">]</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">counts</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">patches</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins_list</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Revenue in 2019&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Histogram of Revenue of Movie in 2019&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">bins_list</span><span class="p">)</span>
<span class="n">bin_centers</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">bins</span><span class="p">[</span><span class="mi">1</span><span class="p">:])]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bin_centers</span><span class="p">,</span> <span class="n">counts</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="s1">&#39;ro-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># the histogram of the data</span>
<span class="n">bins_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2e8</span><span class="p">,</span> <span class="mf">0.4e8</span><span class="p">,</span> <span class="mf">0.6e8</span><span class="p">,</span> <span class="mf">0.8e8</span><span class="p">,</span> <span class="mf">1e8</span><span class="p">]</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">counts</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">patches</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">after</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins_list</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Revenue in 2020&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Histogram of Revenue of Movie in 2020&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">bins_list</span><span class="p">)</span>
<span class="n">bin_centers</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">bins</span><span class="p">[</span><span class="mi">1</span><span class="p">:])]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bin_centers</span><span class="p">,</span> <span class="n">counts</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="s1">&#39;ro-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_28_0.png" /></p>
<p><img alt="png" src="../output_28_1.png" /></p>
<p>由以上的長條圖，我們可以認定兩資料非常態分佈，因此使用 Wilcoxon Rank Sum Test。</p>
<ul>
<li><span class="arithmatex">\(H_0:\)</span> The locations of the two populations are the same. <br></li>
<li><span class="arithmatex">\(H_1:\)</span> The locations of before_covid(2019/10 - 2019/12) is greater than after_covid(2020/10 - 2020/12).</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">stats</span><span class="o">.</span><span class="n">mannwhitneyu</span><span class="p">(</span><span class="n">before</span> <span class="p">,</span> <span class="n">after</span> <span class="p">,</span> <span class="n">alternative</span> <span class="o">=</span> <span class="s1">&#39;greater&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>MannwhitneyuResult(statistic=447.0, pvalue=0.019465268036451523)
</code></pre></div>
<p>由檢定結果發現 p-value &lt; 0.05，因此我們可以拒絕虛無假設，推論一直到2020/10第四季後的電影票房依然受到影響。若將信心水準調整至0.01，則會顯示沒有差異，因此我們認為電影票房一直到2020年底之後，就有回穩的趨勢。</p>
<p>我們接著拿 2020/07 - 2020/09 的資料與 2020/10 - 2020/12 比較，確認是否有回穩的趨勢。</p>
<div class="highlight"><pre><span></span><code><span class="n">covid_df_t1</span> <span class="o">=</span>  <span class="n">covid_df</span><span class="p">[((</span><span class="n">covid_df</span><span class="o">.</span><span class="n">release_date</span> <span class="o">&gt;=</span> <span class="s1">&#39;2020-07-01&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">covid_df</span><span class="o">.</span><span class="n">release_date</span> <span class="o">&lt;=</span> <span class="s1">&#39;2020-09-30&#39;</span><span class="p">))]</span>
<span class="n">covid_df_t2</span> <span class="o">=</span>  <span class="n">covid_df</span><span class="p">[((</span><span class="n">covid_df</span><span class="o">.</span><span class="n">release_date</span> <span class="o">&gt;=</span> <span class="s1">&#39;2020-10-01&#39;</span><span class="p">))]</span>
<span class="n">covid_revenue</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;phase1&#39;</span><span class="p">:</span> <span class="n">covid_df_t1</span><span class="o">.</span><span class="n">revenue</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">revenue</span><span class="p">,</span>
                 <span class="s1">&#39;phase2&#39;</span> <span class="p">:</span> <span class="n">covid_df_t2</span><span class="o">.</span><span class="n">revenue</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">revenue</span><span class="p">}</span>
<span class="n">covid_df_revenue</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">covid_revenue</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">covid_df_revenue</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="n">covid_df_revenue</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>

<span class="n">phase1</span> <span class="o">=</span> <span class="n">covid_df_revenue</span><span class="p">[</span><span class="s1">&#39;phase1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>
<span class="n">phase2</span> <span class="o">=</span> <span class="n">covid_df_revenue</span><span class="p">[</span><span class="s1">&#39;phase2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>phase1</th>
      <th>phase2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>39657073.0</td>
      <td>1070714</td>
    </tr>
    <tr>
      <th>1</th>
      <td>39238300.0</td>
      <td>15104310</td>
    </tr>
    <tr>
      <th>2</th>
      <td>47800000.0</td>
      <td>168285000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4700000.0</td>
      <td>25814306</td>
    </tr>
    <tr>
      <th>4</th>
      <td>363129000.0</td>
      <td>12886100</td>
    </tr>
  </tbody>
</table>
</div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>phase1</th>
      <th>phase2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>14</th>
      <td>NaN</td>
      <td>47019435</td>
    </tr>
    <tr>
      <th>15</th>
      <td>NaN</td>
      <td>30763855</td>
    </tr>
    <tr>
      <th>16</th>
      <td>NaN</td>
      <td>76706000</td>
    </tr>
    <tr>
      <th>17</th>
      <td>NaN</td>
      <td>80648577</td>
    </tr>
    <tr>
      <th>18</th>
      <td>NaN</td>
      <td>46586903</td>
    </tr>
  </tbody>
</table>
</div>

<ul>
<li><span class="arithmatex">\(H_0:\)</span> The locations of the two populations are the same. <br></li>
<li><span class="arithmatex">\(H_1:\)</span> The locations of phase1(2020/7 - 2020/9) is less than phase2(2020/10 - 2020/12).</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">stats</span><span class="o">.</span><span class="n">mannwhitneyu</span><span class="p">(</span><span class="n">phase1</span> <span class="p">,</span> <span class="n">phase2</span> <span class="p">,</span> <span class="n">alternative</span> <span class="o">=</span> <span class="s1">&#39;less&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>MannwhitneyuResult(statistic=80.0, pvalue=0.40285679813398884)
</code></pre></div>
<p>由檢定結果發現 p-value &gt; 0.05，因此我們不可以拒絕虛無假設，推論一直到2020/10第四季後的電影票房相較於第三季已有好轉，不過因為疫情後之票房依然受到影響，因此接下來的分析，我們將去除疫情後的資料。</p>
<h3 id="_4">二、票房與投入成本的關係<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">data_b_r</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="p">[[</span><span class="s1">&#39;budget&#39;</span><span class="p">,</span> <span class="s1">&#39;revenue&#39;</span><span class="p">]]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">data_b_r</span><span class="p">[</span><span class="s1">&#39;budget&#39;</span><span class="p">],</span> <span class="n">data_b_r</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;movie budget (dollars)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;revenue (dollars)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">corr</span> <span class="o">=</span> <span class="n">data_b_r</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corr</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../output_36_0.png" /></p>
<p><img alt="png" src="../output_36_1.png" /></p>
<p>從以上的散布圖我們可以看見具備一定程度的線性關係，我們使用 Pearson Correlation of Coefficient test 來驗證。</p>
<p>兩變數 budget, revenue 之間的關係為 <span class="arithmatex">\(\rho\)</span>，當 <span class="arithmatex">\(\rho = 0\)</span> 時，代表選定的兩變數無關。</p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: <span class="arithmatex">\(\rho = 0\)</span><br></li>
<li><span class="arithmatex">\(H_1\)</span>: <span class="arithmatex">\(\rho \neq  0\)</span></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">stats</span><span class="o">.</span><span class="n">spearmanr</span><span class="p">(</span><span class="n">data_b_r</span><span class="p">[</span><span class="s1">&#39;budget&#39;</span><span class="p">],</span> <span class="n">data_b_r</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>SpearmanrResult(correlation=0.7033468696684063, pvalue=0.0)
</code></pre></div>
<p>由檢定結果發現 p-value &lt; 0.05，因此我們可以拒絕虛無假設，推測投入成本與票房相關。</p>
<h3 id="-">三、票房與參演者的關係 - 男女演員的多寡會不會影響票房<a class="headerlink" href="#-" title="Permanent link">&para;</a></h3>
<p>隨著性別平權議題、女權意識抬頭，越來越多人對於這樣的思潮越來越關注。2017年的#metoo運動，更是揭露了美國影視產業對於女性的種種不平等。以此為發想，我們希望可以探究：觀眾喜好是否有受到自19世紀後期開始的女權思潮影響。</p>
<div class="alert alert-block alert-info">
<b>🍿 你知道嗎？</b><br>

在2007年到2012年間，有台詞的女性角色比例僅佔30.8%</div>

<div class="highlight"><pre><span></span><code><span class="n">cast_gender</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="p">[[</span><span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="s1">&#39;female_cast_cnt&#39;</span><span class="p">,</span> <span class="s1">&#39;male_cast_cnt&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">cast_col</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;female_cast_cnt&#39;</span><span class="p">,</span> <span class="s1">&#39;male_cast_cnt&#39;</span><span class="p">]</span>
<span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">multi_scatter_plot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">cast_gender</span><span class="p">,</span> <span class="n">cast_col</span><span class="p">,</span> <span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</code></pre></div>
<p><img alt="png" src="../output_41_0.png" /></p>
<p><img alt="png" src="../output_41_1.png" /></p>
<p>可以自散佈圖x軸線發現，男性演員數量明顯大於女性演員數量。然而這樣依然無法看出女性演員對於電影票房的影響力（演員數量多，投入成本相對較高，根據上一個檢定，票房也相對較高），因此我們決定探究：女性演員不少於男性演員的電影，票房是否較高。</p>
<div class="highlight"><pre><span></span><code><span class="n">cast_gender</span><span class="p">[</span><span class="s2">&quot;diff&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cast_gender</span><span class="p">[</span><span class="s2">&quot;female_cast_cnt&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">cast_gender</span><span class="p">[</span><span class="s2">&quot;male_cast_cnt&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cast_gender</span><span class="p">)</span>   

<span class="n">m</span> <span class="o">=</span> <span class="n">cast_gender</span><span class="p">[</span><span class="s1">&#39;diff&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="n">positive</span><span class="p">,</span> <span class="n">negative</span> <span class="o">=</span> <span class="n">cast_gender</span><span class="p">[</span><span class="n">m</span><span class="p">],</span> <span class="n">cast_gender</span><span class="p">[</span><span class="o">~</span><span class="n">m</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>        revenue  female_cast_cnt  male_cast_cnt  diff
0     161834276                8             12    -4
1     144056873                4              3     1
2      45554533                1              5    -4
3      28780255                2             12   -10
4     106371651                5              5     0
...         ...              ...            ...   ...
2783   47019435                2             10    -8
2784   30763855                3              4    -1
2785   76706000                1             12   -11
2786   80648577                3             13   -10
2787   46586903                5              7    -2

[2788 rows x 4 columns]
</code></pre></div>
<p><span class="arithmatex">\(t\)</span>-test:</p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: <span class="arithmatex">\(\mu_1 - \mu_2 = 0\)</span></li>
<li><span class="arithmatex">\(H_1\)</span>: <span class="arithmatex">\(\mu_1 - \mu_2 &lt; 0\)</span>.</li>
</ul>
<p>其中，
+ <span class="arithmatex">\(\mu_1\)</span>: average revenue that female cast count is greater than male cast count
+ <span class="arithmatex">\(\mu_2\)</span>: average revenue that female cast count is smaller than male cast count</p>
<p>Check normality first:</p>
<ol>
<li>直方圖</li>
<li>
<p>Shapiro檢定<br></p>
</li>
<li>
<p><span class="arithmatex">\(H_0\)</span>: The population is normally distributed</p>
</li>
<li><span class="arithmatex">\(H_1\)</span>: The population is not normally distributed</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="c1"># 轉換成numpy array</span>
<span class="n">sample1</span> <span class="o">=</span> <span class="n">positive</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">sample2</span> <span class="o">=</span> <span class="n">negative</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># 移除nan</span>
<span class="n">sample1</span> <span class="o">=</span> <span class="n">sample1</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">sample1</span><span class="p">)]</span>
<span class="n">sample2</span> <span class="o">=</span> <span class="n">sample2</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">sample2</span><span class="p">)]</span>

<span class="c1">#自由度計算</span>
<span class="n">v1</span> <span class="o">=</span> <span class="n">sample1</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">sample2</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>

<span class="c1">#畫histogram確認是否常態分佈</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">sample1</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Revenue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;revenue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;female &gt; male&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">sample2</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;revenue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;female &lt; male&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1">#Shapiro Test</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sample 1:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">sample1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sample 2:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">sample2</span><span class="p">))</span>
</code></pre></div>
<p><img alt="png" src="../output_45_0.png" /></p>
<p><img alt="png" src="../output_45_1.png" /></p>
<div class="highlight"><pre><span></span><code>Sample 1:
ShapiroResult(statistic=0.7325308918952942, pvalue=1.691291852961973e-28)
Sample 2:
ShapiroResult(statistic=0.6975903511047363, pvalue=0.0)
</code></pre></div>
<p>根據上方的直方圖和 Shapiro 檢定結果 (<span class="arithmatex">\(p\)</span>-value <span class="arithmatex">\(&lt; 0.05\)</span>，拒絕虛無假設），我們可以推測資料不是常態分佈。</p>
<p>因此，我們改使用 Wilcoxon Rank Sum test.</p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: The two population locations are the same</li>
<li><span class="arithmatex">\(H_1\)</span>: The location of the population 1 is to the right of the location of population 2.</li>
</ul>
<p>Populations:</p>
<ul>
<li>population 1: average revenue that female cast count is greater than male cast count</li>
<li>population 2: average revenue that female cast count is smaller than male cast count</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">stats</span><span class="o">.</span><span class="n">ranksums</span><span class="p">(</span><span class="n">positive</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">],</span> <span class="n">negative</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>RanksumsResult(statistic=-5.26309699662061, pvalue=1.4164879821151155e-07)
</code></pre></div>
<p>由上述檢定結果（p-vlaue &lt; 0.05)，我們可以拒絕虛無假設，可以推論當女性演員數量大於男性演員數量時，票房較高。</p>
<h3 id="_5">四、評分網站的差異：<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<h4 id="1">1. 影評人與大眾評分差異比較：<a class="headerlink" href="#1" title="Permanent link">&para;</a></h4>
<p>電影評分網站Rotten Tomato有許多評分機制，其中最受到矚目的兩個分別是「影評人的評分」與「大眾的評分」。以此為發想，我們比較Rotten Tomato上影評人與大眾的評分是否存在差異。 </p>
<div class="highlight"><pre><span></span><code><span class="n">df_compare_rating_1</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="p">[[</span><span class="s1">&#39;rotten_score&#39;</span><span class="p">,</span> <span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df_compare_rating_1</span> <span class="o">=</span> <span class="n">df_compare_rating_1</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Head of dataset:&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_compare_rating_1</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tail of dataset:&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_compare_rating_1</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Head of dataset:
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>rotten_score</th>
      <th>rotten_aud_score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>40.0</td>
      <td>37.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>20.0</td>
      <td>57.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>62.0</td>
      <td>62.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>66.0</td>
      <td>78.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>44.0</td>
      <td>64.0</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code>Tail of dataset:
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>rotten_score</th>
      <th>rotten_aud_score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2405</th>
      <td>2783</td>
      <td>83.0</td>
      <td>94.0</td>
    </tr>
    <tr>
      <th>2406</th>
      <td>2784</td>
      <td>29.0</td>
      <td>57.0</td>
    </tr>
    <tr>
      <th>2407</th>
      <td>2785</td>
      <td>55.0</td>
      <td>86.0</td>
    </tr>
    <tr>
      <th>2408</th>
      <td>2786</td>
      <td>66.0</td>
      <td>91.0</td>
    </tr>
    <tr>
      <th>2409</th>
      <td>2787</td>
      <td>74.0</td>
      <td>97.0</td>
    </tr>
  </tbody>
</table>
</div>

<p><strong>檢查資料是否為常態分佈</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;rotten_score&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Bar chart of rotten_score&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Bar chart of rotten_aud_score&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_51_0.png" /></p>
<p><img alt="png" src="../output_51_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">fig</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">qqplot</span><span class="p">(</span><span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;rotten_score&#39;</span><span class="p">],</span> <span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="s1">&#39;45&#39;</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">qqplot</span><span class="p">(</span><span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">],</span> <span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="s1">&#39;45&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../output_52_0.png" /></p>
<p><img alt="png" src="../output_52_1.png" /></p>
<p>從直方圖和 Shapiro test 之後，我們認定 rotten_score 為非常態分佈，rotten_aud_score 為常態分佈，因此採用 Wilcoxon Signed Rank Sum Test.</p>
<ul>
<li><span class="arithmatex">\(H_0:\)</span> The two population locations are the same</li>
<li><span class="arithmatex">\(H_1:\)</span> The two population locations are NOT the same</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">stats</span><span class="o">.</span><span class="n">wilcoxon</span><span class="p">(</span><span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;rotten_score&#39;</span><span class="p">],</span> <span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">],</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;two-sided&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>WilcoxonResult(statistic=875752.5, pvalue=1.4523706162642633e-55)
</code></pre></div>
<p>由檢定結果發現 p-value &lt; 0.05，因此我們可以拒絕虛無假設，推論專業影評人與觀眾評分不盡相同。</p>
<h4 id="2-tmdb-vs-rotten-tomato">2.不同平台間觀眾評分比較: TMDb vs Rotten Tomato<a class="headerlink" href="#2-tmdb-vs-rotten-tomato" title="Permanent link">&para;</a></h4>
<p>我們好奇針對同一部電影在不同平台上的觀眾評分是否有差異，因此比較爛番茄觀眾評分及TMDb上的觀眾評分結果是否相同。</p>
<div class="highlight"><pre><span></span><code><span class="n">df_compare_rating_2</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="p">[[</span><span class="s1">&#39;TMDB_score&#39;</span><span class="p">,</span><span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df_compare_rating_2</span> <span class="o">=</span> <span class="n">df_compare_rating_2</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">df_compare_rating_2</span><span class="p">[</span><span class="s1">&#39;TMDB_score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_compare_rating_2</span><span class="p">[</span><span class="s1">&#39;TMDB_score&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span> 
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Head of dataset:&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_compare_rating_2</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tail of dataset:&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_compare_rating_2</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Head of dataset:
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>TMDB_score</th>
      <th>rotten_aud_score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>59.0</td>
      <td>37.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>64.0</td>
      <td>57.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>65.0</td>
      <td>62.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>67.0</td>
      <td>78.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>64.0</td>
      <td>64.0</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code>Tail of dataset:
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>TMDB_score</th>
      <th>rotten_aud_score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2405</th>
      <td>2783</td>
      <td>85.0</td>
      <td>94.0</td>
    </tr>
    <tr>
      <th>2406</th>
      <td>2784</td>
      <td>71.0</td>
      <td>57.0</td>
    </tr>
    <tr>
      <th>2407</th>
      <td>2785</td>
      <td>76.0</td>
      <td>86.0</td>
    </tr>
    <tr>
      <th>2408</th>
      <td>2786</td>
      <td>79.0</td>
      <td>91.0</td>
    </tr>
    <tr>
      <th>2409</th>
      <td>2787</td>
      <td>88.0</td>
      <td>97.0</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df_compare_rating_2</span><span class="p">[</span><span class="s1">&#39;TMDB_score&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Bar chart of TMDB_score&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df_compare_rating_2</span><span class="p">[</span><span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Bar chart of rotten_aud_score&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_57_0.png" /></p>
<p><img alt="png" src="../output_57_1.png" /></p>
<p>從長條圖我們認定兩組資料為常態分佈。</p>
<p>Let 'TMDB_score' be <span class="arithmatex">\(\mu_1\)</span>, 'rotten_aud_score' be <span class="arithmatex">\(\mu_2\)</span>, and <span class="arithmatex">\(\mu_D = \mu_1 - \mu_2\)</span>.</p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: <span class="arithmatex">\(\mu_D = 0\)</span></li>
<li><span class="arithmatex">\(H_1\)</span>: <span class="arithmatex">\(\mu_D \ne 0\)</span></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.05</span>
<span class="c1"># use matched-pair experiment</span>
<span class="c1"># t-test &amp; estimator of mu_D</span>
<span class="n">rotten</span> <span class="o">=</span> <span class="n">df_compare_rating_2</span><span class="p">[</span><span class="s1">&#39;TMDB_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">aud</span> <span class="o">=</span> <span class="n">df_compare_rating_2</span><span class="p">[</span><span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="n">diff</span> <span class="o">=</span> <span class="n">rotten</span> <span class="o">-</span> <span class="n">aud</span>
<span class="n">nobs</span> <span class="o">=</span> <span class="n">diff</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">nobs</span> <span class="o">-</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;degree of freedom = &quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>

<span class="n">diff_desc</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
<span class="n">t_value</span> <span class="o">=</span> <span class="p">(</span><span class="n">diff_desc</span><span class="o">.</span><span class="n">mean</span> <span class="o">-</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">diff_desc</span><span class="o">.</span><span class="n">variance</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">nobs</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;t-value = </span><span class="si">{</span><span class="n">t_value</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1">#p-values</span>
<span class="n">ptmp</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">t_value</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
<span class="n">p_value</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">ptmp</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;p_value (two tail) = </span><span class="si">{</span><span class="n">p_value</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>degree of freedom =  2409
t-value = 13.2406
p_value (two tail) = 0.0000
</code></pre></div>
<p>由檢定結果發現 <span class="arithmatex">\(p\)</span>-value &lt; 0.05，因此我們可以拒絕虛無假設，推論 TMDb 和 Rotten Tomatoes 兩者評分不盡相同。</p>
<h4 id="3">3. 觀眾評分與電影類別的關係<a class="headerlink" href="#3" title="Permanent link">&para;</a></h4>
<p>我們認為觀眾評分時，不只會考量電影作品本身的內容，也有可能因為電影類別而有所偏頗，導致特定類別的電影評分較高或較低。</p>
<div class="highlight"><pre><span></span><code><span class="n">movie_gen_dummy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../data/movie_gen_dummy.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">movie_gen_dummy</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">rev_outlier</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">des</span><span class="o">.</span><span class="n">outlier</span><span class="p">(</span><span class="n">movie_gen_dummy</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">][:</span><span class="mi">20</span><span class="p">]</span>
<span class="n">rot_outlier</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">des</span><span class="o">.</span><span class="n">outlier</span><span class="p">(</span><span class="n">movie_gen_dummy</span><span class="p">[</span><span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">filter_rows_by_values</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">]</span>

<span class="n">movie_gen_dummy</span> <span class="o">=</span> <span class="n">movie_gen_dummy</span><span class="p">[</span><span class="n">movie_gen_dummy</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mf">1e5</span><span class="o">*</span><span class="mi">9</span><span class="p">]</span> 
<span class="n">movie_gen_dummy</span> <span class="o">=</span> <span class="n">filter_rows_by_values</span><span class="p">(</span><span class="n">movie_gen_dummy</span><span class="p">,</span> <span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="n">rev_outlier</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">movie_gen_dummy</span> <span class="o">=</span> <span class="n">filter_rows_by_values</span><span class="p">(</span><span class="n">movie_gen_dummy</span><span class="p">,</span> <span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">,</span> <span class="n">rot_outlier</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">movie_gen_dummy</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="n">movie_gen_df</span> <span class="o">=</span> <span class="n">movie_gen_dummy</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">movie_gen_df</span> <span class="o">=</span> <span class="n">movie_gen_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;Action&#39;</span><span class="p">:]</span>
<span class="n">movie_gen_df</span><span class="p">[</span><span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">movie_gen_dummy</span><span class="p">[</span><span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">]</span>
<span class="n">movie_gen_df</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">movie_gen_dummy</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span>
<span class="n">movie_gen_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">movie_gen_dummy</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span>
<span class="n">movie_gen_df</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">movie_gen_df</span><span class="o">.</span><span class="n">index</span>
<span class="n">movie_gen_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>(2416, 28)
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Action</th>
      <th>Adventure</th>
      <th>Animation</th>
      <th>Comedy</th>
      <th>Crime</th>
      <th>Documentary</th>
      <th>Drama</th>
      <th>Family</th>
      <th>Fantasy</th>
      <th>History</th>
      <th>...</th>
      <th>Romance</th>
      <th>Science Fiction</th>
      <th>TV Movie</th>
      <th>Thriller</th>
      <th>War</th>
      <th>Western</th>
      <th>rotten_aud_score</th>
      <th>revenue</th>
      <th>release_date</th>
      <th>t</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>37.0</td>
      <td>161834276</td>
      <td>2000-02-03</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>57.0</td>
      <td>144056873</td>
      <td>2000-02-03</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>62.0</td>
      <td>45554533</td>
      <td>2000-02-11</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>78.0</td>
      <td>28780255</td>
      <td>2000-02-18</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>64.0</td>
      <td>106371651</td>
      <td>2000-02-18</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 23 columns</p>
</div>

<div class="highlight"><pre><span></span><code><span class="n">x_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">movie_gen_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">])</span>
<span class="n">y_name</span> <span class="o">=</span> <span class="s1">&#39;rotten_aud_score&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">multi_variable_plot</span><span class="p">(</span><span class="n">x_name</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="n">y_name</span><span class="o">=</span><span class="n">y_name</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">movie_gen_df</span><span class="p">,</span> <span class="n">x_names</span><span class="o">=</span><span class="n">x_names</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../output_63_0.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">movie_gen_df</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Action                                                            742
Adventure                                                         548
Animation                                                         187
Comedy                                                            883
Crime                                                             389
Documentary                                                        11
Drama                                                            1028
Family                                                            322
Fantasy                                                           309
History                                                           111
Horror                                                            288
Music                                                              63
Mystery                                                           234
Romance                                                           399
Science Fiction                                                   324
TV Movie                                                            0
Thriller                                                          732
War                                                                67
Western                                                            26
rotten_aud_score                                               149300
revenue                                                  389947703586
release_date        2000-02-032000-02-032000-02-112000-02-182000-0...
t                                                             2917320
dtype: object
</code></pre></div>
<p>我們可以發現去掉 outliers 之後，TV Movie 變得都沒有值，於是我們先將 TV Movie 從我們的 <span class="arithmatex">\(x\)</span> 變數去除。</p>
<div class="highlight"><pre><span></span><code><span class="n">x_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;TV Movie&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">multicollinearity</span><span class="p">(</span><span class="n">movie_gen_df</span><span class="p">,</span> <span class="n">x_names</span><span class="p">,</span> <span class="n">y_name</span><span class="p">)</span>
</code></pre></div>
<style  type="text/css" >
#T_09663d94_d655_11eb_ace9_acde48001122row0_col0,#T_09663d94_d655_11eb_ace9_acde48001122row0_col1,#T_09663d94_d655_11eb_ace9_acde48001122row0_col2,#T_09663d94_d655_11eb_ace9_acde48001122row0_col3,#T_09663d94_d655_11eb_ace9_acde48001122row0_col4,#T_09663d94_d655_11eb_ace9_acde48001122row0_col5,#T_09663d94_d655_11eb_ace9_acde48001122row0_col6,#T_09663d94_d655_11eb_ace9_acde48001122row0_col7,#T_09663d94_d655_11eb_ace9_acde48001122row0_col8,#T_09663d94_d655_11eb_ace9_acde48001122row0_col9,#T_09663d94_d655_11eb_ace9_acde48001122row0_col10,#T_09663d94_d655_11eb_ace9_acde48001122row0_col11,#T_09663d94_d655_11eb_ace9_acde48001122row0_col12,#T_09663d94_d655_11eb_ace9_acde48001122row0_col13,#T_09663d94_d655_11eb_ace9_acde48001122row0_col14,#T_09663d94_d655_11eb_ace9_acde48001122row0_col15,#T_09663d94_d655_11eb_ace9_acde48001122row0_col16,#T_09663d94_d655_11eb_ace9_acde48001122row0_col17,#T_09663d94_d655_11eb_ace9_acde48001122row0_col18,#T_09663d94_d655_11eb_ace9_acde48001122row1_col0,#T_09663d94_d655_11eb_ace9_acde48001122row1_col1,#T_09663d94_d655_11eb_ace9_acde48001122row1_col2,#T_09663d94_d655_11eb_ace9_acde48001122row1_col3,#T_09663d94_d655_11eb_ace9_acde48001122row1_col4,#T_09663d94_d655_11eb_ace9_acde48001122row1_col5,#T_09663d94_d655_11eb_ace9_acde48001122row1_col6,#T_09663d94_d655_11eb_ace9_acde48001122row1_col7,#T_09663d94_d655_11eb_ace9_acde48001122row1_col8,#T_09663d94_d655_11eb_ace9_acde48001122row1_col9,#T_09663d94_d655_11eb_ace9_acde48001122row1_col10,#T_09663d94_d655_11eb_ace9_acde48001122row1_col11,#T_09663d94_d655_11eb_ace9_acde48001122row1_col12,#T_09663d94_d655_11eb_ace9_acde48001122row1_col13,#T_09663d94_d655_11eb_ace9_acde48001122row1_col14,#T_09663d94_d655_11eb_ace9_acde48001122row1_col15,#T_09663d94_d655_11eb_ace9_acde48001122row1_col16,#T_09663d94_d655_11eb_ace9_acde48001122row1_col17,#T_09663d94_d655_11eb_ace9_acde48001122row1_col18,#T_09663d94_d655_11eb_ace9_acde48001122row2_col0,#T_09663d94_d655_11eb_ace9_acde48001122row2_col1,#T_09663d94_d655_11eb_ace9_acde48001122row2_col2,#T_09663d94_d655_11eb_ace9_acde48001122row2_col3,#T_09663d94_d655_11eb_ace9_acde48001122row2_col4,#T_09663d94_d655_11eb_ace9_acde48001122row2_col5,#T_09663d94_d655_11eb_ace9_acde48001122row2_col6,#T_09663d94_d655_11eb_ace9_acde48001122row2_col7,#T_09663d94_d655_11eb_ace9_acde48001122row2_col8,#T_09663d94_d655_11eb_ace9_acde48001122row2_col9,#T_09663d94_d655_11eb_ace9_acde48001122row2_col10,#T_09663d94_d655_11eb_ace9_acde48001122row2_col11,#T_09663d94_d655_11eb_ace9_acde48001122row2_col12,#T_09663d94_d655_11eb_ace9_acde48001122row2_col13,#T_09663d94_d655_11eb_ace9_acde48001122row2_col14,#T_09663d94_d655_11eb_ace9_acde48001122row2_col15,#T_09663d94_d655_11eb_ace9_acde48001122row2_col16,#T_09663d94_d655_11eb_ace9_acde48001122row2_col17,#T_09663d94_d655_11eb_ace9_acde48001122row2_col18,#T_09663d94_d655_11eb_ace9_acde48001122row3_col0,#T_09663d94_d655_11eb_ace9_acde48001122row3_col1,#T_09663d94_d655_11eb_ace9_acde48001122row3_col2,#T_09663d94_d655_11eb_ace9_acde48001122row3_col3,#T_09663d94_d655_11eb_ace9_acde48001122row3_col4,#T_09663d94_d655_11eb_ace9_acde48001122row3_col5,#T_09663d94_d655_11eb_ace9_acde48001122row3_col6,#T_09663d94_d655_11eb_ace9_acde48001122row3_col7,#T_09663d94_d655_11eb_ace9_acde48001122row3_col8,#T_09663d94_d655_11eb_ace9_acde48001122row3_col9,#T_09663d94_d655_11eb_ace9_acde48001122row3_col10,#T_09663d94_d655_11eb_ace9_acde48001122row3_col11,#T_09663d94_d655_11eb_ace9_acde48001122row3_col12,#T_09663d94_d655_11eb_ace9_acde48001122row3_col13,#T_09663d94_d655_11eb_ace9_acde48001122row3_col14,#T_09663d94_d655_11eb_ace9_acde48001122row3_col15,#T_09663d94_d655_11eb_ace9_acde48001122row3_col16,#T_09663d94_d655_11eb_ace9_acde48001122row3_col17,#T_09663d94_d655_11eb_ace9_acde48001122row3_col18,#T_09663d94_d655_11eb_ace9_acde48001122row4_col0,#T_09663d94_d655_11eb_ace9_acde48001122row4_col1,#T_09663d94_d655_11eb_ace9_acde48001122row4_col2,#T_09663d94_d655_11eb_ace9_acde48001122row4_col3,#T_09663d94_d655_11eb_ace9_acde48001122row4_col4,#T_09663d94_d655_11eb_ace9_acde48001122row4_col5,#T_09663d94_d655_11eb_ace9_acde48001122row4_col6,#T_09663d94_d655_11eb_ace9_acde48001122row4_col7,#T_09663d94_d655_11eb_ace9_acde48001122row4_col8,#T_09663d94_d655_11eb_ace9_acde48001122row4_col9,#T_09663d94_d655_11eb_ace9_acde48001122row4_col10,#T_09663d94_d655_11eb_ace9_acde48001122row4_col11,#T_09663d94_d655_11eb_ace9_acde48001122row4_col12,#T_09663d94_d655_11eb_ace9_acde48001122row4_col13,#T_09663d94_d655_11eb_ace9_acde48001122row4_col14,#T_09663d94_d655_11eb_ace9_acde48001122row4_col15,#T_09663d94_d655_11eb_ace9_acde48001122row4_col16,#T_09663d94_d655_11eb_ace9_acde48001122row4_col17,#T_09663d94_d655_11eb_ace9_acde48001122row4_col18,#T_09663d94_d655_11eb_ace9_acde48001122row5_col0,#T_09663d94_d655_11eb_ace9_acde48001122row5_col1,#T_09663d94_d655_11eb_ace9_acde48001122row5_col2,#T_09663d94_d655_11eb_ace9_acde48001122row5_col3,#T_09663d94_d655_11eb_ace9_acde48001122row5_col4,#T_09663d94_d655_11eb_ace9_acde48001122row5_col5,#T_09663d94_d655_11eb_ace9_acde48001122row5_col6,#T_09663d94_d655_11eb_ace9_acde48001122row5_col7,#T_09663d94_d655_11eb_ace9_acde48001122row5_col8,#T_09663d94_d655_11eb_ace9_acde48001122row5_col9,#T_09663d94_d655_11eb_ace9_acde48001122row5_col10,#T_09663d94_d655_11eb_ace9_acde48001122row5_col11,#T_09663d94_d655_11eb_ace9_acde48001122row5_col12,#T_09663d94_d655_11eb_ace9_acde48001122row5_col13,#T_09663d94_d655_11eb_ace9_acde48001122row5_col14,#T_09663d94_d655_11eb_ace9_acde48001122row5_col15,#T_09663d94_d655_11eb_ace9_acde48001122row5_col16,#T_09663d94_d655_11eb_ace9_acde48001122row5_col17,#T_09663d94_d655_11eb_ace9_acde48001122row5_col18,#T_09663d94_d655_11eb_ace9_acde48001122row6_col0,#T_09663d94_d655_11eb_ace9_acde48001122row6_col1,#T_09663d94_d655_11eb_ace9_acde48001122row6_col2,#T_09663d94_d655_11eb_ace9_acde48001122row6_col3,#T_09663d94_d655_11eb_ace9_acde48001122row6_col4,#T_09663d94_d655_11eb_ace9_acde48001122row6_col5,#T_09663d94_d655_11eb_ace9_acde48001122row6_col6,#T_09663d94_d655_11eb_ace9_acde48001122row6_col7,#T_09663d94_d655_11eb_ace9_acde48001122row6_col8,#T_09663d94_d655_11eb_ace9_acde48001122row6_col9,#T_09663d94_d655_11eb_ace9_acde48001122row6_col10,#T_09663d94_d655_11eb_ace9_acde48001122row6_col11,#T_09663d94_d655_11eb_ace9_acde48001122row6_col12,#T_09663d94_d655_11eb_ace9_acde48001122row6_col13,#T_09663d94_d655_11eb_ace9_acde48001122row6_col14,#T_09663d94_d655_11eb_ace9_acde48001122row6_col15,#T_09663d94_d655_11eb_ace9_acde48001122row6_col16,#T_09663d94_d655_11eb_ace9_acde48001122row6_col17,#T_09663d94_d655_11eb_ace9_acde48001122row6_col18,#T_09663d94_d655_11eb_ace9_acde48001122row7_col0,#T_09663d94_d655_11eb_ace9_acde48001122row7_col1,#T_09663d94_d655_11eb_ace9_acde48001122row7_col2,#T_09663d94_d655_11eb_ace9_acde48001122row7_col3,#T_09663d94_d655_11eb_ace9_acde48001122row7_col4,#T_09663d94_d655_11eb_ace9_acde48001122row7_col5,#T_09663d94_d655_11eb_ace9_acde48001122row7_col6,#T_09663d94_d655_11eb_ace9_acde48001122row7_col7,#T_09663d94_d655_11eb_ace9_acde48001122row7_col8,#T_09663d94_d655_11eb_ace9_acde48001122row7_col9,#T_09663d94_d655_11eb_ace9_acde48001122row7_col10,#T_09663d94_d655_11eb_ace9_acde48001122row7_col11,#T_09663d94_d655_11eb_ace9_acde48001122row7_col12,#T_09663d94_d655_11eb_ace9_acde48001122row7_col13,#T_09663d94_d655_11eb_ace9_acde48001122row7_col14,#T_09663d94_d655_11eb_ace9_acde48001122row7_col15,#T_09663d94_d655_11eb_ace9_acde48001122row7_col16,#T_09663d94_d655_11eb_ace9_acde48001122row7_col17,#T_09663d94_d655_11eb_ace9_acde48001122row7_col18,#T_09663d94_d655_11eb_ace9_acde48001122row8_col0,#T_09663d94_d655_11eb_ace9_acde48001122row8_col1,#T_09663d94_d655_11eb_ace9_acde48001122row8_col2,#T_09663d94_d655_11eb_ace9_acde48001122row8_col3,#T_09663d94_d655_11eb_ace9_acde48001122row8_col4,#T_09663d94_d655_11eb_ace9_acde48001122row8_col5,#T_09663d94_d655_11eb_ace9_acde48001122row8_col6,#T_09663d94_d655_11eb_ace9_acde48001122row8_col7,#T_09663d94_d655_11eb_ace9_acde48001122row8_col8,#T_09663d94_d655_11eb_ace9_acde48001122row8_col9,#T_09663d94_d655_11eb_ace9_acde48001122row8_col10,#T_09663d94_d655_11eb_ace9_acde48001122row8_col11,#T_09663d94_d655_11eb_ace9_acde48001122row8_col12,#T_09663d94_d655_11eb_ace9_acde48001122row8_col13,#T_09663d94_d655_11eb_ace9_acde48001122row8_col14,#T_09663d94_d655_11eb_ace9_acde48001122row8_col15,#T_09663d94_d655_11eb_ace9_acde48001122row8_col16,#T_09663d94_d655_11eb_ace9_acde48001122row8_col17,#T_09663d94_d655_11eb_ace9_acde48001122row8_col18,#T_09663d94_d655_11eb_ace9_acde48001122row9_col0,#T_09663d94_d655_11eb_ace9_acde48001122row9_col1,#T_09663d94_d655_11eb_ace9_acde48001122row9_col2,#T_09663d94_d655_11eb_ace9_acde48001122row9_col3,#T_09663d94_d655_11eb_ace9_acde48001122row9_col4,#T_09663d94_d655_11eb_ace9_acde48001122row9_col5,#T_09663d94_d655_11eb_ace9_acde48001122row9_col6,#T_09663d94_d655_11eb_ace9_acde48001122row9_col7,#T_09663d94_d655_11eb_ace9_acde48001122row9_col8,#T_09663d94_d655_11eb_ace9_acde48001122row9_col9,#T_09663d94_d655_11eb_ace9_acde48001122row9_col10,#T_09663d94_d655_11eb_ace9_acde48001122row9_col11,#T_09663d94_d655_11eb_ace9_acde48001122row9_col12,#T_09663d94_d655_11eb_ace9_acde48001122row9_col13,#T_09663d94_d655_11eb_ace9_acde48001122row9_col14,#T_09663d94_d655_11eb_ace9_acde48001122row9_col15,#T_09663d94_d655_11eb_ace9_acde48001122row9_col16,#T_09663d94_d655_11eb_ace9_acde48001122row9_col17,#T_09663d94_d655_11eb_ace9_acde48001122row9_col18,#T_09663d94_d655_11eb_ace9_acde48001122row10_col0,#T_09663d94_d655_11eb_ace9_acde48001122row10_col1,#T_09663d94_d655_11eb_ace9_acde48001122row10_col2,#T_09663d94_d655_11eb_ace9_acde48001122row10_col3,#T_09663d94_d655_11eb_ace9_acde48001122row10_col4,#T_09663d94_d655_11eb_ace9_acde48001122row10_col5,#T_09663d94_d655_11eb_ace9_acde48001122row10_col6,#T_09663d94_d655_11eb_ace9_acde48001122row10_col7,#T_09663d94_d655_11eb_ace9_acde48001122row10_col8,#T_09663d94_d655_11eb_ace9_acde48001122row10_col9,#T_09663d94_d655_11eb_ace9_acde48001122row10_col10,#T_09663d94_d655_11eb_ace9_acde48001122row10_col11,#T_09663d94_d655_11eb_ace9_acde48001122row10_col12,#T_09663d94_d655_11eb_ace9_acde48001122row10_col13,#T_09663d94_d655_11eb_ace9_acde48001122row10_col14,#T_09663d94_d655_11eb_ace9_acde48001122row10_col15,#T_09663d94_d655_11eb_ace9_acde48001122row10_col16,#T_09663d94_d655_11eb_ace9_acde48001122row10_col17,#T_09663d94_d655_11eb_ace9_acde48001122row10_col18,#T_09663d94_d655_11eb_ace9_acde48001122row11_col0,#T_09663d94_d655_11eb_ace9_acde48001122row11_col1,#T_09663d94_d655_11eb_ace9_acde48001122row11_col2,#T_09663d94_d655_11eb_ace9_acde48001122row11_col3,#T_09663d94_d655_11eb_ace9_acde48001122row11_col4,#T_09663d94_d655_11eb_ace9_acde48001122row11_col5,#T_09663d94_d655_11eb_ace9_acde48001122row11_col6,#T_09663d94_d655_11eb_ace9_acde48001122row11_col7,#T_09663d94_d655_11eb_ace9_acde48001122row11_col8,#T_09663d94_d655_11eb_ace9_acde48001122row11_col9,#T_09663d94_d655_11eb_ace9_acde48001122row11_col10,#T_09663d94_d655_11eb_ace9_acde48001122row11_col11,#T_09663d94_d655_11eb_ace9_acde48001122row11_col12,#T_09663d94_d655_11eb_ace9_acde48001122row11_col13,#T_09663d94_d655_11eb_ace9_acde48001122row11_col14,#T_09663d94_d655_11eb_ace9_acde48001122row11_col15,#T_09663d94_d655_11eb_ace9_acde48001122row11_col16,#T_09663d94_d655_11eb_ace9_acde48001122row11_col17,#T_09663d94_d655_11eb_ace9_acde48001122row11_col18,#T_09663d94_d655_11eb_ace9_acde48001122row12_col0,#T_09663d94_d655_11eb_ace9_acde48001122row12_col1,#T_09663d94_d655_11eb_ace9_acde48001122row12_col2,#T_09663d94_d655_11eb_ace9_acde48001122row12_col3,#T_09663d94_d655_11eb_ace9_acde48001122row12_col4,#T_09663d94_d655_11eb_ace9_acde48001122row12_col5,#T_09663d94_d655_11eb_ace9_acde48001122row12_col6,#T_09663d94_d655_11eb_ace9_acde48001122row12_col7,#T_09663d94_d655_11eb_ace9_acde48001122row12_col8,#T_09663d94_d655_11eb_ace9_acde48001122row12_col9,#T_09663d94_d655_11eb_ace9_acde48001122row12_col10,#T_09663d94_d655_11eb_ace9_acde48001122row12_col11,#T_09663d94_d655_11eb_ace9_acde48001122row12_col12,#T_09663d94_d655_11eb_ace9_acde48001122row12_col13,#T_09663d94_d655_11eb_ace9_acde48001122row12_col14,#T_09663d94_d655_11eb_ace9_acde48001122row12_col15,#T_09663d94_d655_11eb_ace9_acde48001122row12_col16,#T_09663d94_d655_11eb_ace9_acde48001122row12_col17,#T_09663d94_d655_11eb_ace9_acde48001122row12_col18,#T_09663d94_d655_11eb_ace9_acde48001122row13_col0,#T_09663d94_d655_11eb_ace9_acde48001122row13_col1,#T_09663d94_d655_11eb_ace9_acde48001122row13_col2,#T_09663d94_d655_11eb_ace9_acde48001122row13_col3,#T_09663d94_d655_11eb_ace9_acde48001122row13_col4,#T_09663d94_d655_11eb_ace9_acde48001122row13_col5,#T_09663d94_d655_11eb_ace9_acde48001122row13_col6,#T_09663d94_d655_11eb_ace9_acde48001122row13_col7,#T_09663d94_d655_11eb_ace9_acde48001122row13_col8,#T_09663d94_d655_11eb_ace9_acde48001122row13_col9,#T_09663d94_d655_11eb_ace9_acde48001122row13_col10,#T_09663d94_d655_11eb_ace9_acde48001122row13_col11,#T_09663d94_d655_11eb_ace9_acde48001122row13_col12,#T_09663d94_d655_11eb_ace9_acde48001122row13_col13,#T_09663d94_d655_11eb_ace9_acde48001122row13_col14,#T_09663d94_d655_11eb_ace9_acde48001122row13_col15,#T_09663d94_d655_11eb_ace9_acde48001122row13_col16,#T_09663d94_d655_11eb_ace9_acde48001122row13_col17,#T_09663d94_d655_11eb_ace9_acde48001122row13_col18,#T_09663d94_d655_11eb_ace9_acde48001122row14_col0,#T_09663d94_d655_11eb_ace9_acde48001122row14_col1,#T_09663d94_d655_11eb_ace9_acde48001122row14_col2,#T_09663d94_d655_11eb_ace9_acde48001122row14_col3,#T_09663d94_d655_11eb_ace9_acde48001122row14_col4,#T_09663d94_d655_11eb_ace9_acde48001122row14_col5,#T_09663d94_d655_11eb_ace9_acde48001122row14_col6,#T_09663d94_d655_11eb_ace9_acde48001122row14_col7,#T_09663d94_d655_11eb_ace9_acde48001122row14_col8,#T_09663d94_d655_11eb_ace9_acde48001122row14_col9,#T_09663d94_d655_11eb_ace9_acde48001122row14_col10,#T_09663d94_d655_11eb_ace9_acde48001122row14_col11,#T_09663d94_d655_11eb_ace9_acde48001122row14_col12,#T_09663d94_d655_11eb_ace9_acde48001122row14_col13,#T_09663d94_d655_11eb_ace9_acde48001122row14_col14,#T_09663d94_d655_11eb_ace9_acde48001122row14_col15,#T_09663d94_d655_11eb_ace9_acde48001122row14_col16,#T_09663d94_d655_11eb_ace9_acde48001122row14_col17,#T_09663d94_d655_11eb_ace9_acde48001122row14_col18,#T_09663d94_d655_11eb_ace9_acde48001122row15_col0,#T_09663d94_d655_11eb_ace9_acde48001122row15_col1,#T_09663d94_d655_11eb_ace9_acde48001122row15_col2,#T_09663d94_d655_11eb_ace9_acde48001122row15_col3,#T_09663d94_d655_11eb_ace9_acde48001122row15_col4,#T_09663d94_d655_11eb_ace9_acde48001122row15_col5,#T_09663d94_d655_11eb_ace9_acde48001122row15_col6,#T_09663d94_d655_11eb_ace9_acde48001122row15_col7,#T_09663d94_d655_11eb_ace9_acde48001122row15_col8,#T_09663d94_d655_11eb_ace9_acde48001122row15_col9,#T_09663d94_d655_11eb_ace9_acde48001122row15_col10,#T_09663d94_d655_11eb_ace9_acde48001122row15_col11,#T_09663d94_d655_11eb_ace9_acde48001122row15_col12,#T_09663d94_d655_11eb_ace9_acde48001122row15_col13,#T_09663d94_d655_11eb_ace9_acde48001122row15_col14,#T_09663d94_d655_11eb_ace9_acde48001122row15_col15,#T_09663d94_d655_11eb_ace9_acde48001122row15_col16,#T_09663d94_d655_11eb_ace9_acde48001122row15_col17,#T_09663d94_d655_11eb_ace9_acde48001122row15_col18,#T_09663d94_d655_11eb_ace9_acde48001122row16_col0,#T_09663d94_d655_11eb_ace9_acde48001122row16_col1,#T_09663d94_d655_11eb_ace9_acde48001122row16_col2,#T_09663d94_d655_11eb_ace9_acde48001122row16_col3,#T_09663d94_d655_11eb_ace9_acde48001122row16_col4,#T_09663d94_d655_11eb_ace9_acde48001122row16_col5,#T_09663d94_d655_11eb_ace9_acde48001122row16_col6,#T_09663d94_d655_11eb_ace9_acde48001122row16_col7,#T_09663d94_d655_11eb_ace9_acde48001122row16_col8,#T_09663d94_d655_11eb_ace9_acde48001122row16_col9,#T_09663d94_d655_11eb_ace9_acde48001122row16_col10,#T_09663d94_d655_11eb_ace9_acde48001122row16_col11,#T_09663d94_d655_11eb_ace9_acde48001122row16_col12,#T_09663d94_d655_11eb_ace9_acde48001122row16_col13,#T_09663d94_d655_11eb_ace9_acde48001122row16_col14,#T_09663d94_d655_11eb_ace9_acde48001122row16_col15,#T_09663d94_d655_11eb_ace9_acde48001122row16_col16,#T_09663d94_d655_11eb_ace9_acde48001122row16_col17,#T_09663d94_d655_11eb_ace9_acde48001122row16_col18,#T_09663d94_d655_11eb_ace9_acde48001122row17_col0,#T_09663d94_d655_11eb_ace9_acde48001122row17_col1,#T_09663d94_d655_11eb_ace9_acde48001122row17_col2,#T_09663d94_d655_11eb_ace9_acde48001122row17_col3,#T_09663d94_d655_11eb_ace9_acde48001122row17_col4,#T_09663d94_d655_11eb_ace9_acde48001122row17_col5,#T_09663d94_d655_11eb_ace9_acde48001122row17_col6,#T_09663d94_d655_11eb_ace9_acde48001122row17_col7,#T_09663d94_d655_11eb_ace9_acde48001122row17_col8,#T_09663d94_d655_11eb_ace9_acde48001122row17_col9,#T_09663d94_d655_11eb_ace9_acde48001122row17_col10,#T_09663d94_d655_11eb_ace9_acde48001122row17_col11,#T_09663d94_d655_11eb_ace9_acde48001122row17_col12,#T_09663d94_d655_11eb_ace9_acde48001122row17_col13,#T_09663d94_d655_11eb_ace9_acde48001122row17_col14,#T_09663d94_d655_11eb_ace9_acde48001122row17_col15,#T_09663d94_d655_11eb_ace9_acde48001122row17_col16,#T_09663d94_d655_11eb_ace9_acde48001122row17_col17,#T_09663d94_d655_11eb_ace9_acde48001122row17_col18,#T_09663d94_d655_11eb_ace9_acde48001122row18_col0,#T_09663d94_d655_11eb_ace9_acde48001122row18_col1,#T_09663d94_d655_11eb_ace9_acde48001122row18_col2,#T_09663d94_d655_11eb_ace9_acde48001122row18_col3,#T_09663d94_d655_11eb_ace9_acde48001122row18_col4,#T_09663d94_d655_11eb_ace9_acde48001122row18_col5,#T_09663d94_d655_11eb_ace9_acde48001122row18_col6,#T_09663d94_d655_11eb_ace9_acde48001122row18_col7,#T_09663d94_d655_11eb_ace9_acde48001122row18_col8,#T_09663d94_d655_11eb_ace9_acde48001122row18_col9,#T_09663d94_d655_11eb_ace9_acde48001122row18_col10,#T_09663d94_d655_11eb_ace9_acde48001122row18_col11,#T_09663d94_d655_11eb_ace9_acde48001122row18_col12,#T_09663d94_d655_11eb_ace9_acde48001122row18_col13,#T_09663d94_d655_11eb_ace9_acde48001122row18_col14,#T_09663d94_d655_11eb_ace9_acde48001122row18_col15,#T_09663d94_d655_11eb_ace9_acde48001122row18_col16,#T_09663d94_d655_11eb_ace9_acde48001122row18_col17,#T_09663d94_d655_11eb_ace9_acde48001122row18_col18{
            background-color:  default;
        }</style>
<table id="T_09663d94_d655_11eb_ace9_acde48001122" ><thead>    <tr>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >rotten_aud_score</th>        <th class="col_heading level0 col1" >Action</th>        <th class="col_heading level0 col2" >Adventure</th>        <th class="col_heading level0 col3" >Animation</th>        <th class="col_heading level0 col4" >Comedy</th>        <th class="col_heading level0 col5" >Crime</th>        <th class="col_heading level0 col6" >Documentary</th>        <th class="col_heading level0 col7" >Drama</th>        <th class="col_heading level0 col8" >Family</th>        <th class="col_heading level0 col9" >Fantasy</th>        <th class="col_heading level0 col10" >History</th>        <th class="col_heading level0 col11" >Horror</th>        <th class="col_heading level0 col12" >Music</th>        <th class="col_heading level0 col13" >Mystery</th>        <th class="col_heading level0 col14" >Romance</th>        <th class="col_heading level0 col15" >Science Fiction</th>        <th class="col_heading level0 col16" >Thriller</th>        <th class="col_heading level0 col17" >War</th>        <th class="col_heading level0 col18" >Western</th>    </tr></thead><tbody>
                <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row0" class="row_heading level0 row0" >rotten_aud_score</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col0" class="data row0 col0" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col1" class="data row0 col1" >-0.072546</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col2" class="data row0 col2" >-0.003180</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col3" class="data row0 col3" >0.070878</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col4" class="data row0 col4" >-0.086904</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col5" class="data row0 col5" >0.029406</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col6" class="data row0 col6" >0.068851</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col7" class="data row0 col7" >0.287235</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col8" class="data row0 col8" >-0.014623</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col9" class="data row0 col9" >-0.021130</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col10" class="data row0 col10" >0.117586</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col11" class="data row0 col11" >-0.214965</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col12" class="data row0 col12" >0.086443</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col13" class="data row0 col13" >-0.062718</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col14" class="data row0 col14" >0.045913</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col15" class="data row0 col15" >-0.065541</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col16" class="data row0 col16" >-0.134282</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col17" class="data row0 col17" >0.050437</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row0_col18" class="data row0 col18" >0.020149</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row1" class="row_heading level0 row1" >Action</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col0" class="data row1 col0" >-0.072546</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col1" class="data row1 col1" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col2" class="data row1 col2" >0.303602</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col3" class="data row1 col3" >-0.071960</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col4" class="data row1 col4" >-0.212755</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col5" class="data row1 col5" >0.157537</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col6" class="data row1 col6" >-0.018370</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col7" class="data row1 col7" >-0.269893</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col8" class="data row1 col8" >-0.129075</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col9" class="data row1 col9" >0.078181</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col10" class="data row1 col10" >-0.004672</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col11" class="data row1 col11" >-0.123086</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col12" class="data row1 col12" >-0.103309</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col13" class="data row1 col13" >-0.072404</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col14" class="data row1 col14" >-0.250201</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col15" class="data row1 col15" >0.288305</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col16" class="data row1 col16" >0.201476</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col17" class="data row1 col17" >0.073348</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row1_col18" class="data row1 col18" >0.026218</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row2" class="row_heading level0 row2" >Adventure</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col0" class="data row2 col0" >-0.003180</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col1" class="data row2 col1" >0.303602</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col2" class="data row2 col2" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col3" class="data row2 col3" >0.283258</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col4" class="data row2 col4" >-0.021105</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col5" class="data row2 col5" >-0.172734</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col6" class="data row2 col6" >-0.036630</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col7" class="data row2 col7" >-0.268219</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col8" class="data row2 col8" >0.331412</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col9" class="data row2 col9" >0.301601</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col10" class="data row2 col10" >-0.033882</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col11" class="data row2 col11" >-0.162653</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col12" class="data row2 col12" >-0.070020</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col13" class="data row2 col13" >-0.087142</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col14" class="data row2 col14" >-0.147735</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col15" class="data row2 col15" >0.216112</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col16" class="data row2 col16" >-0.159227</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col17" class="data row2 col17" >-0.007205</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row2_col18" class="data row2 col18" >0.068038</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row3" class="row_heading level0 row3" >Animation</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col0" class="data row3 col0" >0.070878</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col1" class="data row3 col1" >-0.071960</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col2" class="data row3 col2" >0.283258</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col3" class="data row3 col3" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col4" class="data row3 col4" >0.207957</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col5" class="data row3 col5" >-0.122672</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col6" class="data row3 col6" >0.003419</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col7" class="data row3 col7" >-0.214808</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col8" class="data row3 col8" >0.629254</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col9" class="data row3 col9" >0.134881</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col10" class="data row3 col10" >-0.063561</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col11" class="data row3 col11" >-0.106556</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col12" class="data row3 col12" >0.010922</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col13" class="data row3 col13" >-0.079141</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col14" class="data row3 col14" >-0.107968</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col15" class="data row3 col15" >-0.023080</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col16" class="data row3 col16" >-0.177481</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col17" class="data row3 col17" >-0.030052</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row3_col18" class="data row3 col18" >-0.000186</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row4" class="row_heading level0 row4" >Comedy</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col0" class="data row4 col0" >-0.086904</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col1" class="data row4 col1" >-0.212755</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col2" class="data row4 col2" >-0.021105</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col3" class="data row4 col3" >0.207957</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col4" class="data row4 col4" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col5" class="data row4 col5" >-0.114990</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col6" class="data row4 col6" >-0.013026</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col7" class="data row4 col7" >-0.230712</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col8" class="data row4 col8" >0.289091</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col9" class="data row4 col9" >0.015613</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col10" class="data row4 col10" >-0.137809</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col11" class="data row4 col11" >-0.202279</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col12" class="data row4 col12" >0.043011</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col13" class="data row4 col13" >-0.184602</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col14" class="data row4 col14" >0.206415</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col15" class="data row4 col15" >-0.187696</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col16" class="data row4 col16" >-0.419949</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col17" class="data row4 col17" >-0.102004</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row4_col18" class="data row4 col18" >-0.029177</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row5" class="row_heading level0 row5" >Crime</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col0" class="data row5 col0" >0.029406</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col1" class="data row5 col1" >0.157537</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col2" class="data row5 col2" >-0.172734</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col3" class="data row5 col3" >-0.122672</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col4" class="data row5 col4" >-0.114990</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col5" class="data row5 col5" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col6" class="data row5 col6" >-0.012899</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col7" class="data row5 col7" >0.058041</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col8" class="data row5 col8" >-0.161846</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col9" class="data row5 col9" >-0.147531</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col10" class="data row5 col10" >-0.026207</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col11" class="data row5 col11" >-0.091651</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col12" class="data row5 col12" >-0.064615</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col13" class="data row5 col13" >0.085001</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col14" class="data row5 col14" >-0.164513</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col15" class="data row5 col15" >-0.142658</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col16" class="data row5 col16" >0.299315</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col17" class="data row5 col17" >-0.060268</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row5_col18" class="data row5 col18" >0.019796</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row6" class="row_heading level0 row6" >Documentary</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col0" class="data row6 col0" >0.068851</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col1" class="data row6 col1" >-0.018370</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col2" class="data row6 col2" >-0.036630</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col3" class="data row6 col3" >0.003419</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col4" class="data row6 col4" >-0.013026</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col5" class="data row6 col5" >-0.012899</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col6" class="data row6 col6" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col7" class="data row6 col7" >-0.020897</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col8" class="data row6 col8" >-0.008431</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col9" class="data row6 col9" >-0.025899</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col10" class="data row6 col10" >-0.014841</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col11" class="data row6 col11" >-0.024880</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col12" class="data row6 col12" >-0.011066</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col13" class="data row6 col13" >-0.022147</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col14" class="data row6 col14" >-0.030080</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col15" class="data row6 col15" >-0.026615</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col16" class="data row6 col16" >-0.044589</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col17" class="data row6 col17" >0.026021</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row6_col18" class="data row6 col18" >-0.007054</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row7" class="row_heading level0 row7" >Drama</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col0" class="data row7 col0" >0.287235</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col1" class="data row7 col1" >-0.269893</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col2" class="data row7 col2" >-0.268219</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col3" class="data row7 col3" >-0.214808</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col4" class="data row7 col4" >-0.230712</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col5" class="data row7 col5" >0.058041</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col6" class="data row7 col6" >-0.020897</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col7" class="data row7 col7" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col8" class="data row7 col8" >-0.238949</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col9" class="data row7 col9" >-0.179172</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col10" class="data row7 col10" >0.223002</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col11" class="data row7 col11" >-0.174504</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col12" class="data row7 col12" >0.106082</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col13" class="data row7 col13" >0.023872</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col14" class="data row7 col14" >0.192151</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col15" class="data row7 col15" >-0.198651</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col16" class="data row7 col16" >-0.004488</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col17" class="data row7 col17" >0.119768</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row7_col18" class="data row7 col18" >0.007603</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row8" class="row_heading level0 row8" >Family</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col0" class="data row8 col0" >-0.014623</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col1" class="data row8 col1" >-0.129075</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col2" class="data row8 col2" >0.331412</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col3" class="data row8 col3" >0.629254</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col4" class="data row8 col4" >0.289091</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col5" class="data row8 col5" >-0.161846</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col6" class="data row8 col6" >-0.008431</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col7" class="data row8 col7" >-0.238949</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col8" class="data row8 col8" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col9" class="data row8 col9" >0.272816</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col10" class="data row8 col10" >-0.086053</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col11" class="data row8 col11" >-0.140503</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col12" class="data row8 col12" >0.035179</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col13" class="data row8 col13" >-0.107828</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col14" class="data row8 col14" >-0.085857</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col15" class="data row8 col15" >-0.057831</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col16" class="data row8 col16" >-0.253238</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col17" class="data row8 col17" >-0.058811</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row8_col18" class="data row8 col18" >-0.017294</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row9" class="row_heading level0 row9" >Fantasy</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col0" class="data row9 col0" >-0.021130</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col1" class="data row9 col1" >0.078181</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col2" class="data row9 col2" >0.301601</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col3" class="data row9 col3" >0.134881</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col4" class="data row9 col4" >0.015613</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col5" class="data row9 col5" >-0.147531</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col6" class="data row9 col6" >-0.025899</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col7" class="data row9 col7" >-0.179172</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col8" class="data row9 col8" >0.272816</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col9" class="data row9 col9" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col10" class="data row9 col10" >-0.084037</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col11" class="data row9 col11" >-0.045264</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col12" class="data row9 col12" >-0.008224</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col13" class="data row9 col13" >-0.066744</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col14" class="data row9 col14" >0.006572</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col15" class="data row9 col15" >-0.023417</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col16" class="data row9 col16" >-0.155396</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col17" class="data row9 col17" >-0.042033</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row9_col18" class="data row9 col18" >-0.027931</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row10" class="row_heading level0 row10" >History</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col0" class="data row10 col0" >0.117586</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col1" class="data row10 col1" >-0.004672</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col2" class="data row10 col2" >-0.033882</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col3" class="data row10 col3" >-0.063561</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col4" class="data row10 col4" >-0.137809</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col5" class="data row10 col5" >-0.026207</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col6" class="data row10 col6" >-0.014841</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col7" class="data row10 col7" >0.223002</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col8" class="data row10 col8" >-0.086053</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col9" class="data row10 col9" >-0.084037</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col10" class="data row10 col10" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col11" class="data row10 col11" >-0.074629</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col12" class="data row10 col12" >-0.011096</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col13" class="data row10 col13" >-0.045125</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col14" class="data row10 col14" >-0.023062</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col15" class="data row10 col15" >-0.086361</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col16" class="data row10 col16" >-0.045734</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col17" class="data row10 col17" >0.300054</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row10_col18" class="data row10 col18" >-0.022888</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row11" class="row_heading level0 row11" >Horror</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col0" class="data row11 col0" >-0.214965</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col1" class="data row11 col1" >-0.123086</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col2" class="data row11 col2" >-0.162653</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col3" class="data row11 col3" >-0.106556</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col4" class="data row11 col4" >-0.202279</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col5" class="data row11 col5" >-0.091651</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col6" class="data row11 col6" >-0.024880</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col7" class="data row11 col7" >-0.174504</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col8" class="data row11 col8" >-0.140503</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col9" class="data row11 col9" >-0.045264</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col10" class="data row11 col10" >-0.074629</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col11" class="data row11 col11" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col12" class="data row11 col12" >-0.060196</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col13" class="data row11 col13" >0.194811</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col14" class="data row11 col14" >-0.149862</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col15" class="data row11 col15" >0.023906</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col16" class="data row11 col16" >0.241111</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col17" class="data row11 col17" >-0.046572</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row11_col18" class="data row11 col18" >-0.038371</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row12" class="row_heading level0 row12" >Music</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col0" class="data row12 col0" >0.086443</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col1" class="data row12 col1" >-0.103309</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col2" class="data row12 col2" >-0.070020</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col3" class="data row12 col3" >0.010922</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col4" class="data row12 col4" >0.043011</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col5" class="data row12 col5" >-0.064615</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col6" class="data row12 col6" >-0.011066</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col7" class="data row12 col7" >0.106082</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col8" class="data row12 col8" >0.035179</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col9" class="data row12 col9" >-0.008224</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col10" class="data row12 col10" >-0.011096</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col11" class="data row12 col11" >-0.060196</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col12" class="data row12 col12" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col13" class="data row12 col13" >-0.053585</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col14" class="data row12 col14" >0.116083</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col15" class="data row12 col15" >-0.064395</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col16" class="data row12 col16" >-0.107881</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col17" class="data row12 col17" >-0.027635</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row12_col18" class="data row12 col18" >-0.017067</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row13" class="row_heading level0 row13" >Mystery</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col0" class="data row13 col0" >-0.062718</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col1" class="data row13 col1" >-0.072404</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col2" class="data row13 col2" >-0.087142</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col3" class="data row13 col3" >-0.079141</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col4" class="data row13 col4" >-0.184602</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col5" class="data row13 col5" >0.085001</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col6" class="data row13 col6" >-0.022147</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col7" class="data row13 col7" >0.023872</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col8" class="data row13 col8" >-0.107828</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col9" class="data row13 col9" >-0.066744</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col10" class="data row13 col10" >-0.045125</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col11" class="data row13 col11" >0.194811</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col12" class="data row13 col12" >-0.053585</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col13" class="data row13 col13" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col14" class="data row13 col14" >-0.107962</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col15" class="data row13 col15" >-0.009778</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col16" class="data row13 col16" >0.262211</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col17" class="data row13 col17" >-0.046784</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row13_col18" class="data row13 col18" >-0.020592</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row14" class="row_heading level0 row14" >Romance</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col0" class="data row14 col0" >0.045913</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col1" class="data row14 col1" >-0.250201</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col2" class="data row14 col2" >-0.147735</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col3" class="data row14 col3" >-0.107968</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col4" class="data row14 col4" >0.206415</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col5" class="data row14 col5" >-0.164513</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col6" class="data row14 col6" >-0.030080</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col7" class="data row14 col7" >0.192151</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col8" class="data row14 col8" >-0.085857</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col9" class="data row14 col9" >0.006572</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col10" class="data row14 col10" >-0.023062</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col11" class="data row14 col11" >-0.149862</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col12" class="data row14 col12" >0.116083</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col13" class="data row14 col13" >-0.107962</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col14" class="data row14 col14" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col15" class="data row14 col15" >-0.125967</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col16" class="data row14 col16" >-0.235021</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col17" class="data row14 col17" >-0.034384</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row14_col18" class="data row14 col18" >-0.046390</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row15" class="row_heading level0 row15" >Science Fiction</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col0" class="data row15 col0" >-0.065541</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col1" class="data row15 col1" >0.288305</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col2" class="data row15 col2" >0.216112</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col3" class="data row15 col3" >-0.023080</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col4" class="data row15 col4" >-0.187696</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col5" class="data row15 col5" >-0.142658</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col6" class="data row15 col6" >-0.026615</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col7" class="data row15 col7" >-0.198651</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col8" class="data row15 col8" >-0.057831</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col9" class="data row15 col9" >-0.023417</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col10" class="data row15 col10" >-0.086361</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col11" class="data row15 col11" >0.023906</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col12" class="data row15 col12" >-0.064395</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col13" class="data row15 col13" >-0.009778</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col14" class="data row15 col14" >-0.125967</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col15" class="data row15 col15" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col16" class="data row15 col16" >0.076213</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col17" class="data row15 col17" >-0.036876</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row15_col18" class="data row15 col18" >-0.029275</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row16" class="row_heading level0 row16" >Thriller</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col0" class="data row16 col0" >-0.134282</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col1" class="data row16 col1" >0.201476</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col2" class="data row16 col2" >-0.159227</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col3" class="data row16 col3" >-0.177481</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col4" class="data row16 col4" >-0.419949</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col5" class="data row16 col5" >0.299315</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col6" class="data row16 col6" >-0.044589</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col7" class="data row16 col7" >-0.004488</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col8" class="data row16 col8" >-0.253238</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col9" class="data row16 col9" >-0.155396</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col10" class="data row16 col10" >-0.045734</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col11" class="data row16 col11" >0.241111</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col12" class="data row16 col12" >-0.107881</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col13" class="data row16 col13" >0.262211</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col14" class="data row16 col14" >-0.235021</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col15" class="data row16 col15" >0.076213</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col16" class="data row16 col16" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col17" class="data row16 col17" >-0.029070</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row16_col18" class="data row16 col18" >-0.033848</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row17" class="row_heading level0 row17" >War</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col0" class="data row17 col0" >0.050437</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col1" class="data row17 col1" >0.073348</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col2" class="data row17 col2" >-0.007205</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col3" class="data row17 col3" >-0.030052</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col4" class="data row17 col4" >-0.102004</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col5" class="data row17 col5" >-0.060268</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col6" class="data row17 col6" >0.026021</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col7" class="data row17 col7" >0.119768</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col8" class="data row17 col8" >-0.058811</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col9" class="data row17 col9" >-0.042033</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col10" class="data row17 col10" >0.300054</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col11" class="data row17 col11" >-0.046572</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col12" class="data row17 col12" >-0.027635</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col13" class="data row17 col13" >-0.046784</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col14" class="data row17 col14" >-0.034384</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col15" class="data row17 col15" >-0.036876</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col16" class="data row17 col16" >-0.029070</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col17" class="data row17 col17" >1.000000</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row17_col18" class="data row17 col18" >-0.017615</td>
            </tr>
            <tr>
                        <th id="T_09663d94_d655_11eb_ace9_acde48001122level0_row18" class="row_heading level0 row18" >Western</th>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col0" class="data row18 col0" >0.020149</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col1" class="data row18 col1" >0.026218</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col2" class="data row18 col2" >0.068038</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col3" class="data row18 col3" >-0.000186</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col4" class="data row18 col4" >-0.029177</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col5" class="data row18 col5" >0.019796</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col6" class="data row18 col6" >-0.007054</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col7" class="data row18 col7" >0.007603</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col8" class="data row18 col8" >-0.017294</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col9" class="data row18 col9" >-0.027931</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col10" class="data row18 col10" >-0.022888</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col11" class="data row18 col11" >-0.038371</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col12" class="data row18 col12" >-0.017067</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col13" class="data row18 col13" >-0.020592</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col14" class="data row18 col14" >-0.046390</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col15" class="data row18 col15" >-0.029275</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col16" class="data row18 col16" >-0.033848</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col17" class="data row18 col17" >-0.017615</td>
                        <td id="T_09663d94_d655_11eb_ace9_acde48001122row18_col18" class="data row18 col18" >1.000000</td>
            </tr>
    </tbody></table>

<div class="highlight"><pre><span></span><code><span class="n">res_dict</span><span class="p">,</span> <span class="n">assessment</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">MultipleRegression</span><span class="p">(</span><span class="n">x_names</span><span class="o">=</span><span class="n">x_names</span><span class="p">,</span> <span class="n">y_name</span><span class="o">=</span><span class="n">y_name</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">movie_gen_df</span><span class="p">,</span> <span class="n">assessment</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">t_test_c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t_test_option</span><span class="o">=</span><span class="s1">&#39;two-tail&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:       rotten_aud_score   R-squared:                       0.158
Model:                            OLS   Adj. R-squared:                  0.151
Method:                 Least Squares   F-statistic:                     24.90
Date:                Sat, 26 Jun 2021   Prob (F-statistic):           2.62e-76
Time:                        16:03:48   Log-Likelihood:                -10306.
No. Observations:                2416   AIC:                         2.065e+04
Df Residuals:                    2397   BIC:                         2.076e+04
Df Model:                          18                                         
Covariance Type:            nonrobust                                         
===================================================================================
                      coef    std err          t      P&gt;|t|      [0.025      0.975]
-----------------------------------------------------------------------------------
const              62.7840      1.139     55.125      0.000      60.551      65.017
Action             -1.6337      0.963     -1.697      0.090      -3.521       0.254
Adventure           0.6033      1.045      0.577      0.564      -1.446       2.653
Animation          10.7059      1.721      6.220      0.000       7.331      14.081
Comedy             -5.2774      0.943     -5.594      0.000      -7.127      -3.428
Crime               2.1580      1.088      1.983      0.047       0.024       4.292
Documentary        16.8908      5.273      3.203      0.001       6.550      27.231
Drama               8.4950      0.901      9.432      0.000       6.729      10.261
Family             -4.5443      1.471     -3.088      0.002      -7.430      -1.659
Fantasy             0.1508      1.163      0.130      0.897      -2.130       2.432
History             3.2958      1.829      1.802      0.072      -0.291       6.883
Horror             -9.0302      1.273     -7.091      0.000     -11.527      -6.533
Music               5.4705      2.255      2.425      0.015       1.048       9.893
Mystery            -1.6795      1.266     -1.327      0.185      -4.161       0.802
Romance            -1.2162      1.069     -1.137      0.255      -3.313       0.880
Science Fiction    -0.8083      1.160     -0.697      0.486      -3.083       1.466
Thriller           -5.5874      0.956     -5.845      0.000      -7.462      -3.713
War                -1.1270      2.281     -0.494      0.621      -5.601       3.347
Western             0.3033      3.448      0.088      0.930      -6.457       7.064
==============================================================================
Omnibus:                       78.740   Durbin-Watson:                   1.893
Prob(Omnibus):                  0.000   Jarque-Bera (JB):               46.942
Skew:                          -0.192   Prob(JB):                     6.41e-11
Kurtosis:                       2.436   Cond. No.                         19.7
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.

======= Multiple Regression Results =======
Dep. Variable: rotten_aud_score
No. of Observations (n): 2416
No. of Ind. Vairable (k): 18
Mean of Dep. Variable: 61.7964
Standard Deviation of Dep. Variable: 18.7775
Standard Error: 17.2999 (ȳ = 61.7964)
SSR: 717392.3126

R-square: 0.1575
Adjusted R-square: 0.1512
Difference (≤ 0.06 True): 0.006326557430486268

Estimated model: ŷ = 62.7840 + -1.6337 x1 + 0.6033 x2 + 10.7059 x3 + -5.2774 x4 + 2.1580 x5 + 16.8908 x6 + 8.4950 x7 + -4.5443 x8 + 0.1508 x9 + 3.2958 x10 + -9.0302 x11 + 5.4705 x12 + -1.6795 x13 + -1.2162 x14 + -0.8083 x15 + -5.5874 x16 + -1.1270 x17 + 0.3033 x18

&lt;F-test&gt;
F(observed value):  24.8972
p-value:  0.0000 (Overwhelming Evidence)
Reject H_0 (The model is valid: at least one beta_i ≠ 0) → True
</code></pre></div>
<p>Romance 和 War 在這裏發生了多元共線性的問題，所以我們將它們去除。</p>
<div class="highlight"><pre><span></span><code><span class="n">x_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;Romance&#39;</span><span class="p">)</span>
<span class="n">x_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;War&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">res_dict</span><span class="p">,</span> <span class="n">assessment</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">MultipleRegression</span><span class="p">(</span><span class="n">x_names</span><span class="o">=</span><span class="n">x_names</span><span class="p">,</span> 
                                                        <span class="n">y_name</span><span class="o">=</span><span class="n">y_name</span><span class="p">,</span> 
                                                        <span class="n">df</span><span class="o">=</span><span class="n">movie_gen_df</span><span class="p">,</span> 
                                                        <span class="n">assessment</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
                                                        <span class="n">t_test_c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
                                                        <span class="n">t_test_option</span><span class="o">=</span><span class="s1">&#39;two-tail&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:       rotten_aud_score   R-squared:                       0.157
Model:                            OLS   Adj. R-squared:                  0.151
Method:                 Least Squares   F-statistic:                     27.92
Date:                Sat, 26 Jun 2021   Prob (F-statistic):           1.92e-77
Time:                        16:03:48   Log-Likelihood:                -10307.
No. Observations:                2416   AIC:                         2.065e+04
Df Residuals:                    2399   BIC:                         2.075e+04
Df Model:                          16                                         
Covariance Type:            nonrobust                                         
===================================================================================
                      coef    std err          t      P&gt;|t|      [0.025      0.975]
-----------------------------------------------------------------------------------
const              62.4301      1.101     56.728      0.000      60.272      64.588
Action             -1.5223      0.948     -1.606      0.108      -3.381       0.337
Adventure           0.6919      1.042      0.664      0.507      -1.352       2.736
Animation          10.8297      1.716      6.309      0.000       7.464      14.196
Comedy             -5.3694      0.936     -5.737      0.000      -7.205      -3.534
Crime               2.3880      1.071      2.229      0.026       0.287       4.489
Documentary        17.1275      5.264      3.253      0.001       6.804      27.451
Drama               8.3806      0.896      9.357      0.000       6.624      10.137
Family             -4.3403      1.461     -2.971      0.003      -7.205      -1.476
Fantasy             0.1014      1.161      0.087      0.930      -2.175       2.378
History             3.2204      1.764      1.826      0.068      -0.239       6.679
Horror             -8.8169      1.260     -6.995      0.000     -11.288      -6.345
Music               5.3782      2.251      2.389      0.017       0.964       9.792
Mystery            -1.5750      1.263     -1.247      0.212      -4.051       0.901
Science Fiction    -0.7173      1.157     -0.620      0.535      -2.986       1.551
Thriller           -5.4658      0.951     -5.749      0.000      -7.330      -3.602
Western             0.5371      3.442      0.156      0.876      -6.212       7.287
==============================================================================
Omnibus:                       78.789   Durbin-Watson:                   1.892
Prob(Omnibus):                  0.000   Jarque-Bera (JB):               46.675
Skew:                          -0.190   Prob(JB):                     7.32e-11
Kurtosis:                       2.434   Cond. No.                         19.5
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.

======= Multiple Regression Results =======
Dep. Variable: rotten_aud_score
No. of Observations (n): 2416
No. of Ind. Vairable (k): 16
Mean of Dep. Variable: 61.7964
Standard Deviation of Dep. Variable: 18.7775
Standard Error: 17.2981 (ȳ = 61.7964)
SSR: 717840.6456

R-square: 0.1570
Adjusted R-square: 0.1514
Difference (≤ 0.06 True): 0.005622429844834853

Estimated model: ŷ = 62.4301 + -1.5223 x1 + 0.6919 x2 + 10.8297 x3 + -5.3694 x4 + 2.3880 x5 + 17.1275 x6 + 8.3806 x7 + -4.3403 x8 + 0.1014 x9 + 3.2204 x10 + -8.8169 x11 + 5.3782 x12 + -1.5750 x13 + -0.7173 x14 + -5.4658 x15 + 0.5371 x16

&lt;F-test&gt;
F(observed value):  27.9215
p-value:  0.0000 (Overwhelming Evidence)
Reject H_0 (The model is valid: at least one beta_i ≠ 0) → True
</code></pre></div>
<p>由上述結果可知，在 2416 筆資料當中，Documentary 僅有 11 筆、Music 僅有 56 筆，若排除此二資料筆數較少之類別，可從我們所得到的 model 中的係數結果得知，若電影類別為 Drama 或 Animation，整體而言可獲得較高觀眾評分。</p>
<h3 id="_6">五、票房與原始語言的關係<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>一部電影之原始語言通常會進而影響其風格以及目標客群，希望可以透過此分析探討若該電影之原始語言為世界上較多人口使用之語言，像是英文，會不會因為較多人聽得懂原版而廣泛流傳、進而提升票房。抑或是有特定語言之電影之票房特別突出。</p>
<div class="highlight"><pre><span></span><code><span class="n">language_df</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="p">[[</span><span class="s1">&#39;original_language&#39;</span><span class="p">,</span> <span class="s1">&#39;revenue&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Head of data set:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">language_df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tail of data set:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">language_df</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Head of data set:
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>original_language</th>
      <th>revenue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>en</td>
      <td>161834276</td>
    </tr>
    <tr>
      <th>1</th>
      <td>en</td>
      <td>144056873</td>
    </tr>
    <tr>
      <th>2</th>
      <td>en</td>
      <td>45554533</td>
    </tr>
    <tr>
      <th>3</th>
      <td>en</td>
      <td>28780255</td>
    </tr>
    <tr>
      <th>4</th>
      <td>en</td>
      <td>106371651</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code>Tail of data set:
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>original_language</th>
      <th>revenue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2783</th>
      <td>en</td>
      <td>47019435</td>
    </tr>
    <tr>
      <th>2784</th>
      <td>en</td>
      <td>30763855</td>
    </tr>
    <tr>
      <th>2785</th>
      <td>en</td>
      <td>76706000</td>
    </tr>
    <tr>
      <th>2786</th>
      <td>en</td>
      <td>80648577</td>
    </tr>
    <tr>
      <th>2787</th>
      <td>en</td>
      <td>46586903</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">language_df</span><span class="p">[</span><span class="s1">&#39;original_language&#39;</span><span class="p">],</span> <span class="n">language_df</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Scatter Plot for Movie Revenue and Original Language&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Original Language&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Revenue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">language_df</span><span class="p">[</span><span class="s1">&#39;original_language&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_75_0.png" /></p>
<p><strong>檢查資料是否為常態分佈</strong></p>
<p>考量到部分語言電影之資料筆數 &lt; 3 、無法進行 Shapiro Wilk's Test，且資料筆數少較難真實呈現該語言電影的真實票房，故先將其予以排除</p>
<div class="highlight"><pre><span></span><code><span class="n">three_bound_index</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">language_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;original_language&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()[</span><span class="n">language_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;original_language&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()[</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">proper_lang_df</span> <span class="o">=</span> <span class="n">language_df</span><span class="p">[</span><span class="n">language_df</span><span class="p">[</span><span class="s1">&#39;original_language&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">three_bound_index</span><span class="p">)]</span>
<span class="n">proper_lang_df</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>original_language</th>
      <th>revenue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>en</td>
      <td>161834276</td>
    </tr>
    <tr>
      <th>1</th>
      <td>en</td>
      <td>144056873</td>
    </tr>
    <tr>
      <th>2</th>
      <td>en</td>
      <td>45554533</td>
    </tr>
    <tr>
      <th>3</th>
      <td>en</td>
      <td>28780255</td>
    </tr>
    <tr>
      <th>4</th>
      <td>en</td>
      <td>106371651</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2783</th>
      <td>en</td>
      <td>47019435</td>
    </tr>
    <tr>
      <th>2784</th>
      <td>en</td>
      <td>30763855</td>
    </tr>
    <tr>
      <th>2785</th>
      <td>en</td>
      <td>76706000</td>
    </tr>
    <tr>
      <th>2786</th>
      <td>en</td>
      <td>80648577</td>
    </tr>
    <tr>
      <th>2787</th>
      <td>en</td>
      <td>46586903</td>
    </tr>
  </tbody>
</table>
<p>2775 rows × 2 columns</p>
</div>

<ul>
<li><span class="arithmatex">\(H_0\)</span>: The population is normally distributed</li>
<li><span class="arithmatex">\(H_1\)</span>: The population is not normally distributed</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">treatment_name_list</span> <span class="o">=</span> <span class="n">proper_lang_df</span><span class="p">[</span><span class="s1">&#39;original_language&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">treatment_name_list</span><span class="p">)</span>
<span class="n">anova</span><span class="o">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">proper_lang_df</span><span class="p">,</span> <span class="n">treatment_name_list</span><span class="p">,</span> <span class="s1">&#39;original_language&#39;</span><span class="p">,</span> <span class="s1">&#39;revenue&#39;</span><span class="p">)</span>
<span class="c1"># anova.qq_plot(4, 4, proper_lang_df, treatment_name_list, &#39;original_language&#39;, &#39;revenue&#39;, figsize=(16, 16))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[&#39;en&#39; &#39;fr&#39; &#39;es&#39; &#39;zh&#39; &#39;ja&#39; &#39;cn&#39; &#39;pt&#39; &#39;ko&#39; &#39;it&#39; &#39;th&#39; &#39;de&#39; &#39;ru&#39; &#39;hi&#39; &#39;sv&#39;
 &#39;no&#39; &#39;da&#39;]
1: Statistics=0.6985, p=0.0000
2: Statistics=0.5459, p=0.0000
3: Statistics=0.8304, p=0.0002
4: Statistics=0.9592, p=0.8025
5: Statistics=0.8486, p=0.0102
6: Statistics=0.8343, p=0.0658
7: Statistics=0.9684, p=0.8313
8: Statistics=0.7001, p=0.0001
9: Statistics=0.7924, p=0.0012
10: Statistics=0.9832, p=0.7520
11: Statistics=0.8692, p=0.2231
12: Statistics=0.9471, p=0.7028
13: Statistics=0.7717, p=0.0322
14: Statistics=0.9276, p=0.5803
15: Statistics=0.7951, p=0.1030
16: Statistics=0.9850, p=0.9307
</code></pre></div>
<p>雖然沒有符合 Required Conditions，因為難以比較，所以仍透過 One Way ANOVA 來幫助我們釐清關係。</p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: All population means are equal<br></li>
<li><span class="arithmatex">\(H_1\)</span>: Not all population means are equal</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">results</span><span class="p">,</span> <span class="n">aov_table</span><span class="p">,</span> <span class="n">render_table</span><span class="p">,</span> <span class="n">f_stat</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">anova</span><span class="o">.</span><span class="n">f_oneway</span><span class="p">(</span><span class="n">proper_lang_df</span><span class="p">,</span> <span class="s1">&#39;original_language&#39;</span><span class="p">,</span> <span class="s1">&#39;revenue&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">aov_table</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;p-value = </span><span class="si">{</span><span class="n">p_value</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>p-value: 1.866833379796334e-07
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sum_sq</th>
      <th>df</th>
      <th>F</th>
      <th>PR(&gt;F)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>C(original_language)</th>
      <td>2.167251e+18</td>
      <td>15.0</td>
      <td>4.085807</td>
      <td>1.866833e-07</td>
    </tr>
    <tr>
      <th>Residual</th>
      <td>9.756450e+19</td>
      <td>2759.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code>p-value = 0.0000
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">mc</span> <span class="o">=</span> <span class="n">smm</span><span class="o">.</span><span class="n">MultiComparison</span><span class="p">(</span><span class="n">proper_lang_df</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">],</span> <span class="n">proper_lang_df</span><span class="p">[</span><span class="s1">&#39;original_language&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">tukeyhsd</span><span class="p">()</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>           Multiple Comparison of Means - Tukey HSD, FWER=0.05            
==========================================================================
group1 group2     meandiff    p-adj       lower          upper      reject
--------------------------------------------------------------------------
    cn     da     -58777230.5    0.9 -453692911.9816 336138450.9816  False
    cn     de  -19386488.1667    0.9   -367669382.18 328896405.8467  False
    cn     en   80979545.5313    0.9 -147379587.0194  309338678.082  False
    cn     es  -38049257.6667    0.9 -294660053.0628 218561537.7294  False
    cn     fr  -29759843.6912    0.9 -270803713.8388 211284026.4564  False
    cn     hi      28994122.0    0.9 -319288772.0133 377277016.0133  False
    cn     it  -48362190.1111    0.9 -322389705.7099 225665325.4877  False
    cn     ja   24160919.0588    0.9 -252335362.7657 300657200.8834  False
    cn     ko  -17565548.1765    0.9  -294061830.001 258930733.6481  False
    cn     no  -63470572.6667    0.9 -500066285.7674  373125140.434  False
    cn     pt     -43055653.0    0.9 -437971334.4816 351860028.4816  False
    cn     ru  -44173588.5714    0.9 -377938257.0346 289591079.8918  False
    cn     sv     -19510355.0    0.9 -387156846.5505 348136136.5505  False
    cn     th     -50270048.0    0.9 -486865761.1007 386325665.1007  False
    cn     zh     58465853.25    0.9 -263981450.4345 380913156.9345  False
    da     de   39390742.3333    0.9 -376886936.7332 455668421.3999  False
    da     en  139756776.0313    0.9 -182941264.3191 462454816.3818  False
    da     es   20727972.8333    0.9 -322543395.2423  363999340.909  False
    da     fr   29017386.8088    0.9 -302778151.3806 360812924.9983  False
    da     hi      87771352.5    0.9 -328506326.5665 504049031.5665  False
    da     it   10415040.3889    0.9 -346063866.6055 366893947.3833  False
    da     ja   82938149.5588    0.9 -275441991.7569 441318290.8746  False
    da     ko   41211682.3235    0.9 -317168458.9922 399591823.6393  False
    da     no   -4693342.1667    0.9 -497239734.4229 487853050.0895  False
    da     pt      15721577.5    0.9 -440287772.5213 471730927.5213  False
    da     ru   14603641.9286    0.9 -389605444.7346 418812728.5917  False
    da     sv      39266875.5    0.9   -393341578.62   471875329.62  False
    da     th       8507182.5    0.9 -484039209.7562 501053574.7562  False
    da     zh    117243083.75    0.9 -277672597.7316 512158765.2316  False
    de     en   100366033.698    0.9 -163218116.1066 363950183.5026  False
    de     es     -18662769.5    0.9   -307068405.58   269742866.58  False
    de     fr  -10373355.5245    0.9 -285020143.1348 264273432.0857  False
    de     hi   48380610.1667    0.9 -323949464.9968 420710685.3301  False
    de     it  -28975701.9444    0.9  -332981935.292 275030531.4031  False
    de     ja   43547407.2255    0.9 -262686007.7894 349780822.2404  False
    de     ko    1820939.9902    0.9 -304412475.0247 308054355.0051  False
    de     no     -44084084.5    0.9 -500093434.5213 411925265.5213  False
    de     pt  -23669164.8333    0.9 -439946843.8999 392608514.2332  False
    de     ru  -24787100.4048    0.9 -383573338.3282 333999137.5187  False
    de     sv    -123866.8333    0.9 -390626944.1046 390379210.4379  False
    de     th  -30883559.8333    0.9 -486892909.8546 425125790.1879  False
    de     zh   77852341.4167    0.9 -270430552.5967   426135235.43  False
    en     es  -119028803.198 0.0473 -237454856.4115   -602749.9844   True
    en     fr -110739389.2225  0.001 -189971813.7824 -31506964.6626   True
    en     hi  -51985423.5313    0.9 -315569573.3359 211598726.2733  False
    en     it -129341735.6424 0.2117 -281876023.8243  23192552.5394  False
    en     ja  -56818626.4725    0.9 -213744799.0146 100107546.0696  False
    en     ko  -98545093.7078 0.7001 -255471266.2499  58381078.8343  False
    en     no  -144450118.198    0.9  -516997358.778 228097122.3821  False
    en     pt -124035198.5313    0.9 -446733238.8818 198662841.8191  False
    en     ru -125153134.1027    0.9 -369231981.3638 118925713.1583  False
    en     sv -100489900.5313    0.9 -389175841.5041 188196040.4415  False
    en     th -131249593.5313    0.9 -503796834.1114 241297647.0488  False
    en     zh  -22513692.2813    0.9  -250872824.832 205845440.2694  False
    es     fr    8289413.9755    0.9  -133057619.938  149636447.889  False
    es     hi   67043379.6667    0.9 -221362256.4134 355449015.7467  False
    es     it  -10312932.4444    0.9 -202583356.4978 181957491.6089  False
    es     ja   62210176.7255    0.9 -133562728.7625 257983082.2135  False
    es     ko   20483709.4902    0.9 -175289195.9978 216256614.9782  False
    es     no     -25421315.0    0.9 -415924392.2713 365081762.2713  False
    es     pt   -5006395.3333    0.9  -348277763.409 338264972.7423  False
    es     ru   -6124330.9048    0.9 -276819160.1402 264570498.3306  False
    es     sv   18538902.6667    0.9  -292974787.899 330052593.2323  False
    es     th  -12220790.3333    0.9 -402723867.6046 378282286.9379  False
    es     zh   96515110.9167    0.9 -160095684.4794 353125906.3128  False
    fr     hi   58753965.6912    0.9 -215892821.9191 333400753.3014  False
    fr     it  -18602346.4199    0.9 -189543748.6242 152339055.7843  False
    fr     ja     53920762.75    0.9 -120950840.2767 228792365.7767  False
    fr     ko   12194295.5147    0.9  -162677307.512 187065898.5414  False
    fr     no  -33710728.9755    0.9 -414165325.9779 346743868.0269  False
    fr     pt  -13295809.3088    0.9 -345091347.4983 318499728.8806  False
    fr     ru  -14413744.8803    0.9 -270399560.1058 241572070.3453  False
    fr     sv   10249488.6912    0.9 -288571237.5507 309070214.9331  False
    fr     th  -20510204.3088    0.9 -400964801.3112 359944392.6935  False
    fr     zh   88225696.9412    0.9 -152818173.2064 329269567.0888  False
    hi     it  -77356312.1111    0.9 -381362545.4586 226649921.2364  False
    hi     ja   -4833202.9412    0.9 -311066617.9561 301400212.0737  False
    hi     ko  -46559670.1765    0.9 -352793085.1914 259673744.8384  False
    hi     no  -92464694.6667    0.9 -548474044.6879 363544655.3546  False
    hi     pt     -72049775.0    0.9 -488327454.0665 344227904.0665  False
    hi     ru  -73167710.5714    0.9 -431953948.4949  285618527.352  False
    hi     sv     -48504477.0    0.9 -439007554.2713 341998600.2713  False
    hi     th     -79264170.0    0.9 -535273520.0213 376745180.0213  False
    hi     zh     29471731.25    0.9 -318811162.7633 377754625.2633  False
    it     ja   72523109.1699    0.9 -145580099.2307 290626317.5705  False
    it     ko   30796641.9346    0.9 -187306566.4659 248899850.3352  False
    it     no  -15108382.5556    0.9  -417270827.781 387054062.6699  False
    it     pt    5306537.1111    0.9 -351172369.8833 361785444.1055  False
    it     ru    4188601.5397    0.9 -283070287.9071 291447490.9865  False
    it     sv   28851835.1111    0.9 -297158530.3702 354862200.5924  False
    it     th   -1907857.8889    0.9 -404070303.1144 400254587.3366  False
    it     zh  106828043.3611    0.9 -167199472.2377 380855558.9599  False
    ja     ko  -41726467.2353    0.9 -262923492.6949 179470558.2243  False
    ja     no  -87631491.7255    0.9 -491480160.0498 316217176.5988  False
    ja     pt  -67216572.0588    0.9 -425596713.3746 291163569.2569  False
    ja     ru  -68334507.6303    0.9 -357949396.9639 221280381.7034  False
    ja     sv  -43671274.0588    0.9 -371759483.1716 284416935.0539  False
    ja     th  -74430967.0588    0.9 -478279635.3831 329417701.2655  False
    ja     zh   34304934.1912    0.9 -242191347.6334 310801216.0157  False
    ko     no  -45905024.4902    0.9 -449753692.8145 357943643.8341  False
    ko     pt  -25490104.8235    0.9 -383870246.1393 332890036.4922  False
    ko     ru   -26608040.395    0.9 -316222929.7286 263006848.9387  False
    ko     sv   -1944806.8235    0.9 -330033015.9363 326143402.2892  False
    ko     th  -32704499.8235    0.9 -436553168.1478 371144168.5008  False
    ko     zh   76031401.4265    0.9 -200464880.3981  352527683.251  False
    no     pt   20414919.6667    0.9 -472131472.5895 512961311.9229  False
    no     ru   19296984.0952    0.9 -425722573.8557 464316542.0462  False
    no     sv   43960217.6667    0.9 -427004213.8926 514924649.2259  False
    no     th   13200524.6667    0.9 -513353717.3089 539754766.6422  False
    no     zh  121936425.9167    0.9  -314659287.184 558532139.0174  False
    pt     ru   -1117935.5714    0.9 -405327022.2346 403091151.0917  False
    pt     sv      23545298.0    0.9   -409063156.12   456153752.12  False
    pt     th      -7214395.0    0.9 -499760787.2562 485331997.2562  False
    pt     zh    101521506.25    0.9 -293394175.2316 496437187.7316  False
    ru     sv   24663233.5714    0.9 -352948383.0539 402274850.1967  False
    ru     th   -6096459.4286    0.9 -451116017.3795 438923098.5224  False
    ru     zh  102639441.8214    0.9 -231125226.6418 436404110.2846  False
    sv     th     -30759693.0    0.9 -501724124.5593 440204738.5593  False
    sv     zh     77976208.25    0.9 -289670283.3005 445622699.8005  False
    th     zh    108735901.25    0.9 -327859811.8507 545331614.3507  False
--------------------------------------------------------------------------
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">_</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">tukeyhsd</span><span class="p">()</span><span class="o">.</span><span class="n">plot_simultaneous</span><span class="p">(</span><span class="n">comparison_name</span> <span class="o">=</span> <span class="s2">&quot;en&quot;</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">tukeyhsd</span><span class="p">()</span><span class="o">.</span><span class="n">plot_simultaneous</span><span class="p">(</span><span class="n">comparison_name</span> <span class="o">=</span> <span class="s2">&quot;zh&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../output_83_0.png" /></p>
<p><img alt="png" src="../output_83_1.png" /></p>
<p>Pairs <code>en</code> and <code>es</code>, <code>en</code> and <code>fr</code>, <code>en</code> and <code>it</code> can reject the null hypothesis under 5% confidence level. Moreover, by observing the graph above, we can know that the mean of <code>en</code> is larger than the mean of <code>es</code>, <code>fr</code>, <code>it</code>.</p>
<p>結果顯示原始語言為英文的電影票房較西班牙語、法語、義大利語電影好的狀況，不過因為整體資料筆數太懸殊、幾乎都是英文片所以意義不大。</p>
<p>為更了解各原始語言電影之票房分佈，繪製以下 Box Plot。</p>
<div class="highlight"><pre><span></span><code><span class="n">lan_list</span> <span class="o">=</span> <span class="n">proper_lang_df</span><span class="p">[</span><span class="s1">&#39;original_language&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;original_language&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;revenue&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">proper_lang_df</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_86_0.png" /></p>
<p>在這裏我們也可以看到，中文電影的平均票房表現其實也不差。甚至高於英文電影的平均票房。</p>
<h3 id="_7">六、票房與電影級數的關係<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>因不同電影分級也代表該電影的客群範圍大小不盡相同，因此我們想探討電影分級是否會影響票房。</p>
<div class="highlight"><pre><span></span><code><span class="n">data7</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="p">[[</span><span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">]]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Head of dataset:&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">data7</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tail of dataset:&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">data7</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="n">data7</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Head of dataset:
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>revenue</th>
      <th>rating</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>161834276</td>
      <td>R</td>
    </tr>
    <tr>
      <th>1</th>
      <td>144056873</td>
      <td>R</td>
    </tr>
    <tr>
      <th>2</th>
      <td>45554533</td>
      <td>G</td>
    </tr>
    <tr>
      <th>3</th>
      <td>28780255</td>
      <td>R</td>
    </tr>
    <tr>
      <th>4</th>
      <td>106371651</td>
      <td>R</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code>Tail of dataset:
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>revenue</th>
      <th>rating</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2783</th>
      <td>47019435</td>
      <td>R</td>
    </tr>
    <tr>
      <th>2784</th>
      <td>30763855</td>
      <td>PG-13</td>
    </tr>
    <tr>
      <th>2785</th>
      <td>76706000</td>
      <td>R</td>
    </tr>
    <tr>
      <th>2786</th>
      <td>80648577</td>
      <td>R</td>
    </tr>
    <tr>
      <th>2787</th>
      <td>46586903</td>
      <td>PG-13</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code>(2788, 2)
</code></pre></div>
<p>去除NaN值：</p>
<div class="highlight"><pre><span></span><code><span class="n">data7</span> <span class="o">=</span> <span class="n">data7</span><span class="p">[</span><span class="o">~</span><span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">])]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data7</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>(2361, 2)
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">rating</span> <span class="o">=</span> <span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rating</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">rating</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>7 [&#39;R&#39; &#39;G&#39; &#39;PG-13&#39; &#39;PG&#39; &#39;TVG&#39; &#39;NC-17&#39; &#39;TVMA&#39;]
</code></pre></div>
<p>分級共有7種，將其編號 1~7</p>
<p><strong>Scatter Plot</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">],</span> <span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Scatter Plot for Movie Revenue and Rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Revenue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_95_0.png" /></p>
<p>可以看到NC-17、TVG、TVMA的資料筆數很少。</p>
<p><strong>用各分級平均票房畫 Bar Chart</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">rate_ave</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">rate_ave</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">][</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">rating</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="n">rate_ave</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[87707908.30050762, 288900688.45652175, 189863192.0979592, 231950381.4115942, 110230332.0, 18113892.666666668, 15600000.0]
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">rects1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">rating</span><span class="p">,</span> <span class="n">rate_ave</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Average Revenue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Average Revenue for Different Rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rating</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">autolabel</span><span class="p">(</span><span class="n">rects</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Attach a text label above each bar in *rects*, displaying its height.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">rects</span><span class="p">:</span>
        <span class="n">height</span> <span class="o">=</span> <span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">())</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">height</span> <span class="o">/</span> <span class="mf">1e8</span><span class="p">),</span>
                    <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="p">),</span>
                    <span class="n">xytext</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>  <span class="c1"># 3 points vertical offset</span>
                    <span class="n">textcoords</span> <span class="o">=</span> <span class="s2">&quot;offset points&quot;</span><span class="p">,</span>
                    <span class="n">ha</span> <span class="o">=</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span> <span class="o">=</span> <span class="s1">&#39;bottom&#39;</span><span class="p">)</span>

<span class="n">autolabel</span><span class="p">(</span><span class="n">rects1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_99_0.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">data7</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;rating&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="8" halign="left">revenue</th>
    </tr>
    <tr>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>rating</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>G</th>
      <td>46.0</td>
      <td>2.889007e+08</td>
      <td>2.658467e+08</td>
      <td>14460000.0</td>
      <td>1.130379e+08</td>
      <td>186662101.5</td>
      <td>378496892.0</td>
      <td>1.073395e+09</td>
    </tr>
    <tr>
      <th>NC-17</th>
      <td>3.0</td>
      <td>1.811389e+07</td>
      <td>1.943852e+07</td>
      <td>3909002.0</td>
      <td>7.037348e+06</td>
      <td>10165694.0</td>
      <td>25216338.0</td>
      <td>4.026698e+07</td>
    </tr>
    <tr>
      <th>PG</th>
      <td>345.0</td>
      <td>2.319504e+08</td>
      <td>2.325721e+08</td>
      <td>1117920.0</td>
      <td>7.202875e+07</td>
      <td>141702264.0</td>
      <td>321885765.0</td>
      <td>1.047612e+09</td>
    </tr>
    <tr>
      <th>PG-13</th>
      <td>980.0</td>
      <td>1.898632e+08</td>
      <td>2.263727e+08</td>
      <td>970816.0</td>
      <td>4.568520e+07</td>
      <td>99743505.0</td>
      <td>228840672.0</td>
      <td>1.153296e+09</td>
    </tr>
    <tr>
      <th>R</th>
      <td>985.0</td>
      <td>8.770791e+07</td>
      <td>1.069241e+08</td>
      <td>924793.0</td>
      <td>2.115026e+07</td>
      <td>54700105.0</td>
      <td>109502303.0</td>
      <td>1.074251e+09</td>
    </tr>
    <tr>
      <th>TVG</th>
      <td>1.0</td>
      <td>1.102303e+08</td>
      <td>NaN</td>
      <td>110230332.0</td>
      <td>1.102303e+08</td>
      <td>110230332.0</td>
      <td>110230332.0</td>
      <td>1.102303e+08</td>
    </tr>
    <tr>
      <th>TVMA</th>
      <td>1.0</td>
      <td>1.560000e+07</td>
      <td>NaN</td>
      <td>15600000.0</td>
      <td>1.560000e+07</td>
      <td>15600000.0</td>
      <td>15600000.0</td>
      <td>1.560000e+07</td>
    </tr>
  </tbody>
</table>
</div>

<p>※資料筆數差異很大，不考慮NC-17、TVG、TVMA  </p>
<p>G 的票房看起來最高，R 的票房看起來最低，進一步檢定是否如此。</p>
<div class="highlight"><pre><span></span><code><span class="n">rating</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">rating</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rating</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">rating</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>4 [&#39;R&#39; &#39;G&#39; &#39;PG-13&#39; &#39;PG&#39;]
</code></pre></div>
<p>將分級編號為1~4。</p>
<div class="highlight"><pre><span></span><code><span class="n">data7</span> <span class="o">=</span> <span class="n">data7</span><span class="p">[</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;NC-17&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">data7</span> <span class="o">=</span> <span class="n">data7</span><span class="p">[</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;TVG&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">data7</span> <span class="o">=</span> <span class="n">data7</span><span class="p">[</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;TVMA&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data7</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>(2356, 2)
</code></pre></div>
<p><strong>Check Normality</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">row</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">wspace</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">][</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">rating</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Revenue of Rating &#39;</span> <span class="o">+</span> <span class="n">rating</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Revenue&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_106_0.png" /></p>
<p>明顯看得出來資料不是常態分佈，因此使用無母數檢定的Kruskal-Wallis Test。</p>
<p><strong>Kruskal-Wallis Test</strong>
+ <span class="arithmatex">\(H_0:\)</span> The locations of all the 4 populations are the same.<br />
+ <span class="arithmatex">\(H_1:\)</span> At least two population locations differ.  </p>
<p>Significance level <span class="arithmatex">\(\alpha = 0.05\)</span>.</p>
<div class="highlight"><pre><span></span><code><span class="n">stats</span><span class="o">.</span><span class="n">kruskal</span><span class="p">(</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">][</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;PG-13&#39;</span><span class="p">],</span> <span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">][</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;R&#39;</span><span class="p">],</span> 
              <span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">][</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;G&#39;</span><span class="p">],</span> <span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">][</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;PG&#39;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>KruskalResult(statistic=283.22241140429986, pvalue=4.2517137942222856e-61)
</code></pre></div>
<p>p-value &lt; 0.05，有足夠的證據以拒絕虛無假設，也就是不同電影分級的票房有差異，進一步將電影分級兩兩分組，以Mann–Whitney U Test檢定其之間的關係。</p>
<p><strong>Mann–Whitney U Test</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">rate_comb</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">rating</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rate_comb</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[(&#39;R&#39;, &#39;G&#39;), (&#39;R&#39;, &#39;PG-13&#39;), (&#39;R&#39;, &#39;PG&#39;), (&#39;G&#39;, &#39;PG-13&#39;), (&#39;G&#39;, &#39;PG&#39;), (&#39;PG-13&#39;, &#39;PG&#39;)]
</code></pre></div>
<p>用來儲存結果的二維陣列</p>
<div class="highlight"><pre><span></span><code><span class="n">rate_comb_result</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">rate_comb_result</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
    <span class="k">for</span> <span class="n">m2</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">rate_comb_result</span><span class="p">[</span><span class="n">m1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</code></pre></div>
<ul>
<li><span class="arithmatex">\(H_0:\)</span> The two population locations are the same in terms of revenue.  </li>
<li><span class="arithmatex">\(H_1:\)</span> The two population locations are not the same in terms of revenue.</li>
</ul>
<p>只印出可以拒絕虛無假設（也就是票房有所差異）的月份組合</p>
<div class="highlight"><pre><span></span><code><span class="n">diff_rate</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#r1 != r2</span>
<span class="k">for</span> <span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span> <span class="ow">in</span> <span class="n">rate_comb</span><span class="p">:</span>
    <span class="c1">#print(&#39;(&#39;, r1, &#39;, &#39;, r2, &#39;)&#39;)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">mannwhitneyu</span><span class="p">(</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">][</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">r1</span><span class="p">],</span> <span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">][</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">r2</span><span class="p">],</span> <span class="n">alternative</span> <span class="o">=</span> <span class="s1">&#39;two-sided&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">pvalue</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="s1">&#39; != &#39;</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="s1">&#39;): &#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">diff_rate</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">))</span>
            <span class="n">rate_comb_result</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r1</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r2</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;!=&#39;</span>
            <span class="n">rate_comb_result</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r2</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r1</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;!=&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rate_comb_result</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r1</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r2</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;=&#39;</span>
            <span class="n">rate_comb_result</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r2</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r1</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;=&#39;</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">continue</span>

<span class="nb">print</span><span class="p">(</span><span class="n">diff_rate</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>(R != G): MannwhitneyuResult(statistic=8566.0, pvalue=9.535788534005027e-13)
(R != PG-13): MannwhitneyuResult(statistic=322207.0, pvalue=2.8085095054408475e-37)
(R != PG): MannwhitneyuResult(statistic=85354.0, pvalue=3.7048787546911424e-43)
(G != PG-13): MannwhitneyuResult(statistic=29542.0, pvalue=0.0003644829113218024)
(PG-13 != PG): MannwhitneyuResult(statistic=140824.0, pvalue=3.8777413935328725e-06)
[(&#39;R&#39;, &#39;G&#39;), (&#39;R&#39;, &#39;PG-13&#39;), (&#39;R&#39;, &#39;PG&#39;), (&#39;G&#39;, &#39;PG-13&#39;), (&#39;PG-13&#39;, &#39;PG&#39;)]
</code></pre></div>
<p>針對以上這些月份再做left tail和right tail</p>
<div class="highlight"><pre><span></span><code><span class="n">less_rate</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#r1 &lt; r2</span>
<span class="n">greater_rate</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#r1 &gt; r2</span>
<span class="k">for</span> <span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span> <span class="ow">in</span> <span class="n">diff_rate</span><span class="p">:</span>
    <span class="n">l_result</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">mannwhitneyu</span><span class="p">(</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">][</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">r1</span><span class="p">],</span> <span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">][</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">r2</span><span class="p">],</span> <span class="n">alternative</span> <span class="o">=</span> <span class="s1">&#39;less&#39;</span><span class="p">)</span>
    <span class="n">r_result</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">mannwhitneyu</span><span class="p">(</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">][</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">r1</span><span class="p">],</span> <span class="n">data7</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">][</span><span class="n">data7</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">r2</span><span class="p">],</span> <span class="n">alternative</span> <span class="o">=</span> <span class="s1">&#39;greater&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">l_result</span><span class="o">.</span><span class="n">pvalue</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="s1">&#39; &lt; &#39;</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="s1">&#39;): &#39;</span><span class="p">,</span> <span class="n">l_result</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">less_rate</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">))</span>
        <span class="n">rate_comb_result</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r1</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r2</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;&lt;&#39;</span>
        <span class="n">rate_comb_result</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r2</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r1</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;&gt;&#39;</span>
    <span class="k">elif</span> <span class="n">r_result</span><span class="o">.</span><span class="n">pvalue</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="s1">&#39; &gt; &#39;</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="s1">&#39;): &#39;</span><span class="p">,</span> <span class="n">r_result</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">greater_rate</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">))</span>
        <span class="n">rate_comb_result</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r1</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r2</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;&gt;&#39;</span>
        <span class="n">rate_comb_result</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r2</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">rating</span> <span class="o">==</span> <span class="n">r1</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;&lt;&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">less_rate</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">greater_rate</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>(R &lt; G): MannwhitneyuResult(statistic=8566.0, pvalue=4.767894267002514e-13)
(R &lt; PG-13): MannwhitneyuResult(statistic=322207.0, pvalue=1.4042547527204237e-37)
(R &lt; PG): MannwhitneyuResult(statistic=85354.0, pvalue=1.8524393773455712e-43)
(G &gt; PG-13): MannwhitneyuResult(statistic=29542.0, pvalue=0.0001822414556609012)
(PG-13 &lt; PG): MannwhitneyuResult(statistic=140824.0, pvalue=1.9388706967664363e-06)
[(&#39;R&#39;, &#39;G&#39;), (&#39;R&#39;, &#39;PG-13&#39;), (&#39;R&#39;, &#39;PG&#39;), (&#39;PG-13&#39;, &#39;PG&#39;)]
[(&#39;G&#39;, &#39;PG-13&#39;)]
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">rating</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">rate_comb_result</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>R [[], &#39;&lt;&#39;, &#39;&lt;&#39;, &#39;&lt;&#39;]
G [&#39;&gt;&#39;, [], &#39;&gt;&#39;, &#39;=&#39;]
PG-13 [&#39;&gt;&#39;, &#39;&lt;&#39;, [], &#39;&lt;&#39;]
PG [&#39;&gt;&#39;, &#39;=&#39;, &#39;&gt;&#39;, []]
</code></pre></div>
<p><strong>小結：</strong>  </p>
<p>G 和 PG 的票房大於所有其他電影分級，再來是 PG-13，R的票房最低。<br />
G 和 PG 兩者彼此差不多，很合理，因為這兩個都算普遍級，但 PG 是建議家長指導。<br />
而 PG-13 能看的人數比R多，票房較高也合理。</p>
<h3 id="_8">七、票房與上映時間的關係<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<h4 id="1_1">1. 寒暑假比較多電影？<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">month</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">vacay</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">228</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">273</span><span class="p">,</span> <span class="mi">217</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">256</span><span class="p">,</span> <span class="mi">241</span><span class="p">,</span> <span class="mi">263</span><span class="p">,</span> <span class="mi">354</span><span class="p">,</span> <span class="mi">317</span><span class="p">,</span> <span class="mi">251</span><span class="p">,</span> <span class="mi">298</span><span class="p">])</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;Jan.&#39;</span><span class="p">,</span> <span class="s1">&#39;Feb.&#39;</span><span class="p">,</span> <span class="s1">&#39;Mar.&#39;</span><span class="p">,</span> <span class="s1">&#39;Apr.&#39;</span><span class="p">,</span> <span class="s1">&#39;May&#39;</span><span class="p">,</span> <span class="s1">&#39;June&#39;</span><span class="p">,</span> <span class="s1">&#39;July&#39;</span><span class="p">,</span> <span class="s1">&#39;Aug.&#39;</span><span class="p">,</span> <span class="s1">&#39;Sep.&#39;</span><span class="p">,</span> <span class="s1">&#39;Oct.&#39;</span><span class="p">,</span> <span class="s1">&#39;Nov.&#39;</span><span class="p">,</span> <span class="s1">&#39;Dec.&#39;</span><span class="p">])</span>
<span class="n">mylabels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Jan.&#39;</span><span class="p">,</span> <span class="s1">&#39;Feb.&#39;</span><span class="p">,</span> <span class="s1">&#39;Mar.&#39;</span><span class="p">,</span> <span class="s1">&#39;Apr.&#39;</span><span class="p">,</span> <span class="s1">&#39;May&#39;</span><span class="p">,</span> <span class="s1">&#39;June&#39;</span><span class="p">,</span> <span class="s1">&#39;July&#39;</span><span class="p">,</span> <span class="s1">&#39;Aug.&#39;</span><span class="p">,</span> <span class="s1">&#39;Sep.&#39;</span><span class="p">,</span> <span class="s1">&#39;Oct.&#39;</span><span class="p">,</span> <span class="s1">&#39;Nov.&#39;</span><span class="p">,</span> <span class="s1">&#39;Dec.&#39;</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">mylabels</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;New Movies from 2000 - 2021&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> 

<span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;New Movies from 2000 - 2021&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_123_0.png" /></p>
<p><img alt="png" src="../output_123_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">],</span> <span class="p">[</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">13</span><span class="p">],</span> <span class="p">[</span><span class="mi">2002</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> \
             <span class="p">[</span><span class="mi">2003</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="p">[</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="p">[</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span> \
             <span class="p">[</span><span class="mi">2006</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">19</span><span class="p">],</span> <span class="p">[</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span> <span class="p">[</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">],</span> \
             <span class="p">[</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span> <span class="p">[</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>  <span class="p">[</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">13</span><span class="p">],</span> \
             <span class="p">[</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">17</span><span class="p">],</span> <span class="p">[</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">24</span><span class="p">],</span> \
             <span class="p">[</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">],</span> <span class="p">[</span><span class="mi">2016</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> \
             <span class="p">[</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">17</span><span class="p">],</span> <span class="p">[</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">13</span><span class="p">],</span> <span class="p">[</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]])</span>
<span class="n">month_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Years&quot;</span><span class="p">,</span><span class="s1">&#39;Jan.&#39;</span><span class="p">,</span> <span class="s1">&#39;Feb.&#39;</span><span class="p">,</span> <span class="s1">&#39;Mar.&#39;</span><span class="p">,</span> <span class="s1">&#39;Apr.&#39;</span><span class="p">,</span> <span class="s1">&#39;May&#39;</span><span class="p">,</span> <span class="s1">&#39;June&#39;</span><span class="p">,</span> <span class="s1">&#39;July&#39;</span><span class="p">,</span> <span class="s1">&#39;Aug.&#39;</span><span class="p">,</span> <span class="s1">&#39;Sep.&#39;</span><span class="p">,</span> <span class="s1">&#39;Oct.&#39;</span><span class="p">,</span> <span class="s1">&#39;Nov.&#39;</span><span class="p">,</span> <span class="s1">&#39;Dec.&#39;</span><span class="p">])</span>
<span class="n">display</span><span class="p">(</span><span class="n">month_df</span><span class="p">)</span>
<span class="n">y_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">63</span><span class="p">],</span> <span class="p">[</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">67</span><span class="p">],</span> <span class="p">[</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">77</span><span class="p">],</span> <span class="p">[</span><span class="mi">2003</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">88</span><span class="p">],</span> <span class="p">[</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">111</span><span class="p">],</span> <span class="p">[</span><span class="mi">2006</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">114</span><span class="p">],</span>\
       <span class="p">[</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">117</span><span class="p">],</span> <span class="p">[</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">106</span><span class="p">],</span> <span class="p">[</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">145</span><span class="p">],</span> <span class="p">[</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">137</span><span class="p">],</span> <span class="p">[</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">135</span><span class="p">],</span> <span class="p">[</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">126</span><span class="p">],</span> <span class="p">[</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">140</span><span class="p">],</span>\
       <span class="p">[</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">144</span><span class="p">],</span> <span class="p">[</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">131</span><span class="p">],</span> <span class="p">[</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">156</span><span class="p">],</span> <span class="p">[</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">134</span><span class="p">],</span> <span class="p">[</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">120</span><span class="p">],</span> <span class="p">[</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">100</span><span class="p">]])</span><span class="c1">#, [2020, 16, 35]])</span>
<span class="n">vacay_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">y_2</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Years&#39;</span><span class="p">,</span> <span class="s1">&#39;12, 7, 8&#39;</span><span class="p">,</span> <span class="s1">&#39;rest&#39;</span><span class="p">])</span>

<span class="n">vacay_df</span><span class="p">[</span><span class="s1">&#39;sum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vacay_df</span><span class="p">[</span><span class="s1">&#39;12, 7, 8&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">vacay_df</span><span class="p">[</span><span class="s1">&#39;rest&#39;</span><span class="p">]</span>
<span class="n">display</span><span class="p">(</span><span class="n">vacay_df</span><span class="p">)</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Years</th>
      <th>Jan.</th>
      <th>Feb.</th>
      <th>Mar.</th>
      <th>Apr.</th>
      <th>May</th>
      <th>June</th>
      <th>July</th>
      <th>Aug.</th>
      <th>Sep.</th>
      <th>Oct.</th>
      <th>Nov.</th>
      <th>Dec.</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2000</td>
      <td>0</td>
      <td>8</td>
      <td>10</td>
      <td>8</td>
      <td>8</td>
      <td>9</td>
      <td>8</td>
      <td>9</td>
      <td>6</td>
      <td>6</td>
      <td>8</td>
      <td>13</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2001</td>
      <td>7</td>
      <td>4</td>
      <td>5</td>
      <td>9</td>
      <td>6</td>
      <td>11</td>
      <td>16</td>
      <td>9</td>
      <td>4</td>
      <td>12</td>
      <td>9</td>
      <td>13</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2002</td>
      <td>8</td>
      <td>12</td>
      <td>11</td>
      <td>8</td>
      <td>7</td>
      <td>9</td>
      <td>10</td>
      <td>7</td>
      <td>5</td>
      <td>12</td>
      <td>5</td>
      <td>15</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2003</td>
      <td>9</td>
      <td>8</td>
      <td>11</td>
      <td>8</td>
      <td>13</td>
      <td>7</td>
      <td>9</td>
      <td>11</td>
      <td>13</td>
      <td>8</td>
      <td>11</td>
      <td>11</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2004</td>
      <td>7</td>
      <td>11</td>
      <td>10</td>
      <td>13</td>
      <td>9</td>
      <td>12</td>
      <td>9</td>
      <td>7</td>
      <td>14</td>
      <td>14</td>
      <td>10</td>
      <td>11</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2005</td>
      <td>12</td>
      <td>8</td>
      <td>9</td>
      <td>10</td>
      <td>7</td>
      <td>12</td>
      <td>9</td>
      <td>11</td>
      <td>25</td>
      <td>16</td>
      <td>12</td>
      <td>12</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2006</td>
      <td>12</td>
      <td>11</td>
      <td>20</td>
      <td>7</td>
      <td>9</td>
      <td>13</td>
      <td>14</td>
      <td>14</td>
      <td>20</td>
      <td>12</td>
      <td>10</td>
      <td>19</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2007</td>
      <td>5</td>
      <td>13</td>
      <td>14</td>
      <td>9</td>
      <td>8</td>
      <td>17</td>
      <td>8</td>
      <td>14</td>
      <td>20</td>
      <td>15</td>
      <td>16</td>
      <td>14</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2008</td>
      <td>15</td>
      <td>16</td>
      <td>6</td>
      <td>11</td>
      <td>9</td>
      <td>9</td>
      <td>15</td>
      <td>15</td>
      <td>18</td>
      <td>17</td>
      <td>10</td>
      <td>16</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2009</td>
      <td>11</td>
      <td>14</td>
      <td>18</td>
      <td>12</td>
      <td>11</td>
      <td>18</td>
      <td>11</td>
      <td>12</td>
      <td>24</td>
      <td>22</td>
      <td>15</td>
      <td>12</td>
    </tr>
    <tr>
      <th>10</th>
      <td>2010</td>
      <td>10</td>
      <td>14</td>
      <td>18</td>
      <td>12</td>
      <td>10</td>
      <td>18</td>
      <td>13</td>
      <td>14</td>
      <td>23</td>
      <td>17</td>
      <td>15</td>
      <td>12</td>
    </tr>
    <tr>
      <th>11</th>
      <td>2011</td>
      <td>9</td>
      <td>15</td>
      <td>15</td>
      <td>13</td>
      <td>13</td>
      <td>10</td>
      <td>14</td>
      <td>17</td>
      <td>27</td>
      <td>18</td>
      <td>15</td>
      <td>13</td>
    </tr>
    <tr>
      <th>12</th>
      <td>2012</td>
      <td>15</td>
      <td>9</td>
      <td>20</td>
      <td>13</td>
      <td>12</td>
      <td>13</td>
      <td>7</td>
      <td>19</td>
      <td>24</td>
      <td>10</td>
      <td>10</td>
      <td>10</td>
    </tr>
    <tr>
      <th>13</th>
      <td>2013</td>
      <td>17</td>
      <td>10</td>
      <td>15</td>
      <td>15</td>
      <td>15</td>
      <td>12</td>
      <td>20</td>
      <td>15</td>
      <td>23</td>
      <td>21</td>
      <td>12</td>
      <td>17</td>
    </tr>
    <tr>
      <th>14</th>
      <td>2014</td>
      <td>15</td>
      <td>15</td>
      <td>16</td>
      <td>16</td>
      <td>19</td>
      <td>10</td>
      <td>11</td>
      <td>16</td>
      <td>17</td>
      <td>25</td>
      <td>11</td>
      <td>24</td>
    </tr>
    <tr>
      <th>15</th>
      <td>2015</td>
      <td>15</td>
      <td>10</td>
      <td>11</td>
      <td>12</td>
      <td>14</td>
      <td>14</td>
      <td>17</td>
      <td>13</td>
      <td>18</td>
      <td>22</td>
      <td>15</td>
      <td>16</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2016</td>
      <td>14</td>
      <td>20</td>
      <td>15</td>
      <td>15</td>
      <td>14</td>
      <td>19</td>
      <td>15</td>
      <td>12</td>
      <td>20</td>
      <td>14</td>
      <td>25</td>
      <td>20</td>
    </tr>
    <tr>
      <th>17</th>
      <td>2017</td>
      <td>13</td>
      <td>16</td>
      <td>20</td>
      <td>7</td>
      <td>11</td>
      <td>18</td>
      <td>11</td>
      <td>14</td>
      <td>19</td>
      <td>20</td>
      <td>10</td>
      <td>15</td>
    </tr>
    <tr>
      <th>18</th>
      <td>2018</td>
      <td>11</td>
      <td>15</td>
      <td>11</td>
      <td>9</td>
      <td>13</td>
      <td>12</td>
      <td>12</td>
      <td>16</td>
      <td>17</td>
      <td>17</td>
      <td>15</td>
      <td>17</td>
    </tr>
    <tr>
      <th>19</th>
      <td>2019</td>
      <td>10</td>
      <td>8</td>
      <td>11</td>
      <td>7</td>
      <td>13</td>
      <td>10</td>
      <td>6</td>
      <td>13</td>
      <td>13</td>
      <td>15</td>
      <td>13</td>
      <td>13</td>
    </tr>
    <tr>
      <th>20</th>
      <td>2020</td>
      <td>10</td>
      <td>7</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>6</td>
      <td>5</td>
      <td>4</td>
      <td>4</td>
      <td>4</td>
      <td>5</td>
    </tr>
    <tr>
      <th>21</th>
      <td>2021</td>
      <td>3</td>
      <td>6</td>
      <td>5</td>
      <td>2</td>
      <td>3</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
  </tbody>
</table>
</div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Years</th>
      <th>12, 7, 8</th>
      <th>rest</th>
      <th>sum</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2000</td>
      <td>30</td>
      <td>63</td>
      <td>93</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2001</td>
      <td>38</td>
      <td>67</td>
      <td>105</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2002</td>
      <td>32</td>
      <td>77</td>
      <td>109</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2003</td>
      <td>31</td>
      <td>88</td>
      <td>119</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2004</td>
      <td>27</td>
      <td>100</td>
      <td>127</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2005</td>
      <td>32</td>
      <td>111</td>
      <td>143</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2006</td>
      <td>47</td>
      <td>114</td>
      <td>161</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2007</td>
      <td>36</td>
      <td>117</td>
      <td>153</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2008</td>
      <td>51</td>
      <td>106</td>
      <td>157</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2009</td>
      <td>35</td>
      <td>145</td>
      <td>180</td>
    </tr>
    <tr>
      <th>10</th>
      <td>2010</td>
      <td>39</td>
      <td>137</td>
      <td>176</td>
    </tr>
    <tr>
      <th>11</th>
      <td>2011</td>
      <td>44</td>
      <td>135</td>
      <td>179</td>
    </tr>
    <tr>
      <th>12</th>
      <td>2012</td>
      <td>36</td>
      <td>126</td>
      <td>162</td>
    </tr>
    <tr>
      <th>13</th>
      <td>2013</td>
      <td>52</td>
      <td>140</td>
      <td>192</td>
    </tr>
    <tr>
      <th>14</th>
      <td>2014</td>
      <td>51</td>
      <td>144</td>
      <td>195</td>
    </tr>
    <tr>
      <th>15</th>
      <td>2015</td>
      <td>46</td>
      <td>131</td>
      <td>177</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2016</td>
      <td>47</td>
      <td>156</td>
      <td>203</td>
    </tr>
    <tr>
      <th>17</th>
      <td>2017</td>
      <td>40</td>
      <td>134</td>
      <td>174</td>
    </tr>
    <tr>
      <th>18</th>
      <td>2018</td>
      <td>45</td>
      <td>120</td>
      <td>165</td>
    </tr>
    <tr>
      <th>19</th>
      <td>2019</td>
      <td>32</td>
      <td>100</td>
      <td>132</td>
    </tr>
  </tbody>
</table>
</div>

<p>因為 2020 年疫情的關係，我們只選擇了 2000 到 2019 年的資料。</p>
<div class="highlight"><pre><span></span><code><span class="n">df_compare_rating_1</span> <span class="o">=</span> <span class="n">vacay_df</span><span class="p">[[</span><span class="s1">&#39;12, 7, 8&#39;</span><span class="p">,</span> <span class="s1">&#39;rest&#39;</span><span class="p">]]</span>
<span class="n">df_compare_rating_1</span> <span class="o">=</span> <span class="n">df_compare_rating_1</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;rest&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;rest&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">9</span>
<span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;12, 7, 8&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;12, 7, 8&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">3</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_compare_rating_1</span><span class="p">)</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>12, 7, 8</th>
      <th>rest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>10.000000</td>
      <td>7.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>12.666667</td>
      <td>7.444444</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>10.666667</td>
      <td>8.555556</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>10.333333</td>
      <td>9.777778</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>9.000000</td>
      <td>11.111111</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5</td>
      <td>10.666667</td>
      <td>12.333333</td>
    </tr>
    <tr>
      <th>6</th>
      <td>6</td>
      <td>15.666667</td>
      <td>12.666667</td>
    </tr>
    <tr>
      <th>7</th>
      <td>7</td>
      <td>12.000000</td>
      <td>13.000000</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8</td>
      <td>17.000000</td>
      <td>11.777778</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9</td>
      <td>11.666667</td>
      <td>16.111111</td>
    </tr>
    <tr>
      <th>10</th>
      <td>10</td>
      <td>13.000000</td>
      <td>15.222222</td>
    </tr>
    <tr>
      <th>11</th>
      <td>11</td>
      <td>14.666667</td>
      <td>15.000000</td>
    </tr>
    <tr>
      <th>12</th>
      <td>12</td>
      <td>12.000000</td>
      <td>14.000000</td>
    </tr>
    <tr>
      <th>13</th>
      <td>13</td>
      <td>17.333333</td>
      <td>15.555556</td>
    </tr>
    <tr>
      <th>14</th>
      <td>14</td>
      <td>17.000000</td>
      <td>16.000000</td>
    </tr>
    <tr>
      <th>15</th>
      <td>15</td>
      <td>15.333333</td>
      <td>14.555556</td>
    </tr>
    <tr>
      <th>16</th>
      <td>16</td>
      <td>15.666667</td>
      <td>17.333333</td>
    </tr>
    <tr>
      <th>17</th>
      <td>17</td>
      <td>13.333333</td>
      <td>14.888889</td>
    </tr>
    <tr>
      <th>18</th>
      <td>18</td>
      <td>15.000000</td>
      <td>13.333333</td>
    </tr>
    <tr>
      <th>19</th>
      <td>19</td>
      <td>10.666667</td>
      <td>11.111111</td>
    </tr>
  </tbody>
</table>
</div>

<p><strong>Check Normality</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;12, 7, 8&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;above&#39;</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;rest&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;below&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_129_0.png" /></p>
<p>明顯並非常態分佈，故使用 Kruskal-Wallis Test</p>
<ul>
<li><span class="arithmatex">\(H_0:\)</span> The two population locations are the same.<br></li>
<li><span class="arithmatex">\(H_1:\)</span> The location of population 1 (7,8,12) is to the right of the location of population 2 (rest).</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">stats</span><span class="o">.</span><span class="n">kruskal</span><span class="p">(</span><span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;12, 7, 8&#39;</span><span class="p">],</span> <span class="n">df_compare_rating_1</span><span class="p">[</span><span class="s1">&#39;rest&#39;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>KruskalResult(statistic=0.03095238095238126, pvalue=0.8603466677154216)
</code></pre></div>
<p><span class="arithmatex">\(p\)</span>-value 大於 0.05，沒有足夠的證據拒絕虛無假設。<br />
結論：沒有足夠的證據顯示寒暑假上映的電影比較多。</p>
<h4 id="2">2. 過年大片是不是真的比較夯？<a class="headerlink" href="#2" title="Permanent link">&para;</a></h4>
<p>雖然沒有台灣過年發布電影的數據，但我們也可以看看全世界在所謂的<strong>聖誕假期</strong>上映的電影是否有更好的票房。</p>
<p><strong>Time Series</strong></p>
<p>先看一下是否每年的這個季節都有一個 seasonal pattern 存在。（不考慮後 COVID 時期）</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_every_x_mas</span><span class="p">(</span><span class="n">min_year</span><span class="p">,</span> <span class="n">max_year</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">)):</span>
    <span class="n">date_lst</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">min_year</span><span class="p">,</span> <span class="n">max_year</span><span class="p">):</span>
        <span class="n">date_lst</span> <span class="o">+=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="o">*</span><span class="n">start_date</span><span class="p">),</span> <span class="n">periods</span><span class="o">=</span><span class="n">period</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">date_lst</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">rev_ts</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="p">[[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;release_date&#39;</span><span class="p">,</span> <span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="s1">&#39;budget&#39;</span><span class="p">,</span> <span class="s1">&#39;ROI&#39;</span><span class="p">,</span> <span class="s1">&#39;TW_release_date&#39;</span><span class="p">,</span> <span class="s1">&#39;log_revenue&#39;</span><span class="p">,</span> <span class="s1">&#39;log_budget&#39;</span><span class="p">,</span> <span class="s1">&#39;log_ROI&#39;</span><span class="p">]][</span><span class="n">u_movie_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">covid_date</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;release_date&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">mpl_dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">)</span>

<span class="n">x_name</span> <span class="o">=</span> <span class="s1">&#39;Time&#39;</span>
<span class="n">y_name</span> <span class="o">=</span> <span class="s1">&#39;revenue&#39;</span>

<span class="n">rev_df</span> <span class="o">=</span> <span class="n">rev_ts</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;release_date&#39;</span><span class="p">)</span>

<span class="n">min_year</span> <span class="o">=</span> <span class="n">rev_ts</span><span class="o">.</span><span class="n">release_date</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">year</span>
<span class="n">max_year</span> <span class="o">=</span> <span class="n">rev_ts</span><span class="o">.</span><span class="n">release_date</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">year</span>

<span class="n">greater_x_mas_date</span> <span class="o">=</span> <span class="n">get_every_x_mas</span><span class="p">(</span><span class="n">min_year</span><span class="p">,</span> <span class="n">max_year</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;is_xmas&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">greater_x_mas_date</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;release_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
<span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;release_month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">rev_ts</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;is_xmas&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">))</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>release_date</th>
      <th>revenue</th>
      <th>budget</th>
      <th>ROI</th>
      <th>TW_release_date</th>
      <th>log_revenue</th>
      <th>log_budget</th>
      <th>log_ROI</th>
      <th>Time</th>
      <th>is_xmas</th>
      <th>release_year</th>
      <th>release_month</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Scream 3</td>
      <td>2000-02-03</td>
      <td>161834276</td>
      <td>40000000</td>
      <td>3.045857</td>
      <td>NaN</td>
      <td>18.902083</td>
      <td>17.504390</td>
      <td>1.397693</td>
      <td>10990.0</td>
      <td>0</td>
      <td>2000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>The Beach</td>
      <td>2000-02-03</td>
      <td>144056873</td>
      <td>40000000</td>
      <td>2.601422</td>
      <td>NaN</td>
      <td>18.785719</td>
      <td>17.504390</td>
      <td>1.281329</td>
      <td>10990.0</td>
      <td>0</td>
      <td>2000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>The Tigger Movie</td>
      <td>2000-02-11</td>
      <td>45554533</td>
      <td>30000000</td>
      <td>0.518484</td>
      <td>NaN</td>
      <td>17.634421</td>
      <td>17.216708</td>
      <td>0.417713</td>
      <td>10998.0</td>
      <td>0</td>
      <td>2000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Boiler Room</td>
      <td>2000-02-18</td>
      <td>28780255</td>
      <td>7000000</td>
      <td>3.111465</td>
      <td>NaN</td>
      <td>17.175200</td>
      <td>15.761421</td>
      <td>1.413779</td>
      <td>11005.0</td>
      <td>0</td>
      <td>2000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>The Whole Nine Yards</td>
      <td>2000-02-18</td>
      <td>106371651</td>
      <td>41300000</td>
      <td>1.575585</td>
      <td>NaN</td>
      <td>18.482450</td>
      <td>17.536373</td>
      <td>0.946077</td>
      <td>11005.0</td>
      <td>0</td>
      <td>2000</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code>225
</code></pre></div>
<p>從 release_month histogram 來看，我們可以發現，確實在冬天所上映的電影較夏天為多。<br />
我們將聖誕假期的期限延長一點（從 12/10 到 &frac14;），這讓我們擁有 225 部在「聖誕季節」上映的電影。</p>
<div class="highlight"><pre><span></span><code><span class="n">rev_df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">revenue</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>revenue</th>
    </tr>
    <tr>
      <th>release_date</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2000-02</th>
      <td>8.170775e+07</td>
    </tr>
    <tr>
      <th>2000-03</th>
      <td>1.081047e+08</td>
    </tr>
    <tr>
      <th>2000-04</th>
      <td>5.755547e+07</td>
    </tr>
    <tr>
      <th>2000-05</th>
      <td>2.309155e+08</td>
    </tr>
    <tr>
      <th>2000-06</th>
      <td>1.508056e+08</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>2019-10</th>
      <td>2.029394e+08</td>
    </tr>
    <tr>
      <th>2019-11</th>
      <td>9.139465e+07</td>
    </tr>
    <tr>
      <th>2019-12</th>
      <td>2.690879e+08</td>
    </tr>
    <tr>
      <th>2020-01</th>
      <td>9.086521e+07</td>
    </tr>
    <tr>
      <th>2020-02</th>
      <td>1.364924e+08</td>
    </tr>
  </tbody>
</table>
<p>241 rows × 1 columns</p>
</div>

<div class="highlight"><pre><span></span><code><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
<span class="n">rev_df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">revenue</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">rev_df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">ROI</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">rev_df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">budget</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_140_0.png" /></p>
<p>從上面的折線圖，我們可以看到，票房和時間似乎有一定的順序在。<br />
所以我們使用 Time Series 做一次 regression，分別用 month 和 quarter 來做比較。</p>
<p><strong>月線</strong>：以月為單位</p>
<div class="highlight"><pre><span></span><code><span class="n">rev_by_month_df</span> <span class="o">=</span> <span class="n">rev_df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
<span class="n">rev_by_month_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">rev_by_month_df</span><span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rev_by_month_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
<span class="n">rev_by_month_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rev_by_month_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="s1">&#39;%Y-%m&#39;</span><span class="p">))</span>
<span class="n">rev_by_month_df</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">rev_by_month_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">rev_by_month_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>release_date</th>
      <th>revenue</th>
      <th>budget</th>
      <th>ROI</th>
      <th>log_revenue</th>
      <th>log_budget</th>
      <th>log_ROI</th>
      <th>Time</th>
      <th>month</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2000-02-01</td>
      <td>8.170775e+07</td>
      <td>3.190000e+07</td>
      <td>1.704464</td>
      <td>18.007960</td>
      <td>17.146781</td>
      <td>0.861179</td>
      <td>0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2000-03-01</td>
      <td>1.081047e+08</td>
      <td>4.085000e+07</td>
      <td>2.428687</td>
      <td>18.225011</td>
      <td>17.265964</td>
      <td>0.959047</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2000-04-01</td>
      <td>5.755547e+07</td>
      <td>4.137500e+07</td>
      <td>0.930673</td>
      <td>17.614707</td>
      <td>17.301844</td>
      <td>0.312864</td>
      <td>2</td>
      <td>4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2000-05-01</td>
      <td>2.309155e+08</td>
      <td>6.318750e+07</td>
      <td>5.041054</td>
      <td>18.822957</td>
      <td>17.551249</td>
      <td>1.271709</td>
      <td>3</td>
      <td>5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2000-06-01</td>
      <td>1.508056e+08</td>
      <td>6.131111e+07</td>
      <td>2.514755</td>
      <td>18.488506</td>
      <td>17.494954</td>
      <td>0.993552</td>
      <td>4</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">x_name</span> <span class="o">=</span> <span class="s1">&#39;Time&#39;</span>
<span class="n">y_name</span> <span class="o">=</span> <span class="s1">&#39;revenue&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rev_by_month_df</span><span class="p">[</span><span class="n">x_name</span><span class="p">],</span> <span class="n">rev_by_month_df</span><span class="p">[</span><span class="n">y_name</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;dodgerblue&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">y_name</span><span class="si">}</span><span class="s1"> vs </span><span class="si">{</span><span class="n">x_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rev_by_month_df</span><span class="p">[</span><span class="n">x_name</span><span class="p">],</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># slope, intercept, r_value, p_value, std_err = stats.linregress(rev_by_month_df[x_name], rev_by_month_df[y_name])  # order matters</span>
<span class="c1"># ax = sns.regplot(x=x_name, y=y_name, data=rev_by_month_df, ci=None, scatter_kws={&#39;color&#39;: &#39;dodgerblue&#39;, &#39;alpha&#39;: 0}, line_kws={</span>
<span class="c1">#                 &#39;color&#39;: &#39;#ffaa77&#39;, &#39;label&#39;: f&quot;$\hat y = {intercept:.4f} + {slope:.4f} x$&quot;}) # 這樣才有 regression model</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x_name</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y_name</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Line Plot for </span><span class="si">{</span><span class="n">y_name</span><span class="si">}</span><span class="s1"> against </span><span class="si">{</span><span class="n">x_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()[::</span><span class="mi">12</span><span class="p">])</span> <span class="c1"># show the data of the first month for each year</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="n">x</span><span class="o">=.</span><span class="mi">01</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_144_0.png" /></p>
<p>通常五月和十一月附近是高峰期，但這個現象在後期有點被打亂，所以做出來的預測結果不為完全正確。</p>
<div class="highlight"><pre><span></span><code><span class="n">des_df</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">ts</span><span class="o">.</span><span class="n">smoothing</span><span class="p">(</span><span class="n">rev_by_month_df</span><span class="p">,</span> <span class="n">y_name</span><span class="p">,</span> <span class="n">x_name</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="s1">&#39;cma&#39;</span><span class="p">)</span>
<span class="n">des_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="n">des_y_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Des_</span><span class="si">{</span><span class="n">y_name</span><span class="si">}</span><span class="s1">&#39;</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rev_by_month_df</span><span class="p">[</span><span class="n">x_name</span><span class="p">],</span> <span class="n">rev_by_month_df</span><span class="p">[</span><span class="n">y_name</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;dodgerblue&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">y_name</span><span class="si">}</span><span class="s1"> vs </span><span class="si">{</span><span class="n">x_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rev_by_month_df</span><span class="p">[</span><span class="n">x_name</span><span class="p">],</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">r_value</span><span class="p">,</span> <span class="n">p_value</span><span class="p">,</span> <span class="n">std_err</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span><span class="n">des_df</span><span class="p">[</span><span class="n">x_name</span><span class="p">],</span> <span class="n">des_df</span><span class="p">[</span><span class="n">des_y_name</span><span class="p">])</span>  <span class="c1"># order matters</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x_name</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">des_y_name</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">des_df</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;dodgerblue&#39;</span><span class="p">,</span> <span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#ffaa77&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Regression: $\hat y = </span><span class="si">{</span><span class="n">intercept</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> + </span><span class="si">{</span><span class="n">slope</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> x$&quot;</span><span class="p">})</span> <span class="c1"># 這樣才有 regression model</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">des_df</span><span class="p">[</span><span class="n">des_y_name</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Deasoned </span><span class="si">{</span><span class="n">y_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;purple&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x_name</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y_name</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Line Plot for </span><span class="si">{</span><span class="n">y_name</span><span class="si">}</span><span class="s1"> against </span><span class="si">{</span><span class="n">x_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()[::</span><span class="mi">12</span><span class="p">])</span> <span class="c1"># show the data of the first month for each year</span>
<span class="n">mgt2001</span><span class="o">.</span><span class="n">add_margin</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.02</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_146_0.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">dd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">des_df</span><span class="p">[</span><span class="s1">&#39;SeaIdx&#39;</span><span class="p">][:</span><span class="mi">12</span><span class="p">])</span>
<span class="n">dd</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">dd</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">%</span> <span class="mi">12</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">dd</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dd</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">dd</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SeaIdx</th>
      <th>Month</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.734253</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.854297</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.756213</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1.661689</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.488648</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1.253085</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.721391</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.559422</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.837616</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1.293132</td>
      <td>11.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1.236277</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>0.603975</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div>

<p>呈上，確實根據我們所算出的結果，我們可以看出一個 monthly pattern，通常在 5、6、7 月時，票房會呈現一個上升的趨勢；在 11、12 月時，又是另一個高峰期。</p>
<div class="highlight"><pre><span></span><code><span class="n">x_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">x_name</span><span class="p">]</span>
<span class="n">res_dict</span><span class="p">,</span> <span class="n">assessment</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">MultipleRegression</span><span class="p">(</span><span class="n">x_names</span><span class="o">=</span><span class="n">x_names</span><span class="p">,</span> <span class="n">y_name</span><span class="o">=</span><span class="n">des_y_name</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">des_df</span><span class="p">,</span> <span class="n">assessment</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">t_test_c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t_test_option</span><span class="o">=</span><span class="s1">&#39;two-tail&#39;</span><span class="p">)</span>
<span class="n">df_result</span> <span class="o">=</span> <span class="n">res_dict</span><span class="p">[</span><span class="s1">&#39;df_result&#39;</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:            Des_revenue   R-squared:                       0.059
Model:                            OLS   Adj. R-squared:                  0.055
Method:                 Least Squares   F-statistic:                     14.88
Date:                Sat, 26 Jun 2021   Prob (F-statistic):           0.000148
Time:                        16:04:10   Log-Likelihood:                -4589.4
No. Observations:                 241   AIC:                             9183.
Df Residuals:                     239   BIC:                             9190.
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
const       1.271e+08   5.82e+06     21.852      0.000    1.16e+08    1.39e+08
Time        1.617e+05   4.19e+04      3.857      0.000    7.91e+04    2.44e+05
==============================================================================
Omnibus:                       20.725   Durbin-Watson:                   2.238
Prob(Omnibus):                  0.000   Jarque-Bera (JB):               24.682
Skew:                           0.656   Prob(JB):                     4.37e-06
Kurtosis:                       3.860   Cond. No.                         277.
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.

======= Multiple Regression Results =======
Dep. Variable: Des_revenue
No. of Observations (n): 241
No. of Ind. Vairable (k): 1
Mean of Dep. Variable: 146482347.7432
Standard Deviation of Dep. Variable: 46570592.4966
Standard Error: 45280073.8739 (ȳ = 146482347.7432)
SSR: 490018136517054912.0000

R-square: 0.0586
Adjusted R-square: 0.0547
Difference (≤ 0.06 True): 0.0039389410855144025

Estimated model: ŷ = 127078377.7644 + 161699.7498 x1

&lt;F-test&gt;
F(observed value):  14.8753
p-value:  0.0001 (Overwhelming Evidence)
Reject H_0 (The model is valid: at least one beta_i ≠ 0) → True
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">new_t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">rev_by_month_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rev_by_month_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">df_result</span> <span class="o">=</span> <span class="n">res_dict</span><span class="p">[</span><span class="s1">&#39;df_result&#39;</span><span class="p">]</span>
<span class="n">pdf</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">ts</span><span class="o">.</span><span class="n">seasonal_prediction</span><span class="p">(</span><span class="n">des_df</span><span class="p">,</span> <span class="n">df_result</span><span class="p">,</span> <span class="n">y_name</span><span class="p">,</span> <span class="n">x_name</span><span class="p">,</span> <span class="n">new_t</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="s1">&#39;cma&#39;</span><span class="p">)</span> <span class="c1"># from smoothing_option</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>release_date</th>
      <th>revenue</th>
      <th>budget</th>
      <th>ROI</th>
      <th>log_revenue</th>
      <th>log_budget</th>
      <th>log_ROI</th>
      <th>Time</th>
      <th>month</th>
      <th>SID</th>
      <th>SeaIdx</th>
      <th>orig</th>
      <th>Des_revenue</th>
      <th>Pre_revenue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>241</th>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>241.0</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>0.854297</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.418544e+08</td>
    </tr>
    <tr>
      <th>242</th>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>242.0</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>0.756213</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.256899e+08</td>
    </tr>
    <tr>
      <th>243</th>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>243.0</td>
      <td>NaN</td>
      <td>4.0</td>
      <td>1.661689</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.764576e+08</td>
    </tr>
    <tr>
      <th>244</th>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>244.0</td>
      <td>NaN</td>
      <td>5.0</td>
      <td>1.488648</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.479091e+08</td>
    </tr>
    <tr>
      <th>245</th>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>245.0</td>
      <td>NaN</td>
      <td>6.0</td>
      <td>1.253085</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.088828e+08</td>
    </tr>
    <tr>
      <th>246</th>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>246.0</td>
      <td>NaN</td>
      <td>7.0</td>
      <td>0.721391</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.203688e+08</td>
    </tr>
    <tr>
      <th>247</th>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>247.0</td>
      <td>NaN</td>
      <td>8.0</td>
      <td>0.559422</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>9.343375e+07</td>
    </tr>
    <tr>
      <th>248</th>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>248.0</td>
      <td>NaN</td>
      <td>9.0</td>
      <td>0.837616</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.400326e+08</td>
    </tr>
    <tr>
      <th>249</th>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>249.0</td>
      <td>NaN</td>
      <td>10.0</td>
      <td>1.293132</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.163948e+08</td>
    </tr>
    <tr>
      <th>250</th>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>250.0</td>
      <td>NaN</td>
      <td>11.0</td>
      <td>1.236277</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.070805e+08</td>
    </tr>
    <tr>
      <th>251</th>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>251.0</td>
      <td>NaN</td>
      <td>12.0</td>
      <td>0.603975</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.012655e+08</td>
    </tr>
    <tr>
      <th>252</th>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>252.0</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.734253</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.232273e+08</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">post_rev_ts</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="p">[[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;release_date&#39;</span><span class="p">,</span> <span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="s1">&#39;budget&#39;</span><span class="p">,</span> <span class="s1">&#39;ROI&#39;</span><span class="p">,</span> <span class="s1">&#39;TW_release_date&#39;</span><span class="p">,</span> <span class="s1">&#39;log_revenue&#39;</span><span class="p">,</span> <span class="s1">&#39;log_budget&#39;</span><span class="p">,</span> <span class="s1">&#39;log_ROI&#39;</span><span class="p">]][</span><span class="n">u_movie_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">covid_date</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;release_date&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">post_rev_df</span> <span class="o">=</span> <span class="n">post_rev_ts</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;release_date&#39;</span><span class="p">)</span>

<span class="n">post_rev_by_month_df</span> <span class="o">=</span> <span class="n">post_rev_df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
<span class="n">post_rev_by_month_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">post_rev_by_month_df</span><span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">post_rev_by_month_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
<span class="n">post_rev_by_month_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">post_rev_by_month_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="s1">&#39;%Y-%m&#39;</span><span class="p">))</span>
<span class="n">post_rev_by_month_df</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">post_rev_by_month_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">post_rev_by_month_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="n">post_rev_by_month_df</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;AxesSubplot:&gt;
</code></pre></div>
<p><img alt="png" src="../output_151_1.png" /></p>
<p>該 model 的解釋力非常差，因此這個標準並不適用於後續的預測上。</p>
<p><strong>季線</strong>：以季節為單位</p>
<p>在這裏，我們將季節分為春夏秋冬（1, 2, 3, 4）。通常，冬天和夏天是兩大我們較為熟悉的電影季節。除了有暑假與寒假之外，我們也可以透過上面所做過的 visual analysis 看出冬天時節上映的電影較多。但我們真正好奇的是，既然冬天上映較多電影，他的票房有沒有也較平均來的高呢？</p>
<div class="highlight"><pre><span></span><code><span class="n">rev_by_quarter_df</span> <span class="o">=</span> <span class="n">rev_df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;Q-NOV&#39;</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="s1">&#39;end&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
<span class="n">rev_by_quarter_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">rev_by_quarter_df</span><span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rev_by_quarter_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
<span class="n">rev_by_quarter_df</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">rev_by_quarter_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">rev_by_quarter_df</span><span class="p">[</span><span class="s1">&#39;Quarter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rev_by_quarter_df</span><span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mi">2</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="n">rev_by_quarter_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>release_date</th>
      <th>revenue</th>
      <th>budget</th>
      <th>ROI</th>
      <th>log_revenue</th>
      <th>log_budget</th>
      <th>log_ROI</th>
      <th>Time</th>
      <th>month</th>
      <th>Quarter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2000-02-29</td>
      <td>8.170775e+07</td>
      <td>3.190000e+07</td>
      <td>1.704464</td>
      <td>18.007960</td>
      <td>17.146781</td>
      <td>0.861179</td>
      <td>0</td>
      <td>2</td>
      <td>4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2000-05-31</td>
      <td>1.303390e+08</td>
      <td>4.788462e+07</td>
      <td>2.771565</td>
      <td>18.221209</td>
      <td>17.364784</td>
      <td>0.856425</td>
      <td>1</td>
      <td>5</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2000-08-31</td>
      <td>1.441638e+08</td>
      <td>5.296250e+07</td>
      <td>3.113528</td>
      <td>18.498805</td>
      <td>17.398395</td>
      <td>1.100411</td>
      <td>2</td>
      <td>8</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2000-11-30</td>
      <td>1.120160e+08</td>
      <td>5.549966e+07</td>
      <td>5.830097</td>
      <td>18.003308</td>
      <td>17.283450</td>
      <td>0.719858</td>
      <td>3</td>
      <td>11</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2001-02-28</td>
      <td>1.302364e+08</td>
      <td>4.708095e+07</td>
      <td>2.696586</td>
      <td>18.218020</td>
      <td>17.332628</td>
      <td>0.885392</td>
      <td>4</td>
      <td>2</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">rev_by_quarter_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Quarter&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>revenue</th>
      <th>budget</th>
      <th>ROI</th>
      <th>log_revenue</th>
      <th>log_budget</th>
      <th>log_ROI</th>
      <th>Time</th>
      <th>month</th>
    </tr>
    <tr>
      <th>Quarter</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>1.547893e+08</td>
      <td>5.290951e+07</td>
      <td>2.978619</td>
      <td>18.051562</td>
      <td>17.244645</td>
      <td>0.806917</td>
      <td>39</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.682057e+08</td>
      <td>5.564069e+07</td>
      <td>3.349218</td>
      <td>18.216457</td>
      <td>17.268858</td>
      <td>0.947599</td>
      <td>40</td>
      <td>8</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1.237739e+08</td>
      <td>4.245522e+07</td>
      <td>3.084763</td>
      <td>17.793384</td>
      <td>17.064763</td>
      <td>0.728621</td>
      <td>41</td>
      <td>11</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.302427e+08</td>
      <td>4.449312e+07</td>
      <td>3.480518</td>
      <td>18.059940</td>
      <td>17.162876</td>
      <td>0.897064</td>
      <td>40</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">x_name</span> <span class="o">=</span> <span class="s1">&#39;Time&#39;</span>
<span class="n">y_name</span> <span class="o">=</span> <span class="s1">&#39;revenue&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rev_by_quarter_df</span><span class="p">[</span><span class="n">x_name</span><span class="p">],</span> <span class="n">rev_by_quarter_df</span><span class="p">[</span><span class="n">y_name</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;dodgerblue&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">y_name</span><span class="si">}</span><span class="s1"> vs </span><span class="si">{</span><span class="n">x_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rev_by_quarter_df</span><span class="p">[</span><span class="n">x_name</span><span class="p">],</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x_name</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y_name</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Line Plot for </span><span class="si">{</span><span class="n">y_name</span><span class="si">}</span><span class="s1"> against </span><span class="si">{</span><span class="n">x_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()[::</span><span class="mi">12</span><span class="p">])</span> <span class="c1"># show the data of the first month for each year</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="n">x</span><span class="o">=.</span><span class="mi">01</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_157_0.png" /></p>
<p>轉換成季節之後，我們可以看到<strong>夏天</strong>通常會是票房的高峰期。</p>
<div class="highlight"><pre><span></span><code><span class="n">des_df</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">ts</span><span class="o">.</span><span class="n">smoothing</span><span class="p">(</span><span class="n">rev_by_quarter_df</span><span class="p">,</span> <span class="n">y_name</span><span class="p">,</span> <span class="n">x_name</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="s1">&#39;cma&#39;</span><span class="p">)</span>
<span class="n">des_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="n">des_y_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Des_</span><span class="si">{</span><span class="n">y_name</span><span class="si">}</span><span class="s1">&#39;</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rev_by_quarter_df</span><span class="p">[</span><span class="n">x_name</span><span class="p">],</span> <span class="n">rev_by_quarter_df</span><span class="p">[</span><span class="n">y_name</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;dodgerblue&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">y_name</span><span class="si">}</span><span class="s1"> vs </span><span class="si">{</span><span class="n">x_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rev_by_quarter_df</span><span class="p">[</span><span class="n">x_name</span><span class="p">],</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">r_value</span><span class="p">,</span> <span class="n">p_value</span><span class="p">,</span> <span class="n">std_err</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span><span class="n">des_df</span><span class="p">[</span><span class="n">x_name</span><span class="p">],</span> <span class="n">des_df</span><span class="p">[</span><span class="n">des_y_name</span><span class="p">])</span>  <span class="c1"># order matters</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x_name</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">des_y_name</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">des_df</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;dodgerblue&#39;</span><span class="p">,</span> <span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#ffaa77&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Regression: $\hat y = </span><span class="si">{</span><span class="n">intercept</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> + </span><span class="si">{</span><span class="n">slope</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> x$&quot;</span><span class="p">})</span> <span class="c1"># 這樣才有 regression model</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">des_df</span><span class="p">[</span><span class="n">des_y_name</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Deasoned </span><span class="si">{</span><span class="n">y_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;purple&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x_name</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y_name</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Line Plot for </span><span class="si">{</span><span class="n">y_name</span><span class="si">}</span><span class="s1"> against </span><span class="si">{</span><span class="n">x_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()[::</span><span class="mi">12</span><span class="p">])</span> <span class="c1"># show the data of the first month for each year</span>
<span class="n">mgt2001</span><span class="o">.</span><span class="n">add_margin</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.02</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_159_0.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">dd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">des_df</span><span class="p">[</span><span class="s1">&#39;SeaIdx&#39;</span><span class="p">][:</span><span class="mi">4</span><span class="p">])</span>
<span class="n">dd</span><span class="p">[</span><span class="s1">&#39;Quarter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">dd</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">dd</span><span class="p">[</span><span class="s1">&#39;Quarter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dd</span><span class="p">[</span><span class="s1">&#39;Quarter&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">dd</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SeaIdx</th>
      <th>Quarter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.906559</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.076810</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.164830</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.851801</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div>

<p>根據我們所算出的結果，我們確實可以看出一個 seasonal pattern，秋季和冬季反而變成兩大高峰期。<br />
從這裡已經沒有必要繼續往下做了，我們可以總結出，雖然乍看之下電影票房有季節性的變化，但仍是難以預測的。</p>
<div class="highlight"><pre><span></span><code><span class="n">movie_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;../data/sorted_all_movie.xlsx&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;openpyxl&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">covid_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">movie_df</span><span class="p">[</span><span class="s1">&#39;has_collection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">movie_df</span><span class="p">[</span><span class="s1">&#39;belongs_to_collection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="kc">True</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">False</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="n">movie_df</span><span class="p">[</span><span class="s1">&#39;pre_covid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">movie_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">covid_date</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="kc">True</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">False</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
<span class="n">movie_df</span><span class="p">[</span><span class="s1">&#39;post_covid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">movie_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">covid_date</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="kc">True</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">False</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
<span class="n">movie_df</span><span class="p">[</span><span class="s1">&#39;release_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">movie_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
<span class="n">movie_df</span><span class="p">[</span><span class="s1">&#39;release_month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">movie_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>

<span class="c1"># Plot</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">row</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">month_movie_df</span> <span class="o">=</span> <span class="n">movie_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">month_movie_df</span><span class="p">[</span><span class="s1">&#39;release_month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">month_movie_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">month_movie_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">100</span><span class="p">)[[</span><span class="s1">&#39;release_date&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;zh_title&#39;</span><span class="p">,</span> <span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="s1">&#39;release_month&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;release_month&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Before Removing Outliers</span><span class="se">\n</span><span class="s1">Top 100 Movies (defined by Revenue) by Month&#39;</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">100</span><span class="p">)[[</span><span class="s1">&#39;release_date&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;zh_title&#39;</span><span class="p">,</span> <span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="s1">&#39;release_month&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;release_month&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;After Removing Outliers</span><span class="se">\n</span><span class="s1">Top 100 Movies (defined by Revenue) by Month&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_162_0.png" /></p>
<p>從上面表格我們可以看出，在移除 outlier 前後，排名前 100 的電影，都在 5, 6 月佔了大多數，這點從 monthly trend 中也能看出。<br />
而另一個高峰期，確實出現在 11 或 12 月。可以看到 1 月上映的電影都不曾出現在百大電影裡面。</p>
<p>因為電影牽涉到太多人為因素，實在不能百分之百肯定地說一定什麼月份票房比較好。</p>
<p><strong>回到正題，所以過年時真的有因為這歡樂的氣氛導致票房更高嗎？</strong></p>
<p>我們預期：每年在聖誕假期（12/24 ~ &#8531;）的電影票房都會比較好。這裏的資料在上面已經處理完畢。</p>
<p>雖然顯示為沒有，但我們還是做一個更為精準的分析，使用的是 <span class="arithmatex">\(t\)</span>-test and estimator of <span class="arithmatex">\(\mu_1 - \mu_2\)</span>.</p>
<p><strong>Check Normality</strong></p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: The population is normally distributed.  </li>
<li><span class="arithmatex">\(H_1\)</span>: The population is not normally distributed.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">xmas_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;no&#39;</span><span class="p">:</span> <span class="n">rev_ts</span><span class="p">[</span><span class="n">rev_ts</span><span class="o">.</span><span class="n">is_xmas</span> <span class="o">==</span> <span class="mi">0</span><span class="p">][</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">})</span>
<span class="n">xmas_df</span><span class="p">[</span><span class="s1">&#39;yes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rev_ts</span><span class="p">[</span><span class="n">rev_ts</span><span class="o">.</span><span class="n">is_xmas</span> <span class="o">==</span> <span class="mi">1</span><span class="p">][</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">y_xmas</span> <span class="o">=</span> <span class="n">xmas_df</span><span class="p">[</span><span class="s1">&#39;yes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">n_xmas</span> <span class="o">=</span> <span class="n">xmas_df</span><span class="p">[</span><span class="s1">&#39;no&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">xmas_df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 2532 entries, 0 to 2531
Data columns (total 2 columns):
 #   Column  Non-Null Count  Dtype  
---  ------  --------------  -----  
 0   no      2532 non-null   int64  
 1   yes     225 non-null    float64
dtypes: float64(1), int64(1)
memory usage: 39.7 KB
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">y_xmas</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">n_xmas</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_166_0.png" /></p>
<p>因為資料不是常態分佈，因此我們使用 Wilcoxon Rank Sum Test 來做檢定。</p>
<p><strong>Wilcoxon Rank Sum Test</strong></p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: The two population locations are the same.  </li>
<li><span class="arithmatex">\(H_1\)</span>: Population 1 (y_xmas) is located to the right (n_xmas) of population 2 (greater).  </li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">n1</span> <span class="o">=</span> <span class="n">y_xmas</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">n2</span> <span class="o">=</span> <span class="n">n_xmas</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Both datasets have sizes larger than 10.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">updated_df</span><span class="p">,</span> <span class="n">result_dict</span> <span class="o">=</span> <span class="n">non</span><span class="o">.</span><span class="n">ranksum_z_test</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">xmas_df</span><span class="p">,</span> <span class="n">to_compute</span><span class="o">=</span><span class="s1">&#39;no&#39;</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;less&#39;</span><span class="p">)</span> 
</code></pre></div>
<div class="highlight"><pre><span></span><code>Both datasets have sizes larger than 10.

======= z-test =======
T (sum of ranks) = 3447837.0
(n1, n2) = (2532, 225)
mu_t = 3491628.0
sigma_t = 11442.729132510303
z statistic value (observed) = -3.8270
p-value = 0.0001 (Overwhelming Evidence)
Reject H_0 (less) → True
</code></pre></div>
<p>In this case, we can perform the standardized test, since both sample sizes are larger than 10. The <span class="arithmatex">\(p\)</span>-value of the standardized test is <span class="arithmatex">\(0.0000 &lt; 0.05\)</span>, which means that we can reject the null hypothesis.</p>
<p>結論：聖誕節所上映的電影確實較剩餘年度的票房要高。</p>
<h4 id="3_1">3. 夏天的電影比較熱門？<a class="headerlink" href="#3_1" title="Permanent link">&para;</a></h4>
<p>因為有南北半球的問題，我們在這邊先行省略南半球的天氣。在此，夏天的意思是指 6、7、8 月。  </p>
<p>透過上面的視覺化分析，我們預期夏天的電影可能會較其他季節來的更夯一些。</p>
<div class="highlight"><pre><span></span><code><span class="n">cond</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;release_month&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;release_month&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;release_month&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">8</span><span class="p">)</span> 
<span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;Season&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;release_month&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mi">12</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="n">rev_ts</span><span class="p">[</span><span class="s1">&#39;Summer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cond</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="kc">True</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">False</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">rev_ts</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>release_date</th>
      <th>revenue</th>
      <th>budget</th>
      <th>ROI</th>
      <th>TW_release_date</th>
      <th>log_revenue</th>
      <th>log_budget</th>
      <th>log_ROI</th>
      <th>Time</th>
      <th>is_xmas</th>
      <th>release_year</th>
      <th>release_month</th>
      <th>Season</th>
      <th>Summer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Scream 3</td>
      <td>2000-02-03</td>
      <td>161834276</td>
      <td>40000000</td>
      <td>3.045857</td>
      <td>NaN</td>
      <td>18.902083</td>
      <td>17.504390</td>
      <td>1.397693</td>
      <td>10990.0</td>
      <td>0</td>
      <td>2000</td>
      <td>2</td>
      <td>4</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>The Beach</td>
      <td>2000-02-03</td>
      <td>144056873</td>
      <td>40000000</td>
      <td>2.601422</td>
      <td>NaN</td>
      <td>18.785719</td>
      <td>17.504390</td>
      <td>1.281329</td>
      <td>10990.0</td>
      <td>0</td>
      <td>2000</td>
      <td>2</td>
      <td>4</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>The Tigger Movie</td>
      <td>2000-02-11</td>
      <td>45554533</td>
      <td>30000000</td>
      <td>0.518484</td>
      <td>NaN</td>
      <td>17.634421</td>
      <td>17.216708</td>
      <td>0.417713</td>
      <td>10998.0</td>
      <td>0</td>
      <td>2000</td>
      <td>2</td>
      <td>4</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Boiler Room</td>
      <td>2000-02-18</td>
      <td>28780255</td>
      <td>7000000</td>
      <td>3.111465</td>
      <td>NaN</td>
      <td>17.175200</td>
      <td>15.761421</td>
      <td>1.413779</td>
      <td>11005.0</td>
      <td>0</td>
      <td>2000</td>
      <td>2</td>
      <td>4</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>The Whole Nine Yards</td>
      <td>2000-02-18</td>
      <td>106371651</td>
      <td>41300000</td>
      <td>1.575585</td>
      <td>NaN</td>
      <td>18.482450</td>
      <td>17.536373</td>
      <td>0.946077</td>
      <td>11005.0</td>
      <td>0</td>
      <td>2000</td>
      <td>2</td>
      <td>4</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">multi_variable_plot</span><span class="p">(</span><span class="n">x_name</span><span class="o">=</span><span class="n">x_name</span><span class="p">,</span> <span class="n">y_name</span><span class="o">=</span><span class="n">y_name</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">rev_ts</span><span class="p">,</span> <span class="n">indicator</span><span class="o">=</span><span class="s1">&#39;Season&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;Spring&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Summer&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;Fall&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;Winter&#39;</span><span class="p">},</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;summer&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../output_174_0.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">long_df</span> <span class="o">=</span> <span class="n">rev_ts</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">long_df</span> <span class="o">=</span> <span class="n">long_df</span><span class="p">[[</span><span class="s1">&#39;Season&#39;</span><span class="p">,</span> <span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="s1">&#39;log_revenue&#39;</span><span class="p">]]</span> <span class="c1"># .dropna()</span>
<span class="n">treatment_name_list</span> <span class="o">=</span> <span class="n">long_df</span><span class="p">[</span><span class="s1">&#39;Season&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span> 
<span class="n">display</span><span class="p">(</span><span class="n">long_df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Season</th>
      <th>revenue</th>
      <th>log_revenue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>4</td>
      <td>161834276</td>
      <td>18.902083</td>
    </tr>
    <tr>
      <th>1</th>
      <td>4</td>
      <td>144056873</td>
      <td>18.785719</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4</td>
      <td>45554533</td>
      <td>17.634421</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>28780255</td>
      <td>17.175200</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>106371651</td>
      <td>18.482450</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">display</span><span class="p">(</span><span class="n">long_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Season&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="8" halign="left">revenue</th>
      <th colspan="8" halign="left">log_revenue</th>
    </tr>
    <tr>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>Season</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>623.0</td>
      <td>1.545394e+08</td>
      <td>2.061811e+08</td>
      <td>956425.0</td>
      <td>26249744.5</td>
      <td>73983359.0</td>
      <td>1.771306e+08</td>
      <td>1.153296e+09</td>
      <td>623.0</td>
      <td>18.012896</td>
      <td>1.444365</td>
      <td>13.770959</td>
      <td>17.083167</td>
      <td>18.119351</td>
      <td>18.992390</td>
      <td>20.865890</td>
    </tr>
    <tr>
      <th>2</th>
      <td>668.0</td>
      <td>1.680043e+08</td>
      <td>2.089677e+08</td>
      <td>924793.0</td>
      <td>38361373.0</td>
      <td>93183493.0</td>
      <td>2.098657e+08</td>
      <td>1.131928e+09</td>
      <td>668.0</td>
      <td>18.190050</td>
      <td>1.408470</td>
      <td>13.737326</td>
      <td>17.462540</td>
      <td>18.350079</td>
      <td>19.161978</td>
      <td>20.847188</td>
    </tr>
    <tr>
      <th>3</th>
      <td>792.0</td>
      <td>1.217234e+08</td>
      <td>1.754227e+08</td>
      <td>992181.0</td>
      <td>19010562.0</td>
      <td>56759438.5</td>
      <td>1.452186e+08</td>
      <td>1.108561e+09</td>
      <td>792.0</td>
      <td>17.737752</td>
      <td>1.468545</td>
      <td>13.807662</td>
      <td>16.760497</td>
      <td>17.854315</td>
      <td>18.793751</td>
      <td>20.826329</td>
    </tr>
    <tr>
      <th>4</th>
      <td>674.0</td>
      <td>1.315140e+08</td>
      <td>1.662886e+08</td>
      <td>970816.0</td>
      <td>32645332.0</td>
      <td>76735492.5</td>
      <td>1.602227e+08</td>
      <td>1.148462e+09</td>
      <td>674.0</td>
      <td>18.049567</td>
      <td>1.238129</td>
      <td>13.785893</td>
      <td>17.301209</td>
      <td>18.155875</td>
      <td>18.892075</td>
      <td>20.861689</td>
    </tr>
  </tbody>
</table>
</div>

<p>夏天的電影票房確實有略高一點！</p>
<p><strong>Check Normality</strong></p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: The population is normally distributed.  </li>
<li><span class="arithmatex">\(H_1\)</span>: The population is not normally distributed.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">anova</span><span class="o">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">long_df</span><span class="p">,</span> <span class="n">treatment_name_list</span><span class="p">,</span> <span class="s1">&#39;Season&#39;</span><span class="p">,</span> <span class="s1">&#39;revenue&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>1: Statistics=0.6762, p=0.0000
2: Statistics=0.7036, p=0.0000
3: Statistics=0.7174, p=0.0000
4: Statistics=0.6513, p=0.0000
</code></pre></div>
<p>以上四個 <span class="arithmatex">\(p\)</span>-value 都小於 0.05，代表所有資料都不是常態分佈，所以我們使用 Kruskal-Wallis Test。</p>
<p><strong>Kruskal-Wallis Test</strong></p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: The locations of all the <span class="arithmatex">\(4\)</span> populations are the same.  </li>
<li><span class="arithmatex">\(H_1\)</span>: Not all <span class="arithmatex">\(4\)</span> population locations are the same.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">long_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Season&#39;</span><span class="p">)</span>

<span class="n">short_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">long_df</span><span class="p">[</span><span class="n">long_df</span><span class="p">[</span><span class="s1">&#39;Season&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">][</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">long_df</span><span class="p">[</span><span class="n">long_df</span><span class="p">[</span><span class="s1">&#39;Season&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span><span class="p">][</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">long_df</span><span class="p">[</span><span class="n">long_df</span><span class="p">[</span><span class="s1">&#39;Season&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">][</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">long_df</span><span class="p">[</span><span class="n">long_df</span><span class="p">[</span><span class="s1">&#39;Season&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">][</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">short_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="c1"># short_df[2].dropna().shape</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">_</span> <span class="o">=</span> <span class="n">non</span><span class="o">.</span><span class="n">kruskal_chi2_test</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">short_df</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>======= Kruskal-Wallis Test with Chi-squared Test =======
(All sample size &gt;= 5)

H statistic value (observed) = 41.4993
chi2 critical value = 7.8147
p-value = 0.0000 (Overwhelming Evidence)
Reject H_0 (Not all 4 population locations are the same) → True
</code></pre></div>
<p>上述結果僅能告訴我們，這四個季節的票房變化，確實有所差異。所以我們進一步用 Wilcoxon Rank Sum Test 來應證夏天電影相較於其他季節要高的事實。</p>
<p><strong>Wilcoxon Rank Sum Test</strong></p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: The two population locations are the same.  </li>
<li>
<p><span class="arithmatex">\(H_1\)</span>: Population 2 is located to the right of the other population (greater).</p>
</li>
<li>
<p>夏天 vs. 冬天</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">n1</span> <span class="o">=</span> <span class="n">short_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">n2</span> <span class="o">=</span> <span class="n">short_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Both datasets have sizes larger than 10.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">updated_df</span><span class="p">,</span> <span class="n">result_dict</span> <span class="o">=</span> <span class="n">non</span><span class="o">.</span><span class="n">ranksum_z_test</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">short_df</span><span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="n">to_compute</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;greater&#39;</span><span class="p">)</span> <span class="c1"># </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Both datasets have sizes larger than 10.

======= z-test =======
T (sum of ranks) = 467979
(n1, n2) = (668, 674)
mu_t = 448562.0
sigma_t = 7098.483265224105
z statistic value (observed) = 2.7354
p-value = 0.0031 (Overwhelming Evidence)
Reject H_0 (greater) → True
</code></pre></div>
<ul>
<li>夏天 vs. 秋天</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">n1</span> <span class="o">=</span> <span class="n">short_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">n2</span> <span class="o">=</span> <span class="n">short_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Both datasets have sizes larger than 10.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">updated_df</span><span class="p">,</span> <span class="n">result_dict</span> <span class="o">=</span> <span class="n">non</span><span class="o">.</span><span class="n">ranksum_z_test</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">short_df</span><span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="n">to_compute</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;greater&#39;</span><span class="p">)</span> <span class="c1"># </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Both datasets have sizes larger than 10.

======= z-test =======
T (sum of ranks) = 537890.0
(n1, n2) = (668, 792)
mu_t = 487974.0
sigma_t = 8025.744077654109
z statistic value (observed) = 6.2195
p-value = 0.0000 (Overwhelming Evidence)
Reject H_0 (greater) → True
</code></pre></div>
<ul>
<li>夏天 vs. 春天</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">n1</span> <span class="o">=</span> <span class="n">short_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">n2</span> <span class="o">=</span> <span class="n">short_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Both datasets have sizes larger than 10.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">updated_df</span><span class="p">,</span> <span class="n">result_dict</span> <span class="o">=</span> <span class="n">non</span><span class="o">.</span><span class="n">ranksum_z_test</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">short_df</span><span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="n">to_compute</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;greater&#39;</span><span class="p">)</span> <span class="c1"># </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Both datasets have sizes larger than 10.

======= z-test =======
T (sum of ranks) = 449577
(n1, n2) = (668, 623)
mu_t = 431528.0
sigma_t = 6693.802407202252
z statistic value (observed) = 2.6964
p-value = 0.0035 (Overwhelming Evidence)
Reject H_0 (greater) → True
</code></pre></div>
<p>因為以上 3 個檢定的 <span class="arithmatex">\(p\)</span>-value 都小於 0.05，有足夠的證據顯示夏天的票房高於其他三季。<br />
此結果與我們預期的相符。有點意外的是，在<a href="#2-過年大片是不是真的比較夯">2. 過年大片是不是真的比較夯？</a>的分析中，我們可以總結出聖誕季節（包含 1/1 新年）時所上映的電影平均來說真的有較高的趨勢。以季節性來說，卻不是如此。我們可以看到夏天的電影平均來說有較高的票房，其次是春天，冬天與秋天都遠不及夏天所創下的票房。</p>
<h3 id="_9">八、票房預測<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>經過前述各種變數的分析，我們希望可以找出對於票房有影響力的變數組合，並試著預測有哪些特質的電影會有比較好的票房。</p>
<p>我們曾嘗試採用 time-series regression model 但成效並不好，因為期數每年都不太一樣（可以見上面 Time Series 部分），所以最後依舊選擇複迴歸模型進行預測。</p>
<div class="highlight"><pre><span></span><code><span class="n">regression_df</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="p">[(</span><span class="n">u_movie_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">u_movie_df</span><span class="p">[</span><span class="s1">&#39;release_date&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">))]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">regression_df</span><span class="p">[</span><span class="s1">&#39;cast_popularity_ave&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">regression_df</span><span class="o">.</span><span class="n">cast_popularity_ave</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">regression_df</span><span class="o">.</span><span class="n">cast_popularity_ave</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
<span class="n">regression_df</span><span class="p">[</span><span class="s1">&#39;rotten_score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">regression_df</span><span class="p">[</span><span class="s1">&#39;rotten_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">regression_df</span><span class="p">[</span><span class="s1">&#39;rotten_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
<span class="n">regression_df</span><span class="p">[</span><span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">regression_df</span><span class="p">[</span><span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">regression_df</span><span class="p">[</span><span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">x_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;budget&#39;</span><span class="p">,</span> <span class="s1">&#39;runtime&#39;</span><span class="p">,</span> <span class="s1">&#39;cast_cnt&#39;</span><span class="p">,</span> <span class="s1">&#39;crew_cnt&#39;</span><span class="p">,</span> <span class="s1">&#39;female_cast_cnt&#39;</span><span class="p">,</span>
       <span class="s1">&#39;male_cast_cnt&#39;</span><span class="p">,</span>  <span class="s1">&#39;TMDB_score&#39;</span><span class="p">,</span> <span class="s1">&#39;TMDB_vote_count&#39;</span><span class="p">,</span> <span class="s1">&#39;has_homepage&#39;</span><span class="p">,</span> <span class="s1">&#39;has_collection&#39;</span><span class="p">,</span> <span class="s1">&#39;cast_popularity_ave&#39;</span><span class="p">,</span> <span class="s1">&#39;rotten_score&#39;</span><span class="p">,</span> <span class="s1">&#39;rotten_aud_score&#39;</span><span class="p">]</span>
<span class="n">y_name</span> <span class="o">=</span> <span class="s1">&#39;revenue&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">regression_df</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>(1514, 36)
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">multi_scatter_plot</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">regression_df</span><span class="p">,</span> <span class="n">x_names</span><span class="p">,</span> <span class="n">y_name</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span> <span class="c1"># correlation table included</span>
</code></pre></div>
<p><img alt="png" src="../output_196_0.png" /></p>
<p><img alt="png" src="../output_196_1.png" /></p>
<p>在下方的 DataFrame 我們可以看到 regression 與 ['budget', 'runtime', 'cast_cnt', 'crew_cnt', 'female_cast_cnt', 'male_cast_cnt',  'TMDB_score', 'TMDB_vote_count', 'cast_popularity_ave', 'rotten_score', 'rotten_aud_score'] 這些變數有正向線性關係。</p>
<div class="highlight"><pre><span></span><code><span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">multicollinearity</span><span class="p">(</span><span class="n">regression_df</span><span class="p">,</span> <span class="n">x_names</span><span class="p">,</span> <span class="n">y_name</span><span class="p">)</span>
</code></pre></div>
<style  type="text/css" >
#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row0_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row1_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row2_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row4_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row8_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row9_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row10_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row11_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col12,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col0,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col1,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col2,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col4,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col8,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col9,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col10,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col11,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col13{
            background-color:  default;
        }#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col5,#T_1be7ceba_d655_11eb_ace9_acde48001122row3_col6,#T_1be7ceba_d655_11eb_ace9_acde48001122row5_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row6_col3,#T_1be7ceba_d655_11eb_ace9_acde48001122row7_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row12_col13,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col7,#T_1be7ceba_d655_11eb_ace9_acde48001122row13_col12{
            background-color:  salmon;
        }</style>
<table id="T_1be7ceba_d655_11eb_ace9_acde48001122" ><thead>    <tr>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >revenue</th>        <th class="col_heading level0 col1" >budget</th>        <th class="col_heading level0 col2" >runtime</th>        <th class="col_heading level0 col3" >cast_cnt</th>        <th class="col_heading level0 col4" >crew_cnt</th>        <th class="col_heading level0 col5" >female_cast_cnt</th>        <th class="col_heading level0 col6" >male_cast_cnt</th>        <th class="col_heading level0 col7" >TMDB_score</th>        <th class="col_heading level0 col8" >TMDB_vote_count</th>        <th class="col_heading level0 col9" >has_homepage</th>        <th class="col_heading level0 col10" >has_collection</th>        <th class="col_heading level0 col11" >cast_popularity_ave</th>        <th class="col_heading level0 col12" >rotten_score</th>        <th class="col_heading level0 col13" >rotten_aud_score</th>    </tr></thead><tbody>
                <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row0" class="row_heading level0 row0" >revenue</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col0" class="data row0 col0" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col1" class="data row0 col1" >0.765619</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col2" class="data row0 col2" >0.264829</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col3" class="data row0 col3" >0.497190</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col4" class="data row0 col4" >0.436268</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col5" class="data row0 col5" >0.281785</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col6" class="data row0 col6" >0.501433</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col7" class="data row0 col7" >0.209780</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col8" class="data row0 col8" >0.748879</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col9" class="data row0 col9" >0.225778</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col10" class="data row0 col10" >0.455447</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col11" class="data row0 col11" >0.144059</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col12" class="data row0 col12" >0.152821</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row0_col13" class="data row0 col13" >0.288583</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row1" class="row_heading level0 row1" >budget</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col0" class="data row1 col0" >0.765619</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col1" class="data row1 col1" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col2" class="data row1 col2" >0.309445</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col3" class="data row1 col3" >0.519841</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col4" class="data row1 col4" >0.482312</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col5" class="data row1 col5" >0.245096</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col6" class="data row1 col6" >0.553914</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col7" class="data row1 col7" >0.024463</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col8" class="data row1 col8" >0.562417</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col9" class="data row1 col9" >0.213661</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col10" class="data row1 col10" >0.322544</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col11" class="data row1 col11" >0.198903</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col12" class="data row1 col12" >-0.006060</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row1_col13" class="data row1 col13" >0.127460</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row2" class="row_heading level0 row2" >runtime</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col0" class="data row2 col0" >0.264829</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col1" class="data row2 col1" >0.309445</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col2" class="data row2 col2" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col3" class="data row2 col3" >0.269881</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col4" class="data row2 col4" >0.228017</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col5" class="data row2 col5" >0.127320</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col6" class="data row2 col6" >0.287525</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col7" class="data row2 col7" >0.402429</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col8" class="data row2 col8" >0.357162</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col9" class="data row2 col9" >0.107467</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col10" class="data row2 col10" >-0.014167</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col11" class="data row2 col11" >0.071164</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col12" class="data row2 col12" >0.238099</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row2_col13" class="data row2 col13" >0.347594</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row3" class="row_heading level0 row3" >cast_cnt</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col0" class="data row3 col0" >0.497190</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col1" class="data row3 col1" >0.519841</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col2" class="data row3 col2" >0.269881</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col3" class="data row3 col3" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col4" class="data row3 col4" >0.271317</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col5" class="data row3 col5" >0.728081</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col6" class="data row3 col6" >0.911997</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col7" class="data row3 col7" >0.029799</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col8" class="data row3 col8" >0.425316</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col9" class="data row3 col9" >0.163572</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col10" class="data row3 col10" >0.249845</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col11" class="data row3 col11" >0.089181</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col12" class="data row3 col12" >0.012507</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row3_col13" class="data row3 col13" >0.108507</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row4" class="row_heading level0 row4" >crew_cnt</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col0" class="data row4 col0" >0.436268</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col1" class="data row4 col1" >0.482312</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col2" class="data row4 col2" >0.228017</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col3" class="data row4 col3" >0.271317</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col4" class="data row4 col4" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col5" class="data row4 col5" >0.117649</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col6" class="data row4 col6" >0.295247</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col7" class="data row4 col7" >0.111065</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col8" class="data row4 col8" >0.485268</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col9" class="data row4 col9" >0.170075</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col10" class="data row4 col10" >0.167663</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col11" class="data row4 col11" >0.169040</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col12" class="data row4 col12" >0.115027</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row4_col13" class="data row4 col13" >0.148725</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row5" class="row_heading level0 row5" >female_cast_cnt</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col0" class="data row5 col0" >0.281785</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col1" class="data row5 col1" >0.245096</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col2" class="data row5 col2" >0.127320</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col3" class="data row5 col3" >0.728081</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col4" class="data row5 col4" >0.117649</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col5" class="data row5 col5" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col6" class="data row5 col6" >0.382820</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col7" class="data row5 col7" >0.011706</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col8" class="data row5 col8" >0.254605</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col9" class="data row5 col9" >0.130993</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col10" class="data row5 col10" >0.157882</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col11" class="data row5 col11" >0.054579</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col12" class="data row5 col12" >-0.029827</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row5_col13" class="data row5 col13" >0.023904</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row6" class="row_heading level0 row6" >male_cast_cnt</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col0" class="data row6 col0" >0.501433</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col1" class="data row6 col1" >0.553914</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col2" class="data row6 col2" >0.287525</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col3" class="data row6 col3" >0.911997</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col4" class="data row6 col4" >0.295247</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col5" class="data row6 col5" >0.382820</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col6" class="data row6 col6" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col7" class="data row6 col7" >0.033155</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col8" class="data row6 col8" >0.420834</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col9" class="data row6 col9" >0.142057</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col10" class="data row6 col10" >0.242235</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col11" class="data row6 col11" >0.087527</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col12" class="data row6 col12" >0.034704</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row6_col13" class="data row6 col13" >0.131928</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row7" class="row_heading level0 row7" >TMDB_score</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col0" class="data row7 col0" >0.209780</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col1" class="data row7 col1" >0.024463</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col2" class="data row7 col2" >0.402429</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col3" class="data row7 col3" >0.029799</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col4" class="data row7 col4" >0.111065</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col5" class="data row7 col5" >0.011706</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col6" class="data row7 col6" >0.033155</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col7" class="data row7 col7" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col8" class="data row7 col8" >0.399971</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col9" class="data row7 col9" >0.114755</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col10" class="data row7 col10" >-0.052996</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col11" class="data row7 col11" >-0.032605</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col12" class="data row7 col12" >0.610450</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row7_col13" class="data row7 col13" >0.784524</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row8" class="row_heading level0 row8" >TMDB_vote_count</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col0" class="data row8 col0" >0.748879</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col1" class="data row8 col1" >0.562417</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col2" class="data row8 col2" >0.357162</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col3" class="data row8 col3" >0.425316</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col4" class="data row8 col4" >0.485268</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col5" class="data row8 col5" >0.254605</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col6" class="data row8 col6" >0.420834</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col7" class="data row8 col7" >0.399971</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col8" class="data row8 col8" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col9" class="data row8 col9" >0.242561</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col10" class="data row8 col10" >0.279409</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col11" class="data row8 col11" >0.220179</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col12" class="data row8 col12" >0.277466</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row8_col13" class="data row8 col13" >0.389179</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row9" class="row_heading level0 row9" >has_homepage</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col0" class="data row9 col0" >0.225778</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col1" class="data row9 col1" >0.213661</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col2" class="data row9 col2" >0.107467</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col3" class="data row9 col3" >0.163572</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col4" class="data row9 col4" >0.170075</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col5" class="data row9 col5" >0.130993</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col6" class="data row9 col6" >0.142057</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col7" class="data row9 col7" >0.114755</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col8" class="data row9 col8" >0.242561</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col9" class="data row9 col9" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col10" class="data row9 col10" >0.097774</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col11" class="data row9 col11" >0.075398</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col12" class="data row9 col12" >0.119720</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row9_col13" class="data row9 col13" >0.155257</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row10" class="row_heading level0 row10" >has_collection</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col0" class="data row10 col0" >0.455447</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col1" class="data row10 col1" >0.322544</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col2" class="data row10 col2" >-0.014167</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col3" class="data row10 col3" >0.249845</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col4" class="data row10 col4" >0.167663</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col5" class="data row10 col5" >0.157882</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col6" class="data row10 col6" >0.242235</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col7" class="data row10 col7" >-0.052996</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col8" class="data row10 col8" >0.279409</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col9" class="data row10 col9" >0.097774</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col10" class="data row10 col10" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col11" class="data row10 col11" >0.016791</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col12" class="data row10 col12" >-0.022357</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row10_col13" class="data row10 col13" >0.043263</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row11" class="row_heading level0 row11" >cast_popularity_ave</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col0" class="data row11 col0" >0.144059</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col1" class="data row11 col1" >0.198903</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col2" class="data row11 col2" >0.071164</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col3" class="data row11 col3" >0.089181</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col4" class="data row11 col4" >0.169040</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col5" class="data row11 col5" >0.054579</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col6" class="data row11 col6" >0.087527</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col7" class="data row11 col7" >-0.032605</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col8" class="data row11 col8" >0.220179</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col9" class="data row11 col9" >0.075398</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col10" class="data row11 col10" >0.016791</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col11" class="data row11 col11" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col12" class="data row11 col12" >0.000960</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row11_col13" class="data row11 col13" >-0.010310</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row12" class="row_heading level0 row12" >rotten_score</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col0" class="data row12 col0" >0.152821</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col1" class="data row12 col1" >-0.006060</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col2" class="data row12 col2" >0.238099</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col3" class="data row12 col3" >0.012507</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col4" class="data row12 col4" >0.115027</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col5" class="data row12 col5" >-0.029827</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col6" class="data row12 col6" >0.034704</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col7" class="data row12 col7" >0.610450</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col8" class="data row12 col8" >0.277466</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col9" class="data row12 col9" >0.119720</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col10" class="data row12 col10" >-0.022357</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col11" class="data row12 col11" >0.000960</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col12" class="data row12 col12" >1.000000</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row12_col13" class="data row12 col13" >0.744639</td>
            </tr>
            <tr>
                        <th id="T_1be7ceba_d655_11eb_ace9_acde48001122level0_row13" class="row_heading level0 row13" >rotten_aud_score</th>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col0" class="data row13 col0" >0.288583</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col1" class="data row13 col1" >0.127460</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col2" class="data row13 col2" >0.347594</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col3" class="data row13 col3" >0.108507</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col4" class="data row13 col4" >0.148725</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col5" class="data row13 col5" >0.023904</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col6" class="data row13 col6" >0.131928</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col7" class="data row13 col7" >0.784524</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col8" class="data row13 col8" >0.389179</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col9" class="data row13 col9" >0.155257</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col10" class="data row13 col10" >0.043263</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col11" class="data row13 col11" >-0.010310</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col12" class="data row13 col12" >0.744639</td>
                        <td id="T_1be7ceba_d655_11eb_ace9_acde48001122row13_col13" class="data row13 col13" >1.000000</td>
            </tr>
    </tbody></table>

<p>於是我們使用 stepwise regression 來做預測，看看是否能避開多元共線性的問題。</p>
<div class="highlight"><pre><span></span><code><span class="n">stepwise_res_dict</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">stepwise_selection</span><span class="p">(</span><span class="n">df</span> <span class="o">=</span><span class="n">regression_df</span><span class="p">,</span> <span class="n">y_name</span> <span class="o">=</span> <span class="n">y_name</span><span class="p">,</span> <span class="n">x_names</span> <span class="o">=</span> <span class="n">x_names</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>======= Stepwise Regression Selection =======
Stop after 13 iterations.

Best adjR2 =  0.7730319697104591
Best subset =  [&#39;budget&#39;, &#39;TMDB_vote_count&#39;, &#39;has_collection&#39;, &#39;rotten_aud_score&#39;, &#39;runtime&#39;, &#39;cast_popularity_ave&#39;, &#39;cast_cnt&#39;, &#39;crew_cnt&#39;, &#39;female_cast_cnt&#39;]

                            OLS Regression Results                            
==============================================================================
Dep. Variable:                revenue   R-squared:                       0.774
Model:                            OLS   Adj. R-squared:                  0.773
Method:                 Least Squares   F-statistic:                     573.6
Date:                Sat, 26 Jun 2021   Prob (F-statistic):               0.00
Time:                        16:04:20   Log-Likelihood:                -30022.
No. Observations:                1514   AIC:                         6.006e+04
Df Residuals:                    1504   BIC:                         6.012e+04
Df Model:                           9                                         
Covariance Type:            nonrobust                                         
=======================================================================================
                          coef    std err          t      P&gt;|t|      [0.025      0.975]
---------------------------------------------------------------------------------------
Intercept           -2.337e+06   2.02e+07     -0.116      0.908    -4.2e+07    3.73e+07
budget                  1.9373      0.070     27.615      0.000       1.800       2.075
TMDB_vote_count      2.553e+04   1033.227     24.713      0.000    2.35e+04    2.76e+04
has_collection        8.06e+07   6.25e+06     12.886      0.000    6.83e+07    9.29e+07
rotten_aud_score     8.994e+05    1.7e+05      5.286      0.000    5.66e+05    1.23e+06
runtime             -7.301e+05   1.67e+05     -4.360      0.000   -1.06e+06   -4.02e+05
cast_popularity_ave -4.953e+06   1.48e+06     -3.341      0.001   -7.86e+06   -2.04e+06
cast_cnt              9.01e+05   6.93e+05      1.300      0.194   -4.59e+05    2.26e+06
crew_cnt            -7.623e+04   3.23e+04     -2.363      0.018    -1.4e+05   -1.29e+04
female_cast_cnt      1.377e+06   1.36e+06      1.013      0.311   -1.29e+06    4.04e+06
==============================================================================
Omnibus:                      571.503   Durbin-Watson:                   1.987
Prob(Omnibus):                  0.000   Jarque-Bera (JB):             5479.938
Skew:                           1.484   Prob(JB):                         0.00
Kurtosis:                      11.835   Cond. No.                     5.62e+08
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 5.62e+08. This might indicate that there are
strong multicollinearity or other numerical problems.
</code></pre></div>
<p>根據 model 的係數，我們可以發現在 'cast_popularity_ave', 'runtime', 'crew-cnt', 'male_cast_cnt' 的正負號與相關係數的正負號不同，因此多元共線性的問題仍然存在。<br>
我們繼續嘗試其他不同的方法來解決多元共線性問題。</p>
<p><strong>Fix Multicollinearity</strong></p>
<p>經過多組測試，曾經嘗試使用 Data Transformation、best subset⋯⋯等方法效果皆不如預期，最後決定直接刪除具有 multicollinearity problem 的項目，意外發現此成效最好</p>
<ul>
<li>dependent variables(y): 'revenue'</li>
<li>independent variables(x): 'budget'(x1), 'TMDB_vote_count'(x2), 'has_collection'(x3), 'rotten_aud_score(x4)', 'cast_cnt'(x5).</li>
</ul>
<p>其中，indicator variables為'has_collection'.</p>
<div class="highlight"><pre><span></span><code><span class="n">new_x_names</span> <span class="o">=</span> <span class="n">stepwise_res_dict</span><span class="p">[</span><span class="s1">&#39;best_subset&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">new_x_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;crew_cnt&#39;</span><span class="p">)</span>
<span class="n">new_x_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;cast_popularity_ave&#39;</span><span class="p">)</span>
<span class="n">new_x_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;runtime&#39;</span><span class="p">)</span>

<span class="c1"># 不同電腦會有不同結果</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">new_x_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;male_cast_cnt&#39;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">new_x_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;female_cast_cnt&#39;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="n">new_x_names</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[&#39;budget&#39;, &#39;TMDB_vote_count&#39;, &#39;has_collection&#39;, &#39;rotten_aud_score&#39;, &#39;cast_cnt&#39;]
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">res_dict</span><span class="p">,</span> <span class="n">assessment</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">MultipleRegression</span><span class="p">(</span><span class="n">x_names</span><span class="o">=</span><span class="n">new_x_names</span><span class="p">,</span> 
                                                        <span class="n">y_name</span><span class="o">=</span><span class="n">y_name</span><span class="p">,</span> 
                                                        <span class="n">df</span><span class="o">=</span><span class="n">regression_df</span><span class="p">,</span> 
                                                        <span class="n">assessment</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
                                                        <span class="n">t_test_c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
                                                        <span class="n">t_test_option</span><span class="o">=</span><span class="s1">&#39;two-tail&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:                revenue   R-squared:                       0.769
Model:                            OLS   Adj. R-squared:                  0.768
Method:                 Least Squares   F-statistic:                     1002.
Date:                Sat, 26 Jun 2021   Prob (F-statistic):               0.00
Time:                        16:04:20   Log-Likelihood:                -30041.
No. Observations:                1514   AIC:                         6.009e+04
Df Residuals:                    1508   BIC:                         6.013e+04
Df Model:                           5                                         
Covariance Type:            nonrobust                                         
====================================================================================
                       coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------------
const            -9.764e+07   1.07e+07     -9.095      0.000   -1.19e+08   -7.66e+07
budget               1.8114      0.066     27.444      0.000       1.682       1.941
TMDB_vote_count   2.381e+04    983.964     24.193      0.000    2.19e+04    2.57e+04
has_collection    8.692e+07   6.22e+06     13.964      0.000    7.47e+07    9.91e+07
rotten_aud_score  7.552e+05   1.65e+05      4.579      0.000    4.32e+05    1.08e+06
cast_cnt          1.248e+06   4.85e+05      2.573      0.010    2.96e+05     2.2e+06
==============================================================================
Omnibus:                      575.045   Durbin-Watson:                   1.988
Prob(Omnibus):                  0.000   Jarque-Bera (JB):             5530.952
Skew:                           1.494   Prob(JB):                         0.00
Kurtosis:                      11.874   Cond. No.                     2.95e+08
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 2.95e+08. This might indicate that there are
strong multicollinearity or other numerical problems.

======= Multiple Regression Results =======
Dep. Variable: revenue
No. of Observations (n): 1514
No. of Ind. Vairable (k): 5
Mean of Dep. Variable: 150390687.2820
Standard Deviation of Dep. Variable: 208516313.9476
Standard Error: 100474639.1618 (ȳ = 150390687.2820)
SSR: 15223490896969140224.0000

R-square: 0.7686
Adjusted R-square: 0.7678
Difference (≤ 0.06 True): 0.0007672977214114862

Estimated model: ŷ = -97643508.4111 + 1.8114 x1 + 23805.2576 x2 + 86918589.9428 x3 + 755207.4222 x4 + 1247804.2424 x5

&lt;F-test&gt;
F(observed value):  1001.6751
p-value:  0.0000 (Overwhelming Evidence)
Reject H_0 (The model is valid: at least one beta_i ≠ 0) → True
</code></pre></div>
<p>此 model 解決了多元共線性的問題，因此繼續往下做各項分析。</p>
<p>接著，在進一步檢驗這個模型的解釋力前我們要確認其殘差分析滿足下列三個條件：</p>
<ol>
<li>Non-normality (常態性)</li>
<li>Heteroscedasticity and homoscedasticity (變異數同質性)</li>
<li>Non-independence of the error variable (獨立性)</li>
</ol>
<p>For the first condition, the hypotheses are as follows:</p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: The errors are normally distributed</li>
<li><span class="arithmatex">\(H_1\)</span>: The errors are not normally distributed</li>
</ul>
<p>For the second condition, the hypotheses are:</p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: The residuals are of constant variance (Homoscedasticity)</li>
<li><span class="arithmatex">\(H_1\)</span>: The residuals are not of constant variance (Heteroscedasticity)</li>
</ul>
<p>For the third condition, the hypotheses are:</p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: Randomness exists</li>
<li><span class="arithmatex">\(H_1\)</span>: Randomness does not exist</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">mu_3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">res_dict</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">])</span>
<span class="n">sigma_3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">res_dict</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">])</span>
<span class="n">k_3</span> <span class="o">=</span> <span class="n">res_dict</span><span class="p">[</span><span class="s1">&#39;df_result&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">df_model</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">counts</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">patches</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">res_dict</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">],</span> <span class="mi">4</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Standardized Residuals&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Histogram of Standardized Residuals&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">bin_centers</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">k_3</span><span class="p">)</span> <span class="k">for</span> <span class="n">k_3</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">bins</span><span class="p">[</span><span class="mi">1</span><span class="p">:])]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">qqplot</span><span class="p">(</span><span class="n">res_dict</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">],</span> <span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="s1">&#39;45&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../output_207_0.png" /></p>
<p><img alt="png" src="../output_207_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">res_dict</span><span class="p">[</span><span class="s1">&#39;y_pre&#39;</span><span class="p">],</span> <span class="n">res_dict</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">],</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">lw</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">lw</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Standardized Residual Plot&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Predicted y value&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Standardized Residual&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_208_0.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">res</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">runs_test</span><span class="p">(</span><span class="n">res_dict</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">],</span> <span class="n">cutoff</span><span class="o">=</span><span class="s1">&#39;median&#39;</span><span class="p">)</span> 
</code></pre></div>
<div class="highlight"><pre><span></span><code>======= Runs Test =======
(n1 (757) or n2 (757) &gt; 20)
Runs = 751
runs_exp (mu_r) = 758.0000
std (sigma_r) = 19.448646

z-value (observed statistic) = -0.3599
p-value = 0.7189
Reject H_0 (Randomness does not exist) → False
</code></pre></div>
<p>根據長條圖及qqplot的結果，我們可以暫時假設其殘差為常態分佈。</p>
<p>針對第二個條件，從上面殘差的分佈圖，我們無法拒絕虛無假設，並認定殘差具有同方差性（Homoscedasticity）。</p>
<p>而第三個條件的 <span class="arithmatex">\(p\)</span> 值 <span class="arithmatex">\(= 0.7189&gt; \alpha = 0.05\)</span>. 我們無法拒絕虛無假設，並認定取樣是隨機的。</p>
<ul>
<li>The Standard Error of Estimate<br />
    The <span class="arithmatex">\(s_\epsilon = 100474639.1618\)</span> 和<span class="arithmatex">\(y\)</span>的平均比較起來 (<span class="arithmatex">\(\bar y =  150390687.2820\)</span>)， <span class="arithmatex">\(s_\epsilon\)</span> 並沒有比較小。因此這個模型並沒有太好的貼合資料。</li>
<li>The Coefficient of Determination  <ul>
<li><span class="arithmatex">\(r^2 = 0.7686\)</span> ，代表 76.86% <span class="arithmatex">\(y\)</span> 的變異可以被這個回歸模型解釋。剩餘的23.14%無法被解釋。</li>
<li>調整後的 <span class="arithmatex">\(r^2\)</span> is <span class="arithmatex">\(0.7678\)</span>，和 <span class="arithmatex">\(r^2\)</span>的差距小於6%，代表這個模型沒有over-fitting的問題。</li>
</ul>
</li>
<li>The <span class="arithmatex">\(F\)</span>-test of ANOVA<br />
<span class="arithmatex">\(F\)</span>-test的<span class="arithmatex">\(p\)</span>值 <span class="arithmatex">\(=0.0000 &lt; \alpha = 0.05\)</span>，因此我們可以拒絕虛無假設。代表至少有一個變數的係數不等於0，代表這個模型是<strong>有效的</strong>。</li>
<li>Testing of the Coefficients  <ul>
<li><span class="arithmatex">\(H_0\)</span>: <span class="arithmatex">\(\beta_i = 0\)</span> </li>
<li><span class="arithmatex">\(H_1\)</span>: <span class="arithmatex">\(\beta_i \neq 0\)</span></li>
<li><span class="arithmatex">\(i\)</span> =1,2,3,4,5</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">new_x_names</span><span class="p">,</span> <span class="n">res_dict</span><span class="p">[</span><span class="s1">&#39;df_result&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;p-value of </span><span class="si">%s</span><span class="s2"> = </span><span class="si">%0.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">p</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Since p-value &lt; alpha = 0.05, we reject H0 at significance level at alpha = 0.05.&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  There is enough evidence to infer that </span><span class="si">%s</span><span class="s2"> is linearly related to monthly sales.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">x</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Since p-value &gt; alpha = 0.05, we can not reject H0 at significance level at alpha = 0.05.&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  There is not enough evidence to infer that </span><span class="si">%s</span><span class="s2"> is linearly related to monthly sales.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>p-value of budget = 0.000
  Since p-value &lt; alpha = 0.05, we reject H0 at significance level at alpha = 0.05.
  There is enough evidence to infer that budget is linearly related to monthly sales.

p-value of TMDB_vote_count = 0.000
  Since p-value &lt; alpha = 0.05, we reject H0 at significance level at alpha = 0.05.
  There is enough evidence to infer that TMDB_vote_count is linearly related to monthly sales.

p-value of has_collection = 0.000
  Since p-value &lt; alpha = 0.05, we reject H0 at significance level at alpha = 0.05.
  There is enough evidence to infer that has_collection is linearly related to monthly sales.

p-value of rotten_aud_score = 0.000
  Since p-value &lt; alpha = 0.05, we reject H0 at significance level at alpha = 0.05.
  There is enough evidence to infer that rotten_aud_score is linearly related to monthly sales.

p-value of cast_cnt = 0.010
  Since p-value &lt; alpha = 0.05, we reject H0 at significance level at alpha = 0.05.
  There is enough evidence to infer that cast_cnt is linearly related to monthly sales.
</code></pre></div>
<p>我們得到的模型為：</p>
<div class="arithmatex">\[
ŷ = -97643508.4111 + 1.8114 x_1 + 23805.2576 x_2 + 86918589.9428 x_3 + 755207.4222 x_4 + 1247804.2424 x_5 
\]</div>
<ul>
<li><span class="arithmatex">\(b_0 = -97643508.4111\)</span>: 當所有的變數皆為0時<span class="arithmatex">\(y\)</span>的截距。但在所有的資料中並不包含這個範圍，因此不解讀截距的意義。</li>
<li><span class="arithmatex">\(b_1 = 1.8114\)</span>: 在這個模型中，預算每多一美金，票房會成長$1.8114 (在其他變數維持不變的前提下)。</li>
<li><span class="arithmatex">\(b_2 = 23805.2576\)</span>: 在這個模型中，TMDB_vote_count每多一單位，票房會成長$23805.2576 (在其他變數維持不變的前提下)。</li>
<li><span class="arithmatex">\(b_3 = 86918589.9428\)</span>: 在這個模型中，如果有collection的話，票房會成長$86918589.9428 (在其他變數維持不變的前提下)。 </li>
<li><span class="arithmatex">\(b_4 = 755207.4222\)</span>: 在這個模型中，rotten_aud_score每多一分，票房就會成長$755207.4222 (在其他變數維持不變的前提下)。</li>
<li><span class="arithmatex">\(b_5 = 1247804.2424\)</span>: 在這個模型中，演員數每多一名，票房就會成長$1247804.2424 (在其他變數維持不變的前提下)。</li>
</ul>
<h4 id="outliers">如果去掉 Outliers 的結果會如何？<a class="headerlink" href="#outliers" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">regression_df</span><span class="p">[</span><span class="n">y_name</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>0        29922472
1       157107755
2        33583175
3       112462508
4        45236543
          ...    
1509     17133446
1510     73515024
1511    191540586
1512     50401502
1513    374733942
Name: revenue, Length: 1514, dtype: int64
</code></pre></div>
<ul>
<li>dependent variables(y): 'revenue'<br></li>
<li>independent variables(x): 'budget'(x1), 'TMDB_vote_count'(x2), 'has_collection'(x3), 'rotten_aud_score(x4)'</li>
</ul>
<p>has_collection is indicator variable.</p>
<div class="highlight"><pre><span></span><code><span class="n">standard_resid</span> <span class="o">=</span> <span class="n">res_dict</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">]</span>
<span class="n">x_data</span> <span class="o">=</span> <span class="n">regression_df</span><span class="p">[</span><span class="n">new_x_names</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="n">y_data</span> <span class="o">=</span> <span class="n">regression_df</span><span class="p">[</span><span class="n">y_name</span><span class="p">]</span>
<span class="n">outlier_index</span><span class="p">,</span> <span class="n">infobs_index</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">team</span><span class="o">.</span><span class="n">Outlier_and_InfObs</span> <span class="p">(</span><span class="n">standard_resid</span><span class="o">=</span><span class="n">standard_resid</span><span class="p">,</span> <span class="n">x_data</span><span class="o">=</span><span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span><span class="o">=</span><span class="n">y_data</span><span class="p">,</span> <span class="n">Multi</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">regression_df</span><span class="p">)</span>

<span class="n">outlier_index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">outlier_index</span><span class="p">)</span>
<span class="n">infobs_index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">infobs_index</span><span class="p">)</span>

<span class="n">outlier_infobs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">outlier_index</span><span class="p">,</span> <span class="n">infobs_index</span><span class="p">])</span>
<span class="n">outlier_infobs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">outlier_infobs</span><span class="p">))</span>
<span class="c1"># print(outlier_infobs)</span>
<span class="n">regression_df</span> <span class="o">=</span> <span class="n">regression_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">outlier_infobs</span><span class="p">)</span>

<span class="n">regression_df</span> <span class="o">=</span> <span class="n">regression_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">regression_df</span> <span class="o">=</span> <span class="n">regression_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">])</span>

<span class="n">new_x_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;cast_cnt&#39;</span><span class="p">)</span> <span class="c1">#since multicollinearity problem</span>

<span class="n">res_dict_new</span><span class="p">,</span> <span class="n">assessment_new</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">MultipleRegression</span><span class="p">(</span><span class="n">x_names</span><span class="o">=</span><span class="n">new_x_names</span><span class="p">,</span> 
                                                        <span class="n">y_name</span><span class="o">=</span><span class="n">y_name</span><span class="p">,</span> 
                                                        <span class="n">df</span><span class="o">=</span><span class="n">regression_df</span><span class="p">,</span> 
                                                        <span class="n">assessment</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
                                                        <span class="n">t_test_c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
                                                        <span class="n">t_test_option</span><span class="o">=</span><span class="s1">&#39;two-tail&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:                revenue   R-squared:                       0.816
Model:                            OLS   Adj. R-squared:                  0.815
Method:                 Least Squares   F-statistic:                     1533.
Date:                Sat, 26 Jun 2021   Prob (F-statistic):               0.00
Time:                        16:04:21   Log-Likelihood:                -26863.
No. Observations:                1389   AIC:                         5.374e+04
Df Residuals:                    1384   BIC:                         5.376e+04
Df Model:                           4                                         
Covariance Type:            nonrobust                                         
====================================================================================
                       coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------------
const            -6.274e+07   6.33e+06     -9.910      0.000   -7.52e+07   -5.03e+07
budget               1.7131      0.047     36.643      0.000       1.621       1.805
TMDB_vote_count   2.249e+04    837.531     26.848      0.000    2.08e+04    2.41e+04
has_collection    7.163e+07   3.99e+06     17.948      0.000    6.38e+07    7.95e+07
rotten_aud_score  4.774e+05   1.04e+05      4.571      0.000    2.73e+05    6.82e+05
==============================================================================
Omnibus:                      114.202   Durbin-Watson:                   2.015
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              257.857
Skew:                           0.496   Prob(JB):                     1.02e-56
Kurtosis:                       4.863   Cond. No.                     2.29e+08
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 2.29e+08. This might indicate that there are
strong multicollinearity or other numerical problems.

======= Multiple Regression Results =======
Dep. Variable: revenue
No. of Observations (n): 1389
No. of Ind. Vairable (k): 4
Mean of Dep. Variable: 112473146.0958
Standard Deviation of Dep. Variable: 141390186.6270
Standard Error: 60766005.5533 (ȳ = 112473146.0958)
SSR: 5110430284363340800.0000

R-square: 0.8158
Adjusted R-square: 0.8153
Difference (≤ 0.06 True): 0.0005322962023602829

Estimated model: ŷ = -62743630.3927 + 1.7131 x1 + 22486.4149 x2 + 71625474.3703 x3 + 477437.8165 x4

&lt;F-test&gt;
F(observed value):  1532.6533
p-value:  0.0000 (Overwhelming Evidence)
Reject H_0 (The model is valid: at least one beta_i ≠ 0) → True
</code></pre></div>
<p>接著，在進一步檢驗這個模型的解釋力前我們要確認其殘差分析滿足下列三個條件：</p>
<ol>
<li>Non-normality （常態性）</li>
<li>Heteroscedasticity and homoscedasticity （變異數同質性）</li>
<li>Non-independence of the error variable （獨立性）</li>
</ol>
<p>For the first condition, the hypotheses are as follows:</p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: The errors are normally distributed</li>
<li><span class="arithmatex">\(H_1\)</span>: The errors are not normally distributed</li>
</ul>
<p>For the second condition, the hypotheses are:</p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: The residuals are of constant variance (Homoscedasticity)</li>
<li><span class="arithmatex">\(H_1\)</span>: The residuals are not of constant variance (Heteroscedasticity)</li>
</ul>
<p>For the third condition, the hypotheses are:</p>
<ul>
<li><span class="arithmatex">\(H_0\)</span>: Randomness exists</li>
<li><span class="arithmatex">\(H_1\)</span>: Randomness does not exist</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">mu_3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">res_dict_new</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">])</span>
<span class="n">sigma_3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">res_dict_new</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">])</span>
<span class="n">k_3</span> <span class="o">=</span> <span class="n">res_dict_new</span><span class="p">[</span><span class="s1">&#39;df_result&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">df_model</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">counts</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">patches</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">res_dict_new</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">],</span> <span class="mi">4</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Standardized Residuals&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Histogram of Standardized Residuals&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">bin_centers</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">k_3</span><span class="p">)</span> <span class="k">for</span> <span class="n">k_3</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">bins</span><span class="p">[</span><span class="mi">1</span><span class="p">:])]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">qqplot</span><span class="p">(</span><span class="n">res_dict_new</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">],</span> <span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="s1">&#39;45&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../output_219_0.png" /></p>
<p><img alt="png" src="../output_219_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">res_dict_new</span><span class="p">[</span><span class="s1">&#39;y_pre&#39;</span><span class="p">],</span> <span class="n">res_dict_new</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">],</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">lw</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">lw</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Standardized Residual Plot&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Predicted y value&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Standardized Residual&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_220_0.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">res</span> <span class="o">=</span> <span class="n">mgt2001</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">runs_test</span><span class="p">(</span><span class="n">res_dict_new</span><span class="p">[</span><span class="s1">&#39;std_resid&#39;</span><span class="p">],</span> <span class="n">cutoff</span><span class="o">=</span><span class="s1">&#39;median&#39;</span><span class="p">)</span> 
</code></pre></div>
<div class="highlight"><pre><span></span><code>======= Runs Test =======
(n1 (695) or n2 (694) &gt; 20)
Runs = 699
runs_exp (mu_r) = 695.4996
std (sigma_r) = 18.627922

z-value (observed statistic) = 0.1879
p-value = 0.8509
Reject H_0 (Randomness does not exist) → False
</code></pre></div>
<p>根據長條圖及qqplot的結果，我們可以假設其殘差為常態分佈。</p>
<p>針對第二個條件，從上面殘差的分佈圖，我們無法拒絕虛無假設，並認定殘差具有同方差性（Homoscedasticity）。</p>
<p>而第三個條件的 <span class="arithmatex">\(p\)</span> 值 <span class="arithmatex">\(= 0.8509&gt; \alpha = 0.05\)</span>. 我們無法拒絕虛無假設，並認定取樣是隨機的。</p>
<ul>
<li>The Standard Error of Estimate<br />
    The <span class="arithmatex">\(s_\epsilon = 59949741.3693\)</span> 和<span class="arithmatex">\(y\)</span>的平均比較起來 (<span class="arithmatex">\(\bar y =  113392305.8323\)</span>)， <span class="arithmatex">\(s_\epsilon\)</span> 並沒有比較小。因此這個模型並沒有太好的貼合資料。</li>
<li>The Coefficient of Determination  <ul>
<li><span class="arithmatex">\(r^2 = 0.816\)</span> ，代表 81.6% <span class="arithmatex">\(y\)</span> 的變異可以被這個回歸模型解釋。剩餘的18.4%無法被解釋。</li>
<li>調整後的 <span class="arithmatex">\(r^2\)</span> is <span class="arithmatex">\(0.815\)</span>，和 <span class="arithmatex">\(r^2\)</span>的差距小於6%，代表這個模型沒有over-fitting的問題。</li>
</ul>
</li>
<li>The <span class="arithmatex">\(F\)</span>-test of ANOVA<br />
<span class="arithmatex">\(F\)</span>-test的<span class="arithmatex">\(p\)</span>值 <span class="arithmatex">\(=0.0000 &lt; \alpha = 0.05\)</span>，因此我們可以拒絕虛無假設。代表至少有一個變數的係數不等於0，這個模型是<strong>有效的</strong>。</li>
<li>Testing of the Coefficients  <ul>
<li><span class="arithmatex">\(H_0\)</span>: <span class="arithmatex">\(\beta_i = 0\)</span> </li>
<li><span class="arithmatex">\(H_1\)</span>: <span class="arithmatex">\(\beta_i \neq 0\)</span></li>
<li><span class="arithmatex">\(i\)</span>=1,2,3,4</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">new_x_names</span><span class="p">,</span> <span class="n">res_dict_new</span><span class="p">[</span><span class="s1">&#39;df_result&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;p-value of </span><span class="si">%s</span><span class="s2"> = </span><span class="si">%0.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">p</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Since p-value &lt; alpha = 0.05, we reject H0 at significance level at alpha = 0.05.&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  There is enough evidence to infer that </span><span class="si">%s</span><span class="s2"> is linearly related to monthly sales.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">x</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Since p-value &gt; alpha = 0.05, we can not reject H0 at significance level at alpha = 0.05.&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  There is not enough evidence to infer that </span><span class="si">%s</span><span class="s2"> is linearly related to monthly sales.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>p-value of budget = 0.000
  Since p-value &lt; alpha = 0.05, we reject H0 at significance level at alpha = 0.05.
  There is enough evidence to infer that budget is linearly related to monthly sales.

p-value of TMDB_vote_count = 0.000
  Since p-value &lt; alpha = 0.05, we reject H0 at significance level at alpha = 0.05.
  There is enough evidence to infer that TMDB_vote_count is linearly related to monthly sales.

p-value of has_collection = 0.000
  Since p-value &lt; alpha = 0.05, we reject H0 at significance level at alpha = 0.05.
  There is enough evidence to infer that has_collection is linearly related to monthly sales.

p-value of rotten_aud_score = 0.000
  Since p-value &lt; alpha = 0.05, we reject H0 at significance level at alpha = 0.05.
  There is enough evidence to infer that rotten_aud_score is linearly related to monthly sales.
</code></pre></div>
<p>我們得到的模型為：</p>
<div class="arithmatex">\[
ŷ = -62743630.3927 + 1.7131 x_1 + 22486.4149 x_2 + 71625474.3703 x_3 + 477437.8165 x_4
\]</div>
<ul>
<li><span class="arithmatex">\(b_0 = -62743630.3927\)</span>: 當所有的變數皆為0時<span class="arithmatex">\(y\)</span>的截距。但在所有的資料中並不包含這個範圍，因此不解讀截距的意義。 </li>
<li><span class="arithmatex">\(b_1 = 1.7131\)</span>: 在這個模型中，預算每多一美金，票房會成長$1.7131 (在其他變數維持不變的前提下)。</li>
<li><span class="arithmatex">\(b_2 = 22486.4149\)</span>: 在這個模型中，TMDB_vote_count每多一單位，票房會成長$22486.4149 (在其他變數維持不變的前提下)。</li>
<li>$b_3 = 71625474.3703 $: 在這個模型中，如果有collection的話，票房會成長$71625474.3703 (在其他變數維持不變的前提下)。 </li>
<li><span class="arithmatex">\(b_4 = 477437.8165\)</span>: 在這個模型中，rotten_aud_score每多一分，票房就會成長$477437.8165 (在其他變數維持不變的前提下)。</li>
</ul>
<p>接著利用此 model 進行預測，預測 2020/1 的電影票房。</p>
<div class="highlight"><pre><span></span><code><span class="c1">#[&#39;budget&#39;, &#39;TMDB_vote_count&#39;, &#39;has_collection&#39;, &#39;rotten_aud_score&#39;]</span>
<span class="n">real_revenue</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">245692007</span><span class="p">,</span><span class="mi">42800000</span><span class="p">,</span><span class="mi">40882928</span><span class="p">,</span><span class="mi">26925979</span><span class="p">,</span><span class="mi">18472775</span><span class="p">,</span><span class="mi">1023510</span><span class="p">,</span><span class="mi">22059211</span><span class="p">])</span>
<span class="n">x_pre</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">175000000</span><span class="p">,</span> <span class="mi">2540</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">76</span><span class="p">],</span><span class="c1">#Dolittle</span>
                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000000</span><span class="p">,</span> <span class="mi">801</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">23</span><span class="p">],</span> <span class="c1">#The Grudge</span>
                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">80000000</span><span class="p">,</span> <span class="mi">2076</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">],</span> <span class="c1">#Underwater</span>
                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">29000000</span><span class="p">,</span> <span class="mi">482</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">65</span><span class="p">],</span> <span class="c1">#Like a Boss</span>
                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">14000000</span><span class="p">,</span> <span class="mi">643</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="c1">#The Turning</span>
                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6000000</span><span class="p">,</span> <span class="mi">737</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">82</span><span class="p">],</span> <span class="c1">#Color Out of Space</span>
                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5000000</span><span class="p">,</span> <span class="mi">944</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">23</span><span class="p">]])</span> <span class="c1">#Gretel &amp; Hansel</span>

<span class="n">y_pre</span> <span class="o">=</span> <span class="n">res_dict_new</span><span class="p">[</span><span class="s1">&#39;df_result&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">x_pre</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;prediction revenue: &#39;</span><span class="p">,</span> <span class="n">y_pre</span><span class="p">)</span>
<span class="n">gap</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">real_revenue</span><span class="o">-</span><span class="n">y_pre</span><span class="p">)</span><span class="o">/</span><span class="n">real_revenue</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;gap: &#39;</span><span class="p">,</span> <span class="n">gap</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;average gap: &#39;</span><span class="p">,</span> <span class="n">gap</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="mi">7</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>prediction revenue:  [ 3.30448696e+08 -1.66199961e+07  1.49632005e+08  2.88080236e+07
 -1.71399737e+07  3.25732605e+06 -2.19699119e+07]
gap:  [0.34497129 1.38831767 2.66001196 0.06989698 1.92785051 2.18250535
 1.99595184]
average gap:  1.5099293705639918
</code></pre></div>
<p>因為 female_cast_cnt 與 male_cast_cnt 與 cast_cnt 會有多元共線性的問題，加上顯著度不高，於是我們選擇刪除這些變數。  </p>
<p>我們最後所得到的 Gap 其實非常大（1.5），我們推測可能的原因是標準差太大，所以預測結果比較容易失準。</p>
<h2 id="-roi">電影的賺錢程度 - ROI 與票房的關係<a class="headerlink" href="#-roi" title="Permanent link">&para;</a></h2>
<p>最後，我們想知道 <strong>票房好的電影真的賺的比較多嗎？</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">ax1</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span><span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;ROI&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;DarkBlue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;After removing the outlier&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Text(0.5, 1.0, &#39;After removing the outlier&#39;)
</code></pre></div>
<p><img alt="png" src="../output_230_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">df_compare</span> <span class="o">=</span> <span class="n">u_movie_df</span><span class="p">[[</span><span class="s1">&#39;revenue&#39;</span><span class="p">,</span> <span class="s1">&#39;ROI&#39;</span><span class="p">]]</span>
<span class="n">df_compare</span> <span class="o">=</span> <span class="n">df_compare</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_compare</span><span class="p">)</span>

<span class="n">temp_1</span> <span class="o">=</span>  <span class="n">df_compare</span><span class="p">[</span><span class="n">df_compare</span><span class="o">.</span><span class="n">revenue</span> <span class="o">&gt;=</span> <span class="n">df_compare</span><span class="o">.</span><span class="n">revenue</span><span class="o">.</span><span class="n">mean</span><span class="p">()]</span>
<span class="n">temp_2</span> <span class="o">=</span>  <span class="n">df_compare</span><span class="p">[</span><span class="n">df_compare</span><span class="o">.</span><span class="n">revenue</span> <span class="o">&lt;</span> <span class="n">df_compare</span><span class="o">.</span><span class="n">revenue</span><span class="o">.</span><span class="n">mean</span><span class="p">()]</span>
<span class="n">temp_1</span> <span class="o">=</span> <span class="n">temp_1</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">temp_2</span> <span class="o">=</span> <span class="n">temp_2</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">temp_1</span> <span class="o">=</span> <span class="n">temp_1</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ROI&quot;</span><span class="p">:</span> <span class="s2">&quot;ROI_1&quot;</span><span class="p">})</span>
<span class="n">temp_2</span> <span class="o">=</span> <span class="n">temp_2</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ROI&quot;</span><span class="p">:</span> <span class="s2">&quot;ROI_2&quot;</span><span class="p">})</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>revenue</th>
      <th>ROI</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>161834276</td>
      <td>3.045857</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>144056873</td>
      <td>2.601422</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>45554533</td>
      <td>0.518484</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>28780255</td>
      <td>3.111465</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>106371651</td>
      <td>1.575585</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2783</th>
      <td>2783</td>
      <td>47019435</td>
      <td>1.765849</td>
    </tr>
    <tr>
      <th>2784</th>
      <td>2784</td>
      <td>30763855</td>
      <td>2.076386</td>
    </tr>
    <tr>
      <th>2785</th>
      <td>2785</td>
      <td>76706000</td>
      <td>2.835300</td>
    </tr>
    <tr>
      <th>2786</th>
      <td>2786</td>
      <td>80648577</td>
      <td>1.016214</td>
    </tr>
    <tr>
      <th>2787</th>
      <td>2787</td>
      <td>46586903</td>
      <td>-0.767065</td>
    </tr>
  </tbody>
</table>
<p>2788 rows × 3 columns</p>
</div>

<div class="highlight"><pre><span></span><code><span class="n">n</span> <span class="o">=</span> <span class="n">df_compare</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1">#num of data</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="n">boo</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span><span class="p">(</span><span class="n">df_compare</span><span class="o">.</span><span class="n">revenue</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">df_compare</span><span class="o">.</span><span class="n">revenue</span><span class="o">.</span><span class="n">mean</span><span class="p">()):</span>
        <span class="n">boo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;above&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">boo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;below&#39;</span><span class="p">)</span>


<span class="n">df_compare</span><span class="p">[</span><span class="s1">&#39;average&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">boo</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Head of dataset:&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_compare</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tail of dataset:&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_compare</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>2788
Head of dataset:
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>revenue</th>
      <th>ROI</th>
      <th>average</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>161834276</td>
      <td>3.045857</td>
      <td>above</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>144056873</td>
      <td>2.601422</td>
      <td>above</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>45554533</td>
      <td>0.518484</td>
      <td>below</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>28780255</td>
      <td>3.111465</td>
      <td>below</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>106371651</td>
      <td>1.575585</td>
      <td>below</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code>Tail of dataset:
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>revenue</th>
      <th>ROI</th>
      <th>average</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2783</th>
      <td>2783</td>
      <td>47019435</td>
      <td>1.765849</td>
      <td>below</td>
    </tr>
    <tr>
      <th>2784</th>
      <td>2784</td>
      <td>30763855</td>
      <td>2.076386</td>
      <td>below</td>
    </tr>
    <tr>
      <th>2785</th>
      <td>2785</td>
      <td>76706000</td>
      <td>2.835300</td>
      <td>below</td>
    </tr>
    <tr>
      <th>2786</th>
      <td>2786</td>
      <td>80648577</td>
      <td>1.016214</td>
      <td>below</td>
    </tr>
    <tr>
      <th>2787</th>
      <td>2787</td>
      <td>46586903</td>
      <td>-0.767065</td>
      <td>below</td>
    </tr>
  </tbody>
</table>
</div>

<p><strong>檢查是否為常態分佈</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">temp_1</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;above&#39;</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">temp_2</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;below&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_234_0.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df_compare</span><span class="p">[</span><span class="s1">&#39;ROI&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../output_235_0.png" /></p>
<p>由於資料不是常態分佈，因此我們使用Wilcoxon Rank Sum Test。</p>
<p><strong>Wilcoxon Signed Rank Sum Test</strong></p>
<ul>
<li><span class="arithmatex">\(H_0:\)</span> The locations of two populations are the same.</li>
<li><span class="arithmatex">\(H_1:\)</span> The location of population 1(Better Revenue) is to the right of the location of population 2 (i.e., population 1 is greater).</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">df_compare_</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">temp_1</span><span class="p">[</span><span class="s2">&quot;ROI_1&quot;</span><span class="p">],</span> <span class="n">temp_2</span><span class="p">[</span><span class="s2">&quot;ROI_2&quot;</span><span class="p">]])</span>
<span class="n">df_compare_</span> <span class="o">=</span> <span class="n">df_compare_</span><span class="o">.</span><span class="n">T</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">stats</span><span class="o">.</span><span class="n">wilcoxon</span><span class="p">(</span><span class="n">df_compare_</span><span class="p">[</span><span class="s1">&#39;ROI_1&#39;</span><span class="p">],</span> <span class="n">df_compare_</span><span class="p">[</span><span class="s1">&#39;ROI_2&#39;</span><span class="p">],</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;greater&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>WilcoxonResult(statistic=271329.0, pvalue=1.0)
</code></pre></div>
<p><strong>Friedman Test</strong></p>
<p>Suppose the data are not normally distributed.</p>
<ul>
<li><span class="arithmatex">\(H_0:\)</span> The locations of two populations are the same.</li>
<li><span class="arithmatex">\(H_1:\)</span> At least two population locations differ.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">_</span> <span class="o">=</span> <span class="n">non</span><span class="o">.</span><span class="n">friedman_chi2_test</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_compare_</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>======= Friedman Test with Chi-squared Test =======
(Number of blocks = 1957 &gt;= 5 or number of populations 2 &gt;= 5)

F_r statistic value (observed) = -10689.0910
chi2 critical value = 3.8415
p-value = 1.0000 (No Evidence)
Reject H_0 (Not all 2 population locations are the same) → False
</code></pre></div>
<p>Wilcoxon signed rank sum test 和 Friedman Test 的 <span class="arithmatex">\(p\)</span>-value 皆大於 <span class="arithmatex">\(\alpha\)</span>。因此我們並不能拒絕虛無假設。<br></p>
<p><strong>結論：所以我們可以得知票房較好並不代表ROI較高。</strong></p>
<div class="alert alert-block alert-info">
<b>🍿 你知道嗎？</b><br>

2009年，派拉蒙影業公司發行的《鬼影實錄》是目前投資報酬率最高的電影，僅憑1.1萬美金的製作成本，換回了全球1.97億的票房</div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../data-processing/" class="md-footer__link md-footer__link--prev" aria-label="上一頁: 資料處理" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一頁
              </span>
              資料處理
            </div>
          </div>
        </a>
      
      
        
        <a href="../conclusion/" class="md-footer__link md-footer__link--next" aria-label="下一頁: 結論" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一頁
              </span>
              結論
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 IM in Love with Movies @ ccClub, NTU
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["toc.integrate", "navigation.instant", "navigation.expand"], "translations": {"clipboard.copy": "\u8907\u88fd", "clipboard.copied": "\u5df2\u8907\u88fd", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\u3000\u3001\u3002\uff0c\uff0e\uff1f\uff1b]+", "search.placeholder": "\u641c\u5c0b", "search.result.placeholder": "\u6253\u5b57\u9032\u884c\u641c\u5c0b", "search.result.none": "\u6c92\u6709\u7b26\u5408\u7684\u9805\u76ee", "search.result.one": "\u627e\u5230 1 \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.other": "\u627e\u5230 # \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.82b56eb2.min.js"></script>
      
        <script src="../js/config.js"></script>
      
        <script src="../js/polyfill.js"></script>
      
        <script src="../js/mathjax/tex-chtml.js"></script>
      
    
  </body>
</html>